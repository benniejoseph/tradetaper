"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1900],{18672:(e,a,t)=>{t.d(a,{x:()=>o});var r=t(80722);let o={createCheckoutSession:async e=>(await r.Y0.post("/subscriptions/create-checkout-session",e)).data,getCurrentSubscription:async()=>{try{return(await r.Y0.get("/subscriptions/current")).data}catch(a){if(a&&"object"==typeof a&&"response"in a){var e;if((null==(e=a.response)?void 0:e.status)===404)return null}throw a}},getBillingInfo:async()=>(await r.Y0.get("/subscriptions/billing-info")).data,cancelSubscription:async()=>(await r.Y0.post("/subscriptions/cancel")).data,reactivateSubscription:async()=>(await r.Y0.post("/subscriptions/reactivate")).data,updateSubscription:async e=>(await r.Y0.post("/subscriptions/update",{priceId:e})).data,createPortalSession:async e=>(await r.Y0.post("/subscriptions/create-portal-session",{return_url:e})).data,getUsage:async()=>(await r.Y0.get("/subscriptions/usage")).data}},23352:(e,a,t)=>{t.d(a,{$L:()=>i,Ay:()=>b,Cm:()=>d,Gz:()=>u,IJ:()=>S,P:()=>T,PE:()=>l,YY:()=>f,cV:()=>L,dq:()=>v,kQ:()=>C,s5:()=>p,tJ:()=>I});var r=t(51990),o=t(80722);let s={trades:[],isLoading:!1,error:null,currentTrade:null,filters:{},analyticsFilters:{analyticsDateFrom:"",analyticsDateTo:""},total:0,page:1,limit:10};function n(e){return{id:e.id,userId:e.userId,assetType:e.assetType,symbol:e.symbol,direction:e.side,status:e.status,entryDate:e.openTime,entryPrice:parseFloat(e.openPrice),exitDate:e.closeTime,exitPrice:e.closePrice?parseFloat(e.closePrice):void 0,quantity:parseFloat(e.quantity),stopLoss:e.stopLoss?parseFloat(e.stopLoss):void 0,takeProfit:e.takeProfit?parseFloat(e.takeProfit):void 0,commission:e.commission?parseFloat(e.commission):void 0,notes:e.notes,profitOrLoss:e.profitOrLoss?parseFloat(e.profitOrLoss):void 0,rMultiple:e.rMultiple?parseFloat(e.rMultiple):void 0,ictConcept:e.ictConcept,session:e.session,setupDetails:e.setupDetails,mistakesMade:e.mistakesMade,lessonsLearned:e.lessonsLearned,imageUrl:e.imageUrl,tags:e.tags||[],createdAt:e.createdAt,updatedAt:e.updatedAt,accountId:e.accountId,isStarred:e.isStarred||!1}}function c(e){let a=e=>{if(e)try{if(e.includes("T")&&(e.includes("Z")||e.includes("+")||e.includes("-")))return e;return new Date(e).toISOString()}catch(a){console.error("Error formatting date for API:",e,a);return}};return{assetType:e.assetType,symbol:e.symbol,side:e.direction,status:e.status,openTime:a(e.entryDate),openPrice:e.entryPrice,closeTime:a(e.exitDate),closePrice:e.exitPrice,quantity:e.quantity,stopLoss:e.stopLoss,takeProfit:e.takeProfit,commission:e.commission,notes:e.notes,ictConcept:e.ictConcept,session:e.session,setupDetails:e.setupDetails,mistakesMade:e.mistakesMade,lessonsLearned:e.lessonsLearned,imageUrl:e.imageUrl,tagNames:e.tagNames,accountId:e.accountId,isStarred:e.isStarred}}let d=(0,r.zD)("trades/fetchTrades",async(e,a)=>{let{accountId:t,page:r=1,limit:s=10}=e,{rejectWithValue:c}=a;try{let e="/trades?page=".concat(r,"&limit=").concat(s);t&&(e+="&accountId=".concat(t));let a=await o.Y0.get(e);console.log("Raw fetchTrades from API (accountId: ".concat(t||"all","):"),a.data);let c=a.data.data.map(n);return console.log("Transformed trades for frontend:",c),{data:c,total:a.data.total,page:a.data.page,limit:a.data.limit}}catch(e){var d,l;return c((null==(l=e.response)||null==(d=l.data)?void 0:d.message)||e.message||"Failed to fetch trades")}}),l=(0,r.zD)("trades/fetchTradeById",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=await o.Y0.get("/trades/".concat(e));console.log("Raw fetchTradeById from API:",a.data);let t=n(a.data);return console.log("Transformed trade for frontend:",t),t}catch(e){var r,s;return t((null==(s=e.response)||null==(r=s.data)?void 0:r.message)||e.message||"Failed to fetch trade")}}),i=(0,r.zD)("trades/createTrade",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=c(e);console.log("Frontend payload:",e),console.log("Transformed API payload:",a);let t=await o.Y0.post("/trades",a);console.log("Raw createTrade from API:",t.data);let r=n(t.data);return console.log("Transformed created trade for frontend:",r),r}catch(e){var r,s;return t((null==(s=e.response)||null==(r=s.data)?void 0:r.message)||e.message||"Failed to create trade")}}),u=(0,r.zD)("trades/updateTrade",async(e,a)=>{let{id:t,payload:r}=e,{rejectWithValue:s}=a;try{let e=c(r);console.log("Frontend updateTrade payload:",r),console.log("Transformed updateTrade API payload:",e);let a=await o.Y0.patch("/trades/".concat(t),e);console.log("Raw updateTrade from API:",a.data);let s=n(a.data);return console.log("Transformed updated trade for frontend:",s),s}catch(e){var d,l;return s((null==(l=e.response)||null==(d=l.data)?void 0:d.message)||e.message||"Failed to update trade")}}),p=(0,r.zD)("trades/deleteTrade",async(e,a)=>{let{rejectWithValue:t}=a;try{return await o.Y0.delete("/trades/".concat(e)),e}catch(e){var r,s;return t((null==(s=e.response)||null==(r=s.data)?void 0:r.message)||e.message||"Failed to delete trade")}}),g=(0,r.zD)("trades/analyzeChart",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=new FormData;return a.append("file",e),(await o.Y0.post("/trades/analyze-chart",a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){var r,s;return t((null==(s=e.response)||null==(r=s.data)?void 0:r.message)||e.message||"Failed to analyze chart")}}),y=(0,r.Z0)({name:"trades",initialState:s,reducers:{clearTradesError(e){e.error=null},setCurrentTrade(e,a){e.currentTrade=a.payload},setTradeFilters(e,a){e.filters={...e.filters,...a.payload}},resetTradeFilters(e){e.filters=s.filters},setAnalyticsDateFilters(e,a){e.analyticsFilters={...e.analyticsFilters,...a.payload}},resetAnalyticsDateFilters(e){e.analyticsFilters=s.analyticsFilters},addTrade(e,a){-1===e.trades.findIndex(e=>e.id===a.payload.id)&&e.trades.unshift(a.payload)},updateTradeRealtime(e,a){var t;let r=e.trades.findIndex(e=>e.id===a.payload.id);-1!==r&&(e.trades[r]=a.payload),(null==(t=e.currentTrade)?void 0:t.id)===a.payload.id&&(e.currentTrade=a.payload)},removeTrade(e,a){var t;e.trades=e.trades.filter(e=>e.id!==a.payload),(null==(t=e.currentTrade)?void 0:t.id)===a.payload&&(e.currentTrade=null)},setTrades(e,a){e.trades=a.payload}},extraReducers:e=>{e.addCase(d.pending,e=>{e.isLoading=!0,e.error=null}).addCase(d.fulfilled,(e,a)=>{e.isLoading=!1,e.trades=a.payload.data,e.total=a.payload.total,e.page=a.payload.page,e.limit=a.payload.limit}).addCase(d.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,(e,a)=>{e.isLoading=!1,e.currentTrade=a.payload}).addCase(l.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.isLoading=!1,e.trades.unshift(a.payload)}).addCase(i.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(u.pending,e=>{e.isLoading=!0,e.error=null}).addCase(u.fulfilled,(e,a)=>{var t;e.isLoading=!1;let r=e.trades.findIndex(e=>e.id===a.payload.id);-1!==r&&(e.trades[r]=a.payload),(null==(t=e.currentTrade)?void 0:t.id)===a.payload.id&&(e.currentTrade=a.payload)}).addCase(u.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(p.pending,e=>{e.isLoading=!0,e.error=null}).addCase(p.fulfilled,(e,a)=>{var t;e.isLoading=!1,e.trades=e.trades.filter(e=>e.id!==a.payload),(null==(t=e.currentTrade)?void 0:t.id)===a.payload&&(e.currentTrade=null)}).addCase(p.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(g.pending,e=>{e.isLoading=!0,e.error=null}).addCase(g.fulfilled,(e,a)=>{e.isLoading=!1,console.log("Chart analysis successful:",a.payload)}).addCase(g.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload})}}),{clearTradesError:m,setCurrentTrade:f,setTradeFilters:A,resetTradeFilters:h,setAnalyticsDateFilters:L,resetAnalyticsDateFilters:I,addTrade:C,updateTradeRealtime:T,removeTrade:v,setTrades:S}=y.actions,b=y.reducer},26467:(e,a,t)=>{t.d(a,{Ay:()=>l,Tu:()=>n,WH:()=>s,Wy:()=>o,kS:()=>d,ri:()=>c});let r=(0,t(51990).Z0)({name:"auth",initialState:{user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null},reducers:{authRequest(e){e.isLoading=!0,e.error=null},authSuccess(e,a){e.isLoading=!1,e.isAuthenticated=!0,e.token=a.payload.token,e.user=a.payload.user,e.error=null,localStorage.setItem("token",a.payload.token),localStorage.setItem("user",JSON.stringify(a.payload.user))},authFailure(e,a){e.isLoading=!1,e.isAuthenticated=!1,e.token=null,e.user=null,e.error=a.payload,localStorage.removeItem("token"),localStorage.removeItem("user")},logout(e){e.user=null,e.token=null,e.isAuthenticated=!1,e.isLoading=!1,e.error=null,localStorage.removeItem("token"),localStorage.removeItem("user")},loadUserFromStorage(e){{let a=localStorage.getItem("token"),t=localStorage.getItem("user");if(a&&t)try{let r=JSON.parse(t);e.token=a,e.user=r,e.isAuthenticated=!0}catch(e){console.error("Error parsing user from localStorage",e),localStorage.removeItem("token"),localStorage.removeItem("user")}}}}}),{authRequest:o,authSuccess:s,authFailure:n,logout:c,loadUserFromStorage:d}=r.actions,l=r.reducer},32194:(e,a,t)=>{t.d(a,{Ay:()=>g,K2:()=>A,M2:()=>d,Ne:()=>s,fT:()=>f,rU:()=>y,wK:()=>n,wW:()=>c,wZ:()=>m,ye:()=>l});var r=t(51990),o=t(18672);let s=(0,r.zD)("subscription/fetchCurrent",async(e,a)=>{let{rejectWithValue:t}=a;try{return await o.x.getCurrentSubscription()}catch(e){return t("Failed to fetch subscription")}}),n=(0,r.zD)("subscription/fetchBillingInfo",async(e,a)=>{let{rejectWithValue:t}=a;try{return await o.x.getBillingInfo()}catch(e){return t("Failed to fetch billing info")}}),c=(0,r.zD)("subscription/fetchUsage",async(e,a)=>{let{rejectWithValue:t}=a;try{return await o.x.getUsage()}catch(e){return t("Failed to fetch usage")}}),d=(0,r.zD)("subscription/cancel",async(e,a)=>{let{rejectWithValue:t}=a;try{return await o.x.cancelSubscription(),!0}catch(e){return t("Failed to cancel subscription")}}),l=(0,r.zD)("subscription/reactivate",async(e,a)=>{let{rejectWithValue:t}=a;try{return await o.x.reactivateSubscription(),!0}catch(e){return t("Failed to reactivate subscription")}}),i=(0,r.Z0)({name:"subscription",initialState:{currentSubscription:null,billingInfo:null,usage:null,isLoading:!1,error:null},reducers:{clearError:e=>{e.error=null},setSubscription:(e,a)=>{e.currentSubscription=a.payload}},extraReducers:e=>{e.addCase(s.pending,e=>{e.isLoading=!0,e.error=null}).addCase(s.fulfilled,(e,a)=>{e.isLoading=!1,e.currentSubscription=a.payload}).addCase(s.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.isLoading=!1,e.billingInfo=a.payload,e.currentSubscription=a.payload.subscription}).addCase(n.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(c.pending,e=>{e.isLoading=!0,e.error=null}).addCase(c.fulfilled,(e,a)=>{e.isLoading=!1,e.usage=a.payload}).addCase(c.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(d.pending,e=>{e.isLoading=!0,e.error=null}).addCase(d.fulfilled,e=>{e.isLoading=!1,e.currentSubscription&&(e.currentSubscription.cancelAtPeriodEnd=!0)}).addCase(d.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,e=>{e.isLoading=!1,e.currentSubscription&&(e.currentSubscription.cancelAtPeriodEnd=!1)}).addCase(l.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload})}}),{clearError:u,setSubscription:p}=i.actions,g=i.reducer,y=e=>e.subscription.currentSubscription,m=e=>e.subscription.billingInfo,f=e=>e.subscription.usage,A=e=>e.subscription.isLoading},35695:(e,a,t)=>{var r=t(18999);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},65266:(e,a,t)=>{t.d(a,{n:()=>s});var r=t(90428),o=t(26467);class s{static initiateGoogleLogin(){let e="".concat("https://tradetaper-backend-481634875325.us-central1.run.app","/api/v1/auth/google");console.log("Initiating Google Login, redirecting to:",e),console.log("BACKEND_URL from env:","https://tradetaper-backend-481634875325.us-central1.run.app"),window.location.href=e}static async handleGoogleCallback(e){try{let a=e.get("token"),t=e.get("user"),s=e.get("error");if(console.log("Google callback parameters:",{hasToken:!!a,hasUser:!!t,error:s,allParams:Object.fromEntries(e.entries())}),s)return console.error("OAuth error:",s),!1;if(a&&t){let e=JSON.parse(decodeURIComponent(t));return console.log("Parsed user data:",e),r.M.dispatch((0,o.WH)({token:a,user:e})),localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(e)),window.history.replaceState({},document.title,window.location.pathname),console.log("Google OAuth authentication successful"),!0}return console.log("Missing token or user in callback parameters"),!1}catch(e){return console.error("Error handling Google callback:",e),!1}}}},70392:(e,a,t)=>{t.d(a,{_m:()=>c,Ay:()=>v,BF:()=>l,Tq:()=>n,tW:()=>T,jA:()=>C,G6:()=>h,xB:()=>I,i7:()=>L,Rc:()=>p,RS:()=>d});var r=t(51990),o=t(80722);let s={getAccounts:async()=>(await o.Y0.get("/accounts")).data,getAccount:async e=>(await o.Y0.get("/accounts/".concat(e))).data,createAccount:async e=>(await o.Y0.post("/accounts",e)).data,updateAccount:async(e,a)=>(await o.Y0.put("/accounts/".concat(e),a)).data,async deleteAccount(e){await o.Y0.delete("/accounts/".concat(e))}},n=(0,r.zD)("accounts/fetchAccounts",async()=>await s.getAccounts()),c=(0,r.zD)("accounts/createAccount",async e=>await s.createAccount(e)),d=(0,r.zD)("accounts/updateAccount",async e=>{let{id:a,...t}=e;return await s.updateAccount(a,t)}),l=(0,r.zD)("accounts/deleteAccount",async e=>(await s.deleteAccount(e),e)),i=(0,r.Z0)({name:"accounts",initialState:{accounts:[],selectedAccountId:null,isLoading:!1,error:null},reducers:{setAccounts:(e,a)=>{e.accounts=a.payload,e.selectedAccountId&&!e.accounts.find(a=>a.id===e.selectedAccountId)&&(e.selectedAccountId=null)},setSelectedAccount:(e,a)=>{null===a.payload?e.selectedAccountId=null:e.accounts.find(e=>e.id===a.payload)?e.selectedAccountId=a.payload:console.warn("Attempted to select non-existent account ID: ".concat(a.payload))},addAccount:(e,a)=>{e.accounts.push(a.payload),e.selectedAccountId||(e.selectedAccountId=a.payload.id)},updateAccount:(e,a)=>{let t=e.accounts.findIndex(e=>e.id===a.payload.id);-1!==t?e.accounts[t]={...e.accounts[t],...a.payload}:console.warn("Attempted to update non-existent account ID: ".concat(a.payload.id))},deleteAccount:(e,a)=>{let t=a.payload;e.accounts=e.accounts.filter(e=>e.id!==t),e.selectedAccountId===t&&(e.selectedAccountId=null)},setLoading:(e,a)=>{e.isLoading=a.payload},setError:(e,a)=>{e.error=a.payload}},extraReducers:e=>{e.addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.isLoading=!1,e.accounts=a.payload,e.selectedAccountId&&!a.payload.find(a=>a.id===e.selectedAccountId)&&(e.selectedAccountId=null)}).addCase(n.rejected,(e,a)=>{e.isLoading=!1,e.error=a.error.message||"Failed to fetch accounts"}).addCase(c.pending,e=>{e.isLoading=!0,e.error=null}).addCase(c.fulfilled,(e,a)=>{e.isLoading=!1,e.accounts.push(a.payload),e.selectedAccountId||(e.selectedAccountId=a.payload.id)}).addCase(c.rejected,(e,a)=>{e.isLoading=!1,e.error=a.error.message||"Failed to create account"}).addCase(d.pending,e=>{e.isLoading=!0,e.error=null}).addCase(d.fulfilled,(e,a)=>{e.isLoading=!1;let t=e.accounts.findIndex(e=>e.id===a.payload.id);-1!==t&&(e.accounts[t]=a.payload)}).addCase(d.rejected,(e,a)=>{e.isLoading=!1,e.error=a.error.message||"Failed to update account"}).addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,(e,a)=>{e.isLoading=!1,e.accounts=e.accounts.filter(e=>e.id!==a.payload),e.selectedAccountId===a.payload&&(e.selectedAccountId=null)}).addCase(l.rejected,(e,a)=>{e.isLoading=!1,e.error=a.error.message||"Failed to delete account"})}}),{setAccounts:u,setSelectedAccount:p,addAccount:g,updateAccount:y,deleteAccount:m,setLoading:f,setError:A}=i.actions,h=e=>e.accounts.accounts,L=e=>e.accounts.selectedAccountId,I=e=>{let a=e.accounts.selectedAccountId;return e.accounts.accounts.find(e=>e.id===a)||null},C=e=>e.accounts.isLoading,T=e=>e.accounts.error,v=i.reducer},74229:(e,a,t)=>{t.d(a,{y:()=>s});var r=t(80722);let o="/mt5-accounts",s={getAccounts:async()=>(await r.Y0.get(o)).data,getAccount:async e=>(await r.Y0.get("".concat(o,"/").concat(e))).data,async getServers(){try{return(await r.Y0.get("".concat(o,"/servers"))).data}catch(e){return console.error("Failed to fetch MT5 servers:",e),[{name:"demo.mt5.com",description:"MetaTrader 5 Demo Server"},{name:"icmarkets-demo",description:"IC Markets Demo Server"},{name:"fxpro-mt5demo",description:"FxPro Demo Server"},{name:"pepperstone-demo",description:"Pepperstone Demo Server"},{name:"xm-demo",description:"XM Demo Server"}]}},createAccount:async e=>(await r.Y0.post(o,e)).data,updateAccount:async(e,a)=>(await r.Y0.patch("".concat(o,"/").concat(e),a)).data,async deleteAccount(e){await r.Y0.delete("".concat(o,"/").concat(e))},syncAccount:async e=>(await r.Y0.post("".concat(o,"/").concat(e,"/sync"))).data,importTrades:async(e,a,t)=>(await r.Y0.post("".concat(o,"/").concat(e,"/import-trades"),{fromDate:a.toISOString(),toDate:t.toISOString()})).data,validateConnection:async e=>(await r.Y0.post("".concat(o,"/").concat(e,"/validate"))).data}},80722:(e,a,t)=>{t.d(a,{Y0:()=>n,uE:()=>s,wv:()=>c});var r=t(23464);let o="https://tradetaper-backend-481634875325.us-central1.run.app/api/v1";console.log("\uD83D\uDD27 API Configuration:",{env:"production",apiUrl:o,envVar:"https://tradetaper-backend-481634875325.us-central1.run.app/api/v1",timestamp:new Date().toISOString()});let s=r.A.create({baseURL:o,headers:{"Content-Type":"application/json"}}),n=r.A.create({baseURL:o,headers:{"Content-Type":"application/json"}});function c(e){n.interceptors.request.use(a=>{let t=e().auth.token;return t&&(a.headers.Authorization="Bearer ".concat(t)),console.log("\uD83D\uDE80 Making authenticated API request to:",a.baseURL+a.url),a},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var a,t,r;return console.error("âŒ API Request failed:",{url:null==(a=e.config)?void 0:a.url,baseURL:null==(t=e.config)?void 0:t.baseURL,status:null==(r=e.response)?void 0:r.status,message:e.message}),e.response&&401===e.response.status&&console.log("Unauthorized from interceptor..."),Promise.reject(e)}),console.log("[API.TS] Auth interceptors configured.")}},90428:(e,a,t)=>{t.d(a,{M:()=>i});var r=t(51990),o=t(26467),s=t(23352),n=t(70392),c=t(32194),d=t(96787),l=t(80722);let i=(0,r.U1)({reducer:{auth:o.Ay,trades:s.Ay,accounts:n.Ay,subscription:c.Ay,mt5Accounts:d.Ay}});(0,l.wv)(i.getState)},96787:(e,a,t)=>{t.d(a,{Ay:()=>L,FW:()=>n,S1:()=>c,T$:()=>i,Tq:()=>f,Xg:()=>d,bw:()=>y,ho:()=>A,kI:()=>m,nS:()=>h,t_:()=>l,vh:()=>p});var r=t(51990),o=t(74229),s=t(13568);let n=(0,r.zD)("mt5Accounts/fetchAccounts",async(e,a)=>{let{rejectWithValue:t}=a;try{return await o.y.getAccounts()}catch(e){return t(e.message||"Failed to fetch MT5 accounts")}}),c=(0,r.zD)("mt5Accounts/createAccount",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=await o.y.createAccount(e);return s.Ay.success("MT5 account created successfully"),a}catch(e){return s.Ay.error(e.message||"Failed to create MT5 account"),t(e.message||"Failed to create MT5 account")}}),d=(0,r.zD)("mt5Accounts/updateAccount",async(e,a)=>{let{id:t,data:r}=e,{rejectWithValue:n}=a;try{let e=await o.y.updateAccount(t,r);return s.Ay.success("MT5 account updated successfully"),e}catch(e){return s.Ay.error(e.message||"Failed to update MT5 account"),n(e.message||"Failed to update MT5 account")}}),l=(0,r.zD)("mt5Accounts/deleteAccount",async(e,a)=>{let{rejectWithValue:t}=a;try{return await o.y.deleteAccount(e),s.Ay.success("MT5 account deleted successfully"),e}catch(e){return s.Ay.error(e.message||"Failed to delete MT5 account"),t(e.message||"Failed to delete MT5 account")}}),i=(0,r.zD)("mt5Accounts/syncAccount",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=await o.y.syncAccount(e);return s.Ay.success("MT5 account synced successfully"),a}catch(e){return s.Ay.error(e.message||"Failed to sync MT5 account"),t(e.message||"Failed to sync MT5 account")}}),u=(0,r.Z0)({name:"mt5Accounts",initialState:{accounts:[],selectedAccountId:null,isLoading:!1,error:null},reducers:{setSelectedMT5Account:(e,a)=>{e.selectedAccountId=a.payload},clearMT5Accounts:e=>{e.accounts=[],e.selectedAccountId=null}},extraReducers:e=>{e.addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.isLoading=!1,e.accounts=a.payload,e.error=null}).addCase(n.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(c.pending,e=>{e.isLoading=!0,e.error=null}).addCase(c.fulfilled,(e,a)=>{e.isLoading=!1,e.accounts.push(a.payload),e.selectedAccountId=a.payload.id,e.error=null}).addCase(c.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(d.pending,e=>{e.isLoading=!0,e.error=null}).addCase(d.fulfilled,(e,a)=>{e.isLoading=!1;let t=e.accounts.findIndex(e=>e.id===a.payload.id);-1!==t&&(e.accounts[t]=a.payload),e.error=null}).addCase(d.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,(e,a)=>{e.isLoading=!1,e.accounts=e.accounts.filter(e=>e.id!==a.payload),e.selectedAccountId===a.payload&&(e.selectedAccountId=null),e.error=null}).addCase(l.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.isLoading=!1;let t=e.accounts.findIndex(e=>e.id===a.payload.id);-1!==t&&(e.accounts[t]=a.payload),e.error=null}).addCase(i.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload})}}),{setSelectedMT5Account:p,clearMT5Accounts:g}=u.actions,y=e=>e.mt5Accounts.accounts,m=e=>e.mt5Accounts.selectedAccountId,f=e=>{let a=e.mt5Accounts.selectedAccountId;return a?e.mt5Accounts.accounts.find(e=>e.id===a):null},A=e=>e.mt5Accounts.isLoading,h=e=>e.mt5Accounts.error,L=u.reducer}}]);