(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{18672:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});var a=r(80722);let i={createCheckoutSession:async e=>(await a.Y0.post("/subscriptions/create-checkout-session",e)).data,getCurrentSubscription:async()=>{try{return(await a.Y0.get("/subscriptions/current")).data}catch(t){if(t&&"object"==typeof t&&"response"in t){var e;if((null==(e=t.response)?void 0:e.status)===404)return null}throw t}},getBillingInfo:async()=>(await a.Y0.get("/subscriptions/billing-info")).data,cancelSubscription:async()=>(await a.Y0.post("/subscriptions/cancel")).data,reactivateSubscription:async()=>(await a.Y0.post("/subscriptions/reactivate")).data,updateSubscription:async e=>(await a.Y0.post("/subscriptions/update",{priceId:e})).data,createPortalSession:async e=>(await a.Y0.post("/subscriptions/create-portal-session",{return_url:e})).data,getUsage:async()=>(await a.Y0.get("/subscriptions/usage")).data}},21485:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>y});var a=r(95155),i=r(34540),s=r(12115),n=r(51990),o=r(26467),c=r(23352),l=r(70392),u=r(32194),d=r(96787),p=r(80722);let g=(0,n.U1)({reducer:{auth:o.Ay,trades:c.Ay,accounts:l.Ay,subscription:u.Ay,mt5Accounts:d.Ay}});(0,p.wv)(g.getState);var h=r(95557);function b(e){let{children:t}=e;return(0,s.useEffect)(()=>{g.dispatch((0,o.kS)())},[]),(0,a.jsx)(i.Kq,{store:g,children:t})}function y(e){let{children:t}=e;return(0,a.jsx)(b,{children:(0,a.jsx)(h.BD,{children:t})})}},26467:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>l,Tu:()=>n,WH:()=>s,Wy:()=>i,kS:()=>c,ri:()=>o});let a=(0,r(51990).Z0)({name:"auth",initialState:{user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null},reducers:{authRequest(e){e.isLoading=!0,e.error=null},authSuccess(e,t){e.isLoading=!1,e.isAuthenticated=!0,e.token=t.payload.token,e.user=t.payload.user,e.error=null,localStorage.setItem("token",t.payload.token),localStorage.setItem("user",JSON.stringify(t.payload.user))},authFailure(e,t){e.isLoading=!1,e.isAuthenticated=!1,e.token=null,e.user=null,e.error=t.payload,localStorage.removeItem("token"),localStorage.removeItem("user")},logout(e){e.user=null,e.token=null,e.isAuthenticated=!1,e.isLoading=!1,e.error=null,localStorage.removeItem("token"),localStorage.removeItem("user")},loadUserFromStorage(e){{let t=localStorage.getItem("token"),r=localStorage.getItem("user");if(t&&r)try{let a=JSON.parse(r);e.token=t,e.user=a,e.isAuthenticated=!0}catch(e){console.error("Error parsing user from localStorage",e),localStorage.removeItem("token"),localStorage.removeItem("user")}}}}}),{authRequest:i,authSuccess:s,authFailure:n,logout:o,loadUserFromStorage:c}=a.actions,l=a.reducer},30347:()=>{},32194:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>g,K2:()=>m,M2:()=>c,Ne:()=>s,fT:()=>y,rU:()=>h,wK:()=>n,wW:()=>o,wZ:()=>b,ye:()=>l});var a=r(51990),i=r(18672);let s=(0,a.zD)("subscription/fetchCurrent",async(e,t)=>{let{rejectWithValue:r}=t;try{return await i.x.getCurrentSubscription()}catch(e){return r("Failed to fetch subscription")}}),n=(0,a.zD)("subscription/fetchBillingInfo",async(e,t)=>{let{rejectWithValue:r}=t;try{return await i.x.getBillingInfo()}catch(e){return r("Failed to fetch billing info")}}),o=(0,a.zD)("subscription/fetchUsage",async(e,t)=>{let{rejectWithValue:r}=t;try{return await i.x.getUsage()}catch(e){return r("Failed to fetch usage")}}),c=(0,a.zD)("subscription/cancel",async(e,t)=>{let{rejectWithValue:r}=t;try{return await i.x.cancelSubscription(),!0}catch(e){return r("Failed to cancel subscription")}}),l=(0,a.zD)("subscription/reactivate",async(e,t)=>{let{rejectWithValue:r}=t;try{return await i.x.reactivateSubscription(),!0}catch(e){return r("Failed to reactivate subscription")}}),u=(0,a.Z0)({name:"subscription",initialState:{currentSubscription:null,billingInfo:null,usage:null,isLoading:!1,error:null},reducers:{clearError:e=>{e.error=null},setSubscription:(e,t)=>{e.currentSubscription=t.payload}},extraReducers:e=>{e.addCase(s.pending,e=>{e.isLoading=!0,e.error=null}).addCase(s.fulfilled,(e,t)=>{e.isLoading=!1,e.currentSubscription=t.payload}).addCase(s.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{e.isLoading=!1,e.billingInfo=t.payload,e.currentSubscription=t.payload.subscription}).addCase(n.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(o.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.isLoading=!1,e.usage=t.payload}).addCase(o.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(c.pending,e=>{e.isLoading=!0,e.error=null}).addCase(c.fulfilled,e=>{e.isLoading=!1,e.currentSubscription&&(e.currentSubscription.cancelAtPeriodEnd=!0)}).addCase(c.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,e=>{e.isLoading=!1,e.currentSubscription&&(e.currentSubscription.cancelAtPeriodEnd=!1)}).addCase(l.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}}),{clearError:d,setSubscription:p}=u.actions,g=u.reducer,h=e=>e.subscription.currentSubscription,b=e=>e.subscription.billingInfo,y=e=>e.subscription.usage,m=e=>e.subscription.isLoading},37049:(e,t,r)=>{"use strict";r.d(t,{D:()=>o,ThemeProvider:()=>n});var a=r(95155),i=r(12115);let s=(0,i.createContext)(void 0),n=e=>{let{children:t}=e,[r,n]=(0,i.useState)("dark");return(0,i.useEffect)(()=>{let e=localStorage.getItem("tradetaper-theme");e?n(e):n(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[]),(0,i.useEffect)(()=>{"dark"===r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("tradetaper-theme",r)},[r]),(0,a.jsx)(s.Provider,{value:{theme:r,setTheme:e=>{n(e)},toggleTheme:()=>{n(e=>"light"===e?"dark":"light")}},children:t})},o=()=>{let e=(0,i.useContext)(s);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},71761:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,30347,23)),Promise.resolve().then(r.bind(r,21485)),Promise.resolve().then(r.bind(r,37049))}},e=>{var t=t=>e(e.s=t);e.O(0,[7690,3464,4540,1990,3568,8857,8441,1684,7358],()=>t(71761)),_N_E=e.O()}]);