(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5083],{3169:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var r=a(95155),s=a(12115),d=a(34540),n=a(23352),l=a(70392),o=a(98794),i=a(23068),c=a(32620),u=a(56051),g=a(29911);function x(){let e=(0,d.wA)(),{trades:t,isLoading:a,error:x}=(0,d.d4)(e=>e.trades),{isAuthenticated:m}=(0,d.d4)(e=>e.auth),p=(0,d.d4)(l.i7),[y,h]=(0,s.useState)("desc"),[f,b]=(0,s.useState)("all");(0,s.useEffect)(()=>{m&&e((0,n.Cm)(p||void 0))},[e,m,p]);let v=(0,s.useMemo)(()=>{if(!t||0===t.length)return[];let e=p?t.filter(e=>e.accountId===p):t,a={};return e.forEach(e=>{if(e.entryDate)try{let t=(0,o.H)(e.entryDate);if((0,i.f)(t)){let r=(0,c.GP)(t,"yyyy-MM-dd");a[r]||(a[r]=[]),a[r].push(e)}}catch(t){console.warn("Invalid date format:",e.entryDate)}}),Object.entries(a).map(e=>{let[t,a]=e,r=a.filter(e=>e.status===u.d1.CLOSED),s=a.filter(e=>e.direction===u.w_.LONG),d=a.filter(e=>e.direction===u.w_.SHORT),n=r.filter(e=>(e.profitOrLoss||0)>0),l=r.reduce((e,t)=>e+(t.profitOrLoss||0),0),o=a.reduce((e,t)=>e+(t.commission||0),0),i=r.length>0?n.length/r.length*100:0;return{date:t,totalNetPnl:l,totalTrades:a.length,openTrades:a.filter(e=>e.status===u.d1.OPEN).length,closedTrades:r.length,winningTrades:n.length,losingTrades:r.length-n.length,longTrades:s.length,shortTrades:d.length,totalCommissions:o,winRate:i,trades:a}})},[t,p]),N=(0,s.useMemo)(()=>[...v].sort((e,t)=>"desc"===y?t.date.localeCompare(e.date):e.date.localeCompare(t.date)),[v,y]),j=e=>{try{let t=(0,o.H)(e);return(0,c.GP)(t,"EEE, MMM dd yyyy")}catch(t){return e}},k=e=>{let t=e.trades.reduce((e,t)=>t.entryPrice&&t.quantity?e+Math.abs(t.entryPrice*t.quantity):e,0);return 0===t?0:e.totalNetPnl/t*100};return a?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Loading daily stats..."})]})}):x?(0,r.jsx)("div",{className:"text-center py-16 bg-red-50 dark:bg-red-900/20 rounded-2xl border border-red-200 dark:border-red-800",children:(0,r.jsxs)("p",{className:"text-red-600 dark:text-red-400",children:["Error loading daily stats: ",x]})}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:"Daily Statistics"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Track your daily trading performance and patterns"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("button",{className:"p-3 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-green-500 dark:hover:bg-green-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105",children:(0,r.jsx)(g.WCW,{className:"w-4 h-4"})}),(0,r.jsx)("button",{className:"p-3 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-purple-500 dark:hover:bg-purple-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105",children:(0,r.jsx)(g.YsJ,{className:"w-4 h-4"})}),(0,r.jsx)("button",{className:"p-3 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-orange-500 dark:hover:bg-orange-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105",children:(0,r.jsx)(g.Pcn,{className:"w-4 h-4"})})]})]}),(0,r.jsx)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-green-500/20 rounded-xl",children:(0,r.jsx)(g.gvq,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Filter & Sort"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customize your view"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"appearance-none bg-white/50 dark:bg-gray-800/50 border border-gray-200/50 dark:border-gray-700/50 rounded-xl px-4 py-2.5 pr-10 text-sm font-medium text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 backdrop-blur-sm hover:bg-white/70 dark:hover:bg-gray-800/70",children:[(0,r.jsx)("option",{value:"all",children:"All Time"}),(0,r.jsx)("option",{value:"7days",children:"Last 7 days"}),(0,r.jsx)("option",{value:"30days",children:"Last 30 days"}),(0,r.jsx)("option",{value:"90days",children:"Last 90 days"})]}),(0,r.jsx)(g.Vr3,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400 pointer-events-none"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:"asc"===y?"time_asc":"time_desc",onChange:e=>h("time_asc"===e.target.value?"asc":"desc"),className:"appearance-none bg-white/50 dark:bg-gray-800/50 border border-gray-200/50 dark:border-gray-700/50 rounded-xl px-4 py-2.5 pr-10 text-sm font-medium text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 backdrop-blur-sm hover:bg-white/70 dark:hover:bg-gray-800/70",children:[(0,r.jsx)("option",{value:"time_desc",children:"Newest First"}),(0,r.jsx)("option",{value:"time_asc",children:"Oldest First"})]}),(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:"desc"===y?(0,r.jsx)(g.EDF,{className:"h-3 w-3 text-gray-400"}):(0,r.jsx)(g.HL0,{className:"h-3 w-3 text-gray-400"})})]})]})]})}),0===N.length?(0,r.jsx)("div",{className:"text-center py-16 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center mx-auto",children:(0,r.jsx)(g.gvq,{className:"w-10 h-10 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No trading data available"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Start trading to see your daily statistics here."})]})]})}):(0,r.jsx)("div",{className:"space-y-6",children:N.map(e=>{let t=k(e),a=e.totalNetPnl>0,s=e.totalNetPnl<0,d=e.totalTrades>0?Math.round(e.longTrades/e.totalTrades*100):0,n=e.totalTrades>0?Math.round(e.shortTrades/e.totalTrades*100):0;return(0,r.jsxs)("div",{className:"group bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-green-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-green-500/20 rounded-xl",children:(0,r.jsx)(g.gvq,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j(e.date)}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.totalTrades," trade",1!==e.totalTrades?"s":""," executed"]})]})]}),(0,r.jsxs)("div",{className:"px-4 py-2 rounded-xl font-semibold text-lg ".concat(a?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":s?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":"bg-gray-100 dark:bg-gray-800/50 text-gray-700 dark:text-gray-400"),children:[a?"+":"","$",e.totalNetPnl.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),Math.abs(t)>.01&&(0,r.jsxs)("span",{className:"ml-2 text-sm opacity-80",children:["(",a?"+":"",t.toFixed(2),"%)"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50/80 dark:bg-gray-800/50 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[(0,r.jsx)(g.yk7,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Trades"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.totalTrades}),(0,r.jsxs)("div",{className:"flex space-x-1",children:[e.winningTrades>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-1 bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded-lg",children:[(0,r.jsx)(g.UCm,{className:"h-3 w-3 text-green-600 dark:text-green-400"}),(0,r.jsx)("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:e.winningTrades})]}),e.losingTrades>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-1 bg-red-100 dark:bg-red-900/30 px-2 py-1 rounded-lg",children:[(0,r.jsx)(g.z44,{className:"h-3 w-3 text-red-600 dark:text-red-400"}),(0,r.jsx)("span",{className:"text-xs font-medium text-red-600 dark:text-red-400",children:e.losingTrades})]})]})]})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50/80 dark:bg-gray-800/50 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[(0,r.jsx)(g.gdQ,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Win Rate"})]}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e.winRate.toFixed(1),"%"]})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50/80 dark:bg-gray-800/50 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[(0,r.jsx)(g.uCC,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Long/Short"})]}),(0,r.jsxs)("div",{className:"text-lg font-semibold",children:[(0,r.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:[d,"%"]}),(0,r.jsx)("span",{className:"mx-1 text-gray-400",children:":"}),(0,r.jsxs)("span",{className:"text-orange-600 dark:text-orange-400",children:[n,"%"]})]})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50/80 dark:bg-gray-800/50 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[(0,r.jsx)(g.Tsk,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Fees"})]}),(0,r.jsxs)("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",Math.abs(e.totalCommissions).toFixed(2)]})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50/80 dark:bg-gray-800/50 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[(0,r.jsx)(g.YYR,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Status"})]}),(0,r.jsx)("div",{className:"flex items-center justify-center",children:a?(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-green-600 dark:text-green-400",children:[(0,r.jsx)(g.uCC,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Profitable"})]}):s?(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-red-600 dark:text-red-400",children:[(0,r.jsx)(g.$TP,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Loss"})]}):(0,r.jsx)("div",{className:"flex items-center space-x-1 text-gray-600 dark:text-gray-400",children:(0,r.jsx)("span",{className:"text-sm font-medium",children:"Breakeven"})})})]})]})]})]},e.date)})})]})}},23352:(e,t,a)=>{"use strict";a.d(t,{$L:()=>c,Ay:()=>w,Cm:()=>o,Gz:()=>u,IJ:()=>T,P:()=>j,PE:()=>i,YY:()=>y,cV:()=>b,dq:()=>k,kQ:()=>N,s5:()=>g,tJ:()=>v});var r=a(51990),s=a(80722);let d={trades:[],isLoading:!1,error:null,currentTrade:null,filters:{},analyticsFilters:{analyticsDateFrom:"",analyticsDateTo:""},total:0,page:1,limit:10};function n(e){return{id:e.id,userId:e.userId,assetType:e.assetType,symbol:e.symbol,direction:e.side,status:e.status,entryDate:e.openTime,entryPrice:parseFloat(e.openPrice),exitDate:e.closeTime,exitPrice:e.closePrice?parseFloat(e.closePrice):void 0,quantity:parseFloat(e.quantity),stopLoss:e.stopLoss?parseFloat(e.stopLoss):void 0,takeProfit:e.takeProfit?parseFloat(e.takeProfit):void 0,commission:e.commission?parseFloat(e.commission):void 0,notes:e.notes,profitOrLoss:e.profitOrLoss?parseFloat(e.profitOrLoss):void 0,rMultiple:e.rMultiple?parseFloat(e.rMultiple):void 0,ictConcept:e.ictConcept,session:e.session,setupDetails:e.setupDetails,mistakesMade:e.mistakesMade,lessonsLearned:e.lessonsLearned,imageUrl:e.imageUrl,tags:e.tags||[],createdAt:e.createdAt,updatedAt:e.updatedAt,accountId:e.accountId,isStarred:e.isStarred||!1}}function l(e){let t=e=>{if(e)try{if(e.includes("T")&&(e.includes("Z")||e.includes("+")||e.includes("-")))return e;return new Date(e).toISOString()}catch(t){console.error("Error formatting date for API:",e,t);return}};return{assetType:e.assetType,symbol:e.symbol,side:e.direction,status:e.status,openTime:t(e.entryDate),openPrice:e.entryPrice,closeTime:t(e.exitDate),closePrice:e.exitPrice,quantity:e.quantity,stopLoss:e.stopLoss,takeProfit:e.takeProfit,commission:e.commission,notes:e.notes,ictConcept:e.ictConcept,session:e.session,setupDetails:e.setupDetails,mistakesMade:e.mistakesMade,lessonsLearned:e.lessonsLearned,imageUrl:e.imageUrl,tagNames:e.tagNames,accountId:e.accountId,isStarred:e.isStarred}}let o=(0,r.zD)("trades/fetchTrades",async(e,t)=>{let{accountId:a,page:r=1,limit:d=10}=e,{rejectWithValue:l}=t;try{let e="/trades?page=".concat(r,"&limit=").concat(d);a&&(e+="&accountId=".concat(a));let t=await s.Y0.get(e);console.log("Raw fetchTrades from API (accountId: ".concat(a||"all","):"),t.data);let l=t.data.data.map(n);return console.log("Transformed trades for frontend:",l),{data:l,total:t.data.total,page:t.data.page,limit:t.data.limit}}catch(e){var o,i;return l((null==(i=e.response)||null==(o=i.data)?void 0:o.message)||e.message||"Failed to fetch trades")}}),i=(0,r.zD)("trades/fetchTradeById",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=await s.Y0.get("/trades/".concat(e));console.log("Raw fetchTradeById from API:",t.data);let a=n(t.data);return console.log("Transformed trade for frontend:",a),a}catch(e){var r,d;return a((null==(d=e.response)||null==(r=d.data)?void 0:r.message)||e.message||"Failed to fetch trade")}}),c=(0,r.zD)("trades/createTrade",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=l(e);console.log("Frontend payload:",e),console.log("Transformed API payload:",t);let a=await s.Y0.post("/trades",t);console.log("Raw createTrade from API:",a.data);let r=n(a.data);return console.log("Transformed created trade for frontend:",r),r}catch(e){var r,d;return a((null==(d=e.response)||null==(r=d.data)?void 0:r.message)||e.message||"Failed to create trade")}}),u=(0,r.zD)("trades/updateTrade",async(e,t)=>{let{id:a,payload:r}=e,{rejectWithValue:d}=t;try{let e=l(r);console.log("Frontend updateTrade payload:",r),console.log("Transformed updateTrade API payload:",e);let t=await s.Y0.patch("/trades/".concat(a),e);console.log("Raw updateTrade from API:",t.data);let d=n(t.data);return console.log("Transformed updated trade for frontend:",d),d}catch(e){var o,i;return d((null==(i=e.response)||null==(o=i.data)?void 0:o.message)||e.message||"Failed to update trade")}}),g=(0,r.zD)("trades/deleteTrade",async(e,t)=>{let{rejectWithValue:a}=t;try{return await s.Y0.delete("/trades/".concat(e)),e}catch(e){var r,d;return a((null==(d=e.response)||null==(r=d.data)?void 0:r.message)||e.message||"Failed to delete trade")}}),x=(0,r.zD)("trades/analyzeChart",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=new FormData;return t.append("file",e),(await s.Y0.post("/trades/analyze-chart",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){var r,d;return a((null==(d=e.response)||null==(r=d.data)?void 0:r.message)||e.message||"Failed to analyze chart")}}),m=(0,r.Z0)({name:"trades",initialState:d,reducers:{clearTradesError(e){e.error=null},setCurrentTrade(e,t){e.currentTrade=t.payload},setTradeFilters(e,t){e.filters={...e.filters,...t.payload}},resetTradeFilters(e){e.filters=d.filters},setAnalyticsDateFilters(e,t){e.analyticsFilters={...e.analyticsFilters,...t.payload}},resetAnalyticsDateFilters(e){e.analyticsFilters=d.analyticsFilters},addTrade(e,t){-1===e.trades.findIndex(e=>e.id===t.payload.id)&&e.trades.unshift(t.payload)},updateTradeRealtime(e,t){var a;let r=e.trades.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.trades[r]=t.payload),(null==(a=e.currentTrade)?void 0:a.id)===t.payload.id&&(e.currentTrade=t.payload)},removeTrade(e,t){var a;e.trades=e.trades.filter(e=>e.id!==t.payload),(null==(a=e.currentTrade)?void 0:a.id)===t.payload&&(e.currentTrade=null)},setTrades(e,t){e.trades=t.payload}},extraReducers:e=>{e.addCase(o.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.isLoading=!1,e.trades=t.payload.data,e.total=t.payload.total,e.page=t.payload.page,e.limit=t.payload.limit}).addCase(o.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.isLoading=!1,e.currentTrade=t.payload}).addCase(i.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(c.pending,e=>{e.isLoading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{e.isLoading=!1,e.trades.unshift(t.payload)}).addCase(c.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(u.pending,e=>{e.isLoading=!0,e.error=null}).addCase(u.fulfilled,(e,t)=>{var a;e.isLoading=!1;let r=e.trades.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.trades[r]=t.payload),(null==(a=e.currentTrade)?void 0:a.id)===t.payload.id&&(e.currentTrade=t.payload)}).addCase(u.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(g.pending,e=>{e.isLoading=!0,e.error=null}).addCase(g.fulfilled,(e,t)=>{var a;e.isLoading=!1,e.trades=e.trades.filter(e=>e.id!==t.payload),(null==(a=e.currentTrade)?void 0:a.id)===t.payload&&(e.currentTrade=null)}).addCase(g.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(x.pending,e=>{e.isLoading=!0,e.error=null}).addCase(x.fulfilled,(e,t)=>{e.isLoading=!1,console.log("Chart analysis successful:",t.payload)}).addCase(x.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}}),{clearTradesError:p,setCurrentTrade:y,setTradeFilters:h,resetTradeFilters:f,setAnalyticsDateFilters:b,resetAnalyticsDateFilters:v,addTrade:N,updateTradeRealtime:j,removeTrade:k,setTrades:T}=m.actions,w=m.reducer},30369:(e,t,a)=>{Promise.resolve().then(a.bind(a,3169))},56051:(e,t,a)=>{"use strict";a.d(t,{PW:()=>r,d1:()=>d,w_:()=>s});var r=function(e){return e.STOCK="Stock",e.CRYPTO="Crypto",e.FOREX="Forex",e.COMMODITIES="Commodities",e.FUTURES="Futures",e.OPTIONS="Options",e}({}),s=function(e){return e.LONG="Long",e.SHORT="Short",e}({}),d=function(e){return e.OPEN="Open",e.CLOSED="Closed",e.PENDING="Pending",e.CANCELLED="Cancelled",e}({})},70392:(e,t,a)=>{"use strict";a.d(t,{_m:()=>l,Ay:()=>k,BF:()=>i,Tq:()=>n,tW:()=>j,jA:()=>N,G6:()=>f,xB:()=>v,i7:()=>b,Rc:()=>g,RS:()=>o});var r=a(51990),s=a(80722);let d={getAccounts:async()=>(await s.Y0.get("/accounts")).data,getAccount:async e=>(await s.Y0.get("/accounts/".concat(e))).data,createAccount:async e=>(await s.Y0.post("/accounts",e)).data,updateAccount:async(e,t)=>(await s.Y0.put("/accounts/".concat(e),t)).data,async deleteAccount(e){await s.Y0.delete("/accounts/".concat(e))}},n=(0,r.zD)("accounts/fetchAccounts",async()=>await d.getAccounts()),l=(0,r.zD)("accounts/createAccount",async e=>await d.createAccount(e)),o=(0,r.zD)("accounts/updateAccount",async e=>{let{id:t,...a}=e;return await d.updateAccount(t,a)}),i=(0,r.zD)("accounts/deleteAccount",async e=>(await d.deleteAccount(e),e)),c=(0,r.Z0)({name:"accounts",initialState:{accounts:[],selectedAccountId:null,isLoading:!1,error:null},reducers:{setAccounts:(e,t)=>{e.accounts=t.payload,e.selectedAccountId&&!e.accounts.find(t=>t.id===e.selectedAccountId)&&(e.selectedAccountId=null)},setSelectedAccount:(e,t)=>{null===t.payload?e.selectedAccountId=null:e.accounts.find(e=>e.id===t.payload)?e.selectedAccountId=t.payload:console.warn("Attempted to select non-existent account ID: ".concat(t.payload))},addAccount:(e,t)=>{e.accounts.push(t.payload),e.selectedAccountId||(e.selectedAccountId=t.payload.id)},updateAccount:(e,t)=>{let a=e.accounts.findIndex(e=>e.id===t.payload.id);-1!==a?e.accounts[a]={...e.accounts[a],...t.payload}:console.warn("Attempted to update non-existent account ID: ".concat(t.payload.id))},deleteAccount:(e,t)=>{let a=t.payload;e.accounts=e.accounts.filter(e=>e.id!==a),e.selectedAccountId===a&&(e.selectedAccountId=null)},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload}},extraReducers:e=>{e.addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{e.isLoading=!1,e.accounts=t.payload,e.selectedAccountId&&!t.payload.find(t=>t.id===e.selectedAccountId)&&(e.selectedAccountId=null)}).addCase(n.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to fetch accounts"}).addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.isLoading=!1,e.accounts.push(t.payload),e.selectedAccountId||(e.selectedAccountId=t.payload.id)}).addCase(l.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to create account"}).addCase(o.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.isLoading=!1;let a=e.accounts.findIndex(e=>e.id===t.payload.id);-1!==a&&(e.accounts[a]=t.payload)}).addCase(o.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to update account"}).addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.isLoading=!1,e.accounts=e.accounts.filter(e=>e.id!==t.payload),e.selectedAccountId===t.payload&&(e.selectedAccountId=null)}).addCase(i.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to delete account"})}}),{setAccounts:u,setSelectedAccount:g,addAccount:x,updateAccount:m,deleteAccount:p,setLoading:y,setError:h}=c.actions,f=e=>e.accounts.accounts,b=e=>e.accounts.selectedAccountId,v=e=>{let t=e.accounts.selectedAccountId;return e.accounts.accounts.find(e=>e.id===t)||null},N=e=>e.accounts.isLoading,j=e=>e.accounts.error,k=c.reducer},80722:(e,t,a)=>{"use strict";a.d(t,{Y0:()=>n,uE:()=>d,wv:()=>l});var r=a(23464);let s="https://tradetaper-backend-481634875325.us-central1.run.app/api/v1";console.log("\uD83D\uDD27 API Configuration:",{env:"production",apiUrl:s,envVar:"https://tradetaper-backend-481634875325.us-central1.run.app/api/v1",timestamp:new Date().toISOString()});let d=r.A.create({baseURL:s,headers:{"Content-Type":"application/json"}}),n=r.A.create({baseURL:s,headers:{"Content-Type":"application/json"}});function l(e){n.interceptors.request.use(t=>{let a=e().auth.token;return a&&(t.headers.Authorization="Bearer ".concat(a)),console.log("\uD83D\uDE80 Making authenticated API request to:",t.baseURL+t.url),t},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t,a,r;return console.error("âŒ API Request failed:",{url:null==(t=e.config)?void 0:t.url,baseURL:null==(a=e.config)?void 0:a.baseURL,status:null==(r=e.response)?void 0:r.status,message:e.message}),e.response&&401===e.response.status&&console.log("Unauthorized from interceptor..."),Promise.reject(e)}),console.log("[API.TS] Auth interceptors configured.")}},98794:(e,t,a)=>{"use strict";a.d(t,{H:()=>n});var r=a(25703),s=a(7239),d=a(89447);function n(e,t){var a;let n,p,y=()=>(0,s.w)(null==t?void 0:t.in,NaN),h=null!=(a=null==t?void 0:t.additionalDigits)?a:2,f=function(e){let t,a={},r=e.split(l.dateTimeDelimiter);if(r.length>2)return a;if(/:/.test(r[0])?t=r[0]:(a.date=r[0],t=r[1],l.timeZoneDelimiter.test(a.date)&&(a.date=e.split(l.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){let e=l.timezone.exec(t);e?(a.time=t.replace(e[1],""),a.timezone=e[1]):a.time=t}return a}(e);if(f.date){let e=function(e,t){let a=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(a);if(!r)return{year:NaN,restDateString:""};let s=r[1]?parseInt(r[1]):null,d=r[2]?parseInt(r[2]):null;return{year:null===d?s:100*d,restDateString:e.slice((r[1]||r[2]).length)}}(f.date,h);n=function(e,t){var a,r,s,d,n,l,i,c;if(null===t)return new Date(NaN);let g=e.match(o);if(!g)return new Date(NaN);let p=!!g[4],y=u(g[1]),h=u(g[2])-1,f=u(g[3]),b=u(g[4]),v=u(g[5])-1;if(p){return(a=0,r=b,s=v,r>=1&&r<=53&&s>=0&&s<=6)?function(e,t,a){let r=new Date(0);r.setUTCFullYear(e,0,4);let s=r.getUTCDay()||7;return r.setUTCDate(r.getUTCDate()+((t-1)*7+a+1-s)),r}(t,b,v):new Date(NaN)}{let e=new Date(0);return(d=t,n=h,l=f,n>=0&&n<=11&&l>=1&&l<=(x[n]||(m(d)?29:28))&&(i=t,(c=y)>=1&&c<=(m(i)?366:365)))?(e.setUTCFullYear(t,h,Math.max(y,f)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!n||isNaN(+n))return y();let b=+n,v=0;if(f.time&&isNaN(v=function(e){var t,a,s;let d=e.match(i);if(!d)return NaN;let n=g(d[1]),l=g(d[2]),o=g(d[3]);return(t=n,a=l,s=o,24===t?0===a&&0===s:s>=0&&s<60&&a>=0&&a<60&&t>=0&&t<25)?n*r.s0+l*r.Cg+1e3*o:NaN}(f.time)))return y();if(f.timezone){if(isNaN(p=function(e){var t,a;if("Z"===e)return 0;let s=e.match(c);if(!s)return 0;let d="+"===s[1]?-1:1,n=parseInt(s[2]),l=s[3]&&parseInt(s[3])||0;return(t=0,(a=l)>=0&&a<=59)?d*(n*r.s0+l*r.Cg):NaN}(f.timezone)))return y()}else{let e=new Date(b+v),a=(0,d.a)(0,null==t?void 0:t.in);return a.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),a.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),a}return(0,d.a)(b+v+p,null==t?void 0:t.in)}let l={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},o=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,i=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,c=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e){return e?parseInt(e):1}function g(e){return e&&parseFloat(e.replace(",","."))||0}let x=[31,null,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100!=0}}},e=>{var t=t=>e(e.s=t);e.O(0,[6711,3464,1990,4540,1005,8441,1684,7358],()=>t(30369)),_N_E=e.O()}]);