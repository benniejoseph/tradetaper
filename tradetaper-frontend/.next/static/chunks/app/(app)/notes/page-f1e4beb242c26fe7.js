(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7405],{32348:(e,t,a)=>{"use strict";a.d(t,{d:()=>s});var r=a(12115);function s(e,t){let[a,s]=(0,r.useState)(e);return(0,r.useEffect)(()=>{let a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}},35695:(e,t,a)=>{"use strict";var r=a(18999);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},37827:(e,t,a)=>{Promise.resolve().then(a.bind(a,89025))},63014:(e,t,a)=>{"use strict";a.d(t,{j:()=>s});var r=a(80722);class s{static async createNote(e){return(await r.Y0.post("/notes",e)).data}static async getNotes(){var e,t,a;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new URLSearchParams;Object.entries(s).forEach(e=>{let[t,a]=e;null!=a&&(Array.isArray(a)?a.forEach(e=>n.append(t,e.toString())):n.append(t,a.toString()))});let o="/notes?".concat(n.toString());console.log("\uD83D\uDD0D NotesService.getNotes Debug:",{params:s,searchParams:n.toString(),fullUrl:o,timestamp:new Date().toISOString()});let i=await r.Y0.get(o);return console.log("\uD83D\uDCE5 NotesService.getNotes Response:",{status:i.status,dataType:typeof i.data,notesCount:(null==(t=i.data)||null==(e=t.notes)?void 0:e.length)||0,total:(null==(a=i.data)?void 0:a.total)||0,url:o}),i.data}static async getNote(e){return(await r.Y0.get("/notes/".concat(e))).data}static async updateNote(e,t){return(await r.Y0.patch("/notes/".concat(e),t)).data}static async deleteNote(e){await r.Y0.delete("/notes/".concat(e))}static async togglePin(e){return(await r.Y0.patch("/notes/".concat(e,"/toggle-pin"))).data}static async getStats(){return(await r.Y0.get("/notes/stats")).data}static async getTags(){return(await r.Y0.get("/notes/tags")).data}static async getCalendarNotes(e,t){return(await r.Y0.get("/notes/calendar/".concat(e,"/").concat(t))).data}static async uploadMedia(e,t){let a=new FormData;return a.append("file",e),t&&a.append("noteId",t),(await r.Y0.post("/notes/media/upload",a,{headers:{"Content-Type":"multipart/form-data"}})).data}static async speechToText(e){let t=new FormData;return t.append("audio",e,"recording.webm"),(await r.Y0.post("/notes/speech-to-text",t,{headers:{"Content-Type":"multipart/form-data"}})).data}static async searchNotes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getNotes({...t,search:e})}static async getRecentNotes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return(await this.getNotes({sortBy:"updatedAt",sortOrder:"DESC",limit:e})).notes}static async getPinnedNotes(){return(await this.getNotes({pinnedOnly:!0,sortBy:"updatedAt",sortOrder:"DESC"})).notes}static async getNotesWithMedia(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this.getNotes({hasMedia:!0,sortBy:"updatedAt",sortOrder:"DESC",limit:e})}static async getNotesByTag(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return this.getNotes({tags:[e],sortBy:"updatedAt",sortOrder:"DESC",limit:t})}static async getNotesByAccount(e){return this.getNotes({accountId:e,sortBy:"updatedAt",sortOrder:"DESC"})}static async getNotesByTrade(e){return this.getNotes({tradeId:e,sortBy:"createdAt",sortOrder:"ASC"})}static async exportNotes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URLSearchParams;return Object.entries(t).forEach(e=>{let[t,r]=e;null!=r&&(Array.isArray(r)?r.forEach(e=>a.append(t,e.toString())):a.append(t,r.toString()))}),a.append("format",e),(await r.Y0.get("/notes/export?".concat(a.toString()),{responseType:"blob"})).data}static async duplicateNote(e){return(await r.Y0.post("/notes/".concat(e,"/duplicate"))).data}static async getTemplates(){return(await r.Y0.get("/notes/templates")).data}static async createFromTemplate(e,t){return(await r.Y0.post("/notes/templates/".concat(e,"/create"),{title:t})).data}static async getNotesForDate(e){return(await r.Y0.get("/notes/calendar/date/".concat(e))).data}static async getCalendarStats(e,t){return(await r.Y0.get("/notes/calendar/".concat(e,"/").concat(t,"/stats"))).data}static async getMediaUrl(e){return(await r.Y0.get("/notes/media/".concat(e,"/url"))).data.url}static async deleteMedia(e){await r.Y0.delete("/notes/media/".concat(e))}static async generateEmbedData(e){return(await r.Y0.post("/notes/media/embed",{url:e})).data}static async enhanceText(e,t){return(await r.Y0.post("/notes/ai/enhance-text",{text:e,task:t})).data}static async generateNoteSuggestions(e){return(await r.Y0.post("/notes/ai/generate-suggestions",{content:e})).data}static async exportNote(e,t){return(await r.Y0.get("/notes/".concat(e,"/export/").concat(t),{responseType:"blob"})).data}static async bulkDelete(e){await r.Y0.post("/notes/bulk/delete",{noteIds:e})}static async bulkUpdateTags(e,t){await r.Y0.post("/notes/bulk/tags",{noteIds:e,tags:t})}static async bulkUpdateVisibility(e,t){await r.Y0.post("/notes/bulk/visibility",{noteIds:e,visibility:t})}}},80722:(e,t,a)=>{"use strict";a.d(t,{Y0:()=>o,uE:()=>n,wv:()=>i});var r=a(23464);let s="https://tradetaper-backend-481634875325.us-central1.run.app/api/v1";console.log("\uD83D\uDD27 API Configuration:",{env:"production",apiUrl:s,envVar:"https://tradetaper-backend-481634875325.us-central1.run.app/api/v1",timestamp:new Date().toISOString()});let n=r.A.create({baseURL:s,headers:{"Content-Type":"application/json"}}),o=r.A.create({baseURL:s,headers:{"Content-Type":"application/json"}});function i(e){o.interceptors.request.use(t=>{let a=e().auth.token;return a&&(t.headers.Authorization="Bearer ".concat(a)),console.log("\uD83D\uDE80 Making authenticated API request to:",t.baseURL+t.url),t},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>{var t,a,r;return console.error("❌ API Request failed:",{url:null==(t=e.config)?void 0:t.url,baseURL:null==(a=e.config)?void 0:a.baseURL,status:null==(r=e.response)?void 0:r.status,message:e.message}),e.response&&401===e.response.status&&console.log("Unauthorized from interceptor..."),Promise.reject(e)}),console.log("[API.TS] Auth interceptors configured.")}},89025:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r=a(95155),s=a(12115),n=a(29911),o=a(35695),i=a(32348),l=a(32620),c=a(98794),d=a(63014),u=a(60760),g=a(49533),h=a(31246),m=a(52436),x=a(13568);let p=e=>{let{onTranscriptionComplete:t,onClose:a,isOpen:o}=e;console.log("\uD83C\uDFA4 VoiceRecorder rendered with props:",{isOpen:o,onTranscriptionComplete:!!t,onClose:!!a});let[i,l]=(0,s.useState)(!1),[c,p]=(0,s.useState)(!1),[y,b]=(0,s.useState)([]),[f,N]=(0,s.useState)(null),[j,w]=(0,s.useState)(null),[v,k]=(0,s.useState)(0),[C,S]=(0,s.useState)(0),[T,D]=(0,s.useState)(null),A=(0,s.useRef)(null),E=(0,s.useRef)(null),P=(0,s.useRef)(null),M=(0,s.useRef)(null),R=(0,s.useRef)(),U=(0,s.useRef)();(0,s.useEffect)(()=>(F(),()=>{Y()}),[]),(0,s.useEffect)(()=>(i&&!c?U.current=setInterval(()=>{k(e=>e+1)},1e3):U.current&&clearInterval(U.current),()=>{U.current&&clearInterval(U.current)}),[i,c]);let Y=()=>{E.current&&E.current.getTracks().forEach(e=>e.stop()),P.current&&P.current.close(),R.current&&cancelAnimationFrame(R.current),U.current&&clearInterval(U.current)},F=async()=>{try{let e=await navigator.permissions.query({name:"microphone"});D("granted"===e.state),e.addEventListener("change",()=>{D("granted"===e.state)})}catch(e){console.error("Error checking microphone permission:",e),D(!1)}},O=async()=>{try{console.log("\uD83C\uDFA4 Requesting microphone permission...");let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});console.log("✅ Microphone permission granted!"),D(!0),e.getTracks().forEach(e=>e.stop()),x.Ay.success("Microphone access granted! You can now start recording.")}catch(e){console.error("❌ Error requesting microphone permission:",e),D(!1),(null==e?void 0:e.name)==="NotAllowedError"?x.Ay.error("Microphone access denied. Please allow microphone access in your browser settings."):(null==e?void 0:e.name)==="NotFoundError"?x.Ay.error("No microphone found. Please connect a microphone and try again."):x.Ay.error("Failed to access microphone. Please check your browser settings.")}},I=async e=>{try{let t=new AudioContext,a=t.createAnalyser(),r=t.createMediaStreamSource(e);a.fftSize=256,r.connect(a),P.current=t,M.current=a;let s=()=>{if(M.current){let e=new Uint8Array(M.current.frequencyBinCount);M.current.getByteFrequencyData(e);let t=e.reduce((e,t)=>e+t,0)/e.length;S(t/255)}i&&(R.current=requestAnimationFrame(s))};s()}catch(e){console.error("Error setting up audio context:",e)}},L=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});E.current=e,await I(e);let t=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"}),a=[];t.ondataavailable=e=>{e.data.size>0&&a.push(e.data)},t.onstop=()=>{let e=new Blob(a,{type:"audio/webm"}),t=URL.createObjectURL(e),r={id:Date.now().toString(),blob:e,duration:v,url:t,isTranscribing:!1};N(r),b(e=>[r,...e]),k(0),S(0)},A.current=t,t.start(),l(!0),p(!1),D(!0)}catch(e){console.error("Error starting recording:",e),x.Ay.error("Failed to access microphone"),D(!1)}},B=e=>{if(j===e.id)return void w(null);let t=new Audio(e.url);t.onended=()=>w(null),t.play(),w(e.id)},q=e=>{b(t=>t.filter(t=>t.id!==e)),(null==f?void 0:f.id)===e&&N(null)},z=async e=>{try{b(t=>t.map(t=>t.id===e.id?{...t,isTranscribing:!0,error:void 0}:t));let t=await d.j.speechToText(e.blob);b(a=>a.map(a=>a.id===e.id?{...a,transcript:t.transcript,isTranscribing:!1}:a)),x.Ay.success("Transcription completed!")}catch(t){console.error("Error transcribing recording:",t),b(t=>t.map(t=>t.id===e.id?{...t,isTranscribing:!1,error:"Transcription failed"}:t)),x.Ay.error("Failed to transcribe recording")}},V=e=>{t(e),a()},Q=e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))};return o?(0,r.jsx)(u.N,{children:(0,r.jsx)(g.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:a,children:(0,r.jsxs)(g.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Voice Recorder"}),(0,r.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:(0,r.jsx)(n.QCr,{})})]}),!1===T&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(n.i0t,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Microphone access is required for voice recording."}),(0,r.jsx)(h.Qf,{onClick:O,variant:"gradient",className:"bg-gradient-to-r from-blue-500 to-purple-500",children:"Grant Permission"})]}),!1!==T&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-center mb-6",children:i?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-center gap-1 h-12",children:[...Array(20)].map((e,t)=>(0,r.jsx)(g.P.div,{className:"w-1 bg-red-500 rounded-full",animate:{height:c?4:4+40*C*(.5*Math.random()+.5)},transition:{duration:.1,repeat:c?0:1/0,repeatType:"reverse"}},t))}),(0,r.jsx)("div",{className:"text-2xl font-mono text-gray-900 dark:text-white",children:Q(v)}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,r.jsx)(h.Qf,{onClick:()=>{A.current&&i&&(c?(A.current.resume(),p(!1)):(A.current.pause(),p(!0)))},variant:"ghost",icon:c?(0,r.jsx)(n.gSK,{}):(0,r.jsx)(n.kwt,{}),children:c?"Resume":"Pause"}),(0,r.jsx)(h.Qf,{onClick:()=>{A.current&&i&&(A.current.stop(),l(!1),p(!1),E.current&&E.current.getTracks().forEach(e=>e.stop()),R.current&&cancelAnimationFrame(R.current))},variant:"danger",className:"bg-red-500 hover:bg-red-600 text-white",icon:(0,r.jsx)(n.wFo,{}),children:"Stop"})]})]}):(0,r.jsx)(h.Qf,{onClick:L,variant:"gradient",className:"bg-gradient-to-r from-red-500 to-red-600 w-20 h-20 rounded-full",icon:(0,r.jsx)(n.i0t,{className:"w-8 h-8"}),children:"Record"})}),y.length>0&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Recordings"}),y.map(e=>(0,r.jsxs)(m.Ue,{variant:"glass",className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{onClick:()=>B(e),className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:j===e.id?(0,r.jsx)(n.kwt,{className:"w-4 h-4 text-blue-600"}):(0,r.jsx)(n.gSK,{className:"w-4 h-4 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Q(e.duration)}),e.transcript&&(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 max-w-xs truncate",children:e.transcript})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[!e.transcript&&!e.isTranscribing&&!e.error&&(0,r.jsx)(h.Qf,{onClick:()=>z(e),variant:"ghost",size:"sm",icon:(0,r.jsx)(n.g0N,{}),children:"Transcribe"}),e.isTranscribing&&(0,r.jsx)(n.hW,{className:"animate-spin text-blue-500"}),e.transcript&&(0,r.jsx)(h.Qf,{onClick:()=>V(e.transcript),variant:"gradient",size:"sm",className:"bg-gradient-to-r from-green-500 to-green-600",icon:(0,r.jsx)(n.CMH,{}),children:"Use"}),(0,r.jsx)("button",{onClick:()=>q(e.id),className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:(0,r.jsx)(n.qbC,{className:"w-3 h-3"})})]})]}),e.error&&(0,r.jsx)("div",{className:"mt-2 text-xs text-red-500",children:e.error})]},e.id))]})]})]})})}):null},y=e=>{let{note:t,onClick:a,onDelete:s}=e;return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow cursor-pointer relative group",children:[(0,r.jsxs)("div",{onClick:a,className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:t.title||"Untitled"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm line-clamp-3",children:t.preview})]}),t.isPinned&&(0,r.jsx)(n.gt3,{className:"text-yellow-500 ml-2 flex-shrink-0"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(n.w_X,{}),(0,l.GP)((0,c.H)(t.updatedAt),"MMM dd, yyyy")]}),t.wordCount>0&&(0,r.jsxs)("span",{children:[t.wordCount," words"]}),t.hasMedia&&(0,r.jsx)(n.dkL,{className:"text-blue-500"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[t.tags.slice(0,2).map(e=>(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-xs",children:e},e)),t.tags.length>2&&(0,r.jsxs)("span",{className:"text-xs text-gray-400",children:["+",t.tags.length-2]})]})]})]}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),s(t.id)},className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-red-500 text-white p-1 rounded-full hover:bg-red-600",title:"Delete note",children:(0,r.jsx)(n.qbC,{className:"w-3 h-3"})})]})},b=e=>{let{note:t,onClick:a,onDelete:s}=e;return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow cursor-pointer relative group",children:[(0,r.jsxs)("div",{onClick:a,className:"flex items-start gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:t.title}),t.isPinned&&(0,r.jsx)(n.gt3,{className:"text-yellow-500"}),t.hasMedia&&(0,r.jsx)(n.dkL,{className:"text-gray-500"})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2 line-clamp-2",children:t.preview}),t.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mb-2",children:t.tags.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-full",children:e},e))})]}),(0,r.jsxs)("div",{className:"text-right text-xs text-gray-500 dark:text-gray-400 min-w-[120px]",children:[(0,r.jsx)("div",{children:(0,l.GP)((0,c.H)(t.updatedAt),"MMM d, yyyy")}),(0,r.jsxs)("div",{className:"mt-1",children:[t.wordCount," words • ",t.readingTime," min"]})]})]}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),s(t.id)},className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-red-500 text-white p-1 rounded-full hover:bg-red-600",title:"Delete note",children:(0,r.jsx)(n.qbC,{className:"w-3 h-3"})})]})},f=()=>{let e=(0,o.useRouter)(),[t,a]=(0,s.useState)([]),[c,u]=(0,s.useState)(null),[g,h]=(0,s.useState)(!0),[m,f]=(0,s.useState)(""),[N,j]=(0,s.useState)([]),[w,v]=(0,s.useState)([]),[k,C]=(0,s.useState)("grid"),[S,T]=(0,s.useState)("updatedAt"),[D,A]=(0,s.useState)("DESC"),[E,P]=(0,s.useState)(!1),[M,R]=(0,s.useState)({}),[U,Y]=(0,s.useState)(!1),[F,O]=(0,s.useState)(!1),[I,L]=(0,s.useState)(1),[B,q]=(0,s.useState)(0),[z,V]=(0,s.useState)(!1),Q=(0,i.d)(m,300),G=async()=>{try{h(!0);let e={limit:20,offset:(I-1)*20,sortBy:S,sortOrder:D,...Q&&{search:Q},...N.length>0&&{tags:N},...M.from&&{dateFrom:M.from},...M.to&&{dateTo:M.to},...U&&{pinnedOnly:!0},...F&&{hasMedia:!0}};console.log("\uD83D\uDD0D Notes Page fetchNotes Debug:",{searchTerm:m,debouncedSearch:Q,selectedTags:N,params:e,timestamp:new Date().toISOString()});let t=await d.j.getNotes(e);a(t.notes),q(t.total),console.log("\uD83D\uDCCA Notes fetched successfully:",{notesCount:t.notes.length,total:t.total,hasSearch:!!Q,searchTerm:Q})}catch(e){console.error("Error fetching notes:",e)}finally{h(!1)}},H=async()=>{try{let[e,t]=await Promise.all([d.j.getStats(),d.j.getTags()]);u(e),v(t)}catch(e){console.error("Error fetching metadata:",e)}};(0,s.useEffect)(()=>{G()},[Q,N,S,D,M.from,M.to,U,F,I]),(0,s.useEffect)(()=>{H()},[]);let W=e=>{j(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),L(1)},Z=()=>{f(""),j([]),R({}),Y(!1),O(!1),L(1)},_=async e=>{if(confirm("Are you sure you want to delete this note? This action cannot be undone."))try{await d.j.deleteNote(e),x.Ay.success("Note deleted successfully"),G()}catch(e){console.error("Error deleting note:",e),x.Ay.error("Failed to delete note")}},$=(0,s.useMemo)(()=>Q||N.length>0||M.from||M.to||U||F,[Q,N,M,U,F]),K=async t=>{try{let a={title:"Voice Note - ".concat((0,l.GP)(new Date,"MMM d, yyyy HH:mm")),content:[{id:"1",type:"text",content:t,position:0}],tags:["voice-note"],visibility:"private"},r=await d.j.createNote(a);x.Ay.success("Voice note created successfully!"),G(),e.push("/notes/".concat(r.id))}catch(e){console.error("Error creating voice note:",e),x.Ay.error("Failed to create voice note")}};return g&&0===t.length?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n.hW,{className:"animate-spin text-4xl text-blue-500 mb-4 mx-auto"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"Loading your notes..."})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"My Notes"}),c&&(0,r.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[c.totalNotes," notes • ",c.totalWords.toLocaleString()," words • ",c.totalReadingTime," min read"]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsx)("button",{onClick:()=>e.push("/notes/new"),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg",children:"New Note"}),(0,r.jsxs)("button",{onClick:()=>{console.log("\uD83C\uDFA4 Voice Note button clicked!"),console.log("\uD83D\uDD27 Current showVoiceRecorder state:",z),V(!0),console.log("✅ setShowVoiceRecorder(true) called")},className:"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2",children:[(0,r.jsx)(n.i0t,{}),"Voice Note"]}),(0,r.jsx)("button",{onClick:async()=>{console.log("\uD83E\uDDEA Testing direct search...");try{let e=await d.j.getNotes({search:"test",limit:5});console.log("\uD83D\uDD0D Direct search test result:",e),alert("Found ".concat(e.notes.length,' notes with search "test"'))}catch(e){console.error("❌ Direct search test failed:",e),alert("Search test failed - check console")}},className:"bg-red-500 text-white px-4 py-2 rounded-lg",children:"\uD83E\uDDEA Test Search"}),(0,r.jsx)("button",{onClick:async()=>{console.log("\uD83D\uDCCB Getting all notes...");try{let e=await d.j.getNotes({limit:100});console.log("\uD83D\uDCDD All notes:",e.notes.map(e=>({id:e.id,title:e.title}))),alert("Total notes: ".concat(e.total,"\nTitles: ").concat(e.notes.map(e=>e.title).join(", ")))}catch(e){console.error("❌ Failed to get all notes:",e),alert("Failed to get notes - check console")}},className:"bg-green-500 text-white px-4 py-2 rounded-lg text-sm",children:"\uD83D\uDCCB Show All"})]})]}),(0,r.jsxs)("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(n.KSO,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Search notes...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:m,onChange:e=>{let t=e.target.value;console.log("\uD83D\uDD0D Search input changed:",{oldValue:m,newValue:t,timestamp:new Date().toISOString()}),f(t)},onKeyDown:e=>{"Enter"===e.key&&(console.log("\uD83D\uDE80 Manual search triggered for:",m),G())}})]}),(0,r.jsxs)("div",{className:"flex rounded-lg border border-gray-300 dark:border-gray-600 overflow-hidden",children:[(0,r.jsx)("button",{onClick:()=>C("grid"),className:"px-3 py-2 ".concat("grid"===k?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"),children:(0,r.jsx)(n.QJV,{})}),(0,r.jsx)("button",{onClick:()=>C("list"),className:"px-3 py-2 ".concat("list"===k?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"),children:(0,r.jsx)(n.svy,{})})]}),(0,r.jsxs)("button",{onClick:()=>P(!E),className:"px-4 py-2 ".concat(E?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"," rounded-lg ").concat($?"ring-2 ring-blue-500":""),children:["Filters ",$&&"(".concat(N.length+ +!!U+ +!!F,")")]})]}),E&&(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Tags"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 max-h-24 overflow-y-auto",children:w.map(e=>(0,r.jsx)("button",{onClick:()=>W(e),className:"px-2 py-1 text-xs rounded-full ".concat(N.includes(e)?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Quick Filters"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:U,onChange:e=>Y(e.target.checked),className:"mr-2"}),(0,r.jsx)(n.gt3,{className:"mr-1"}),"Pinned only"]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:F,onChange:e=>O(e.target.checked),className:"mr-2"}),(0,r.jsx)(n.dkL,{className:"mr-1"}),"With media"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Sort by"}),(0,r.jsxs)("select",{value:"".concat(S,"-").concat(D),onChange:e=>{let[t,a]=e.target.value.split("-");T(t),A(a)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800",children:[(0,r.jsx)("option",{value:"updatedAt-DESC",children:"Last modified"}),(0,r.jsx)("option",{value:"createdAt-DESC",children:"Date created (newest)"}),(0,r.jsx)("option",{value:"createdAt-ASC",children:"Date created (oldest)"}),(0,r.jsx)("option",{value:"title-ASC",children:"Title (A-Z)"}),(0,r.jsx)("option",{value:"title-DESC",children:"Title (Z-A)"}),(0,r.jsx)("option",{value:"wordCount-DESC",children:"Word count (high)"}),(0,r.jsx)("option",{value:"wordCount-ASC",children:"Word count (low)"})]})]}),$&&(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsx)("button",{onClick:Z,className:"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg",children:"Clear All"})})]})})]}),0===t.length?(0,r.jsx)("div",{className:"text-center py-16",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto space-y-4",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto",children:(0,r.jsx)(n.OiG,{className:"w-10 h-10 text-white"})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:$?"No notes match your filters":"No notes yet"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:$?"Try adjusting your search criteria or clear the filters.":"Start capturing your thoughts and ideas with your first note."}),(0,r.jsx)("button",{onClick:()=>$?Z():e.push("/notes/new"),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg",children:$?"Clear Filters":"Create First Note"})]})}):(0,r.jsx)("div",{className:"".concat("grid"===k?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"),children:t.map((t,a)=>(0,r.jsx)("div",{children:"grid"===k?(0,r.jsx)(y,{note:t,onClick:()=>e.push("/notes/".concat(t.id)),onDelete:_}):(0,r.jsx)(b,{note:t,onClick:()=>e.push("/notes/".concat(t.id)),onDelete:_})},t.id))}),B>20&&(0,r.jsx)("div",{className:"flex justify-center mt-8",children:(0,r.jsx)("div",{className:"flex gap-2",children:Array.from({length:Math.ceil(B/20)},(e,t)=>t+1).map(e=>(0,r.jsx)("button",{onClick:()=>L(e),className:"px-3 py-2 rounded ".concat(I===e?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e},e))})}),(0,r.jsx)(p,{isOpen:z,onClose:()=>V(!1),onTranscriptionComplete:K})]})}},98794:(e,t,a)=>{"use strict";a.d(t,{H:()=>o});var r=a(25703),s=a(7239),n=a(89447);function o(e,t){var a;let o,x,p=()=>(0,s.w)(null==t?void 0:t.in,NaN),y=null!=(a=null==t?void 0:t.additionalDigits)?a:2,b=function(e){let t,a={},r=e.split(i.dateTimeDelimiter);if(r.length>2)return a;if(/:/.test(r[0])?t=r[0]:(a.date=r[0],t=r[1],i.timeZoneDelimiter.test(a.date)&&(a.date=e.split(i.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){let e=i.timezone.exec(t);e?(a.time=t.replace(e[1],""),a.timezone=e[1]):a.time=t}return a}(e);if(b.date){let e=function(e,t){let a=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(a);if(!r)return{year:NaN,restDateString:""};let s=r[1]?parseInt(r[1]):null,n=r[2]?parseInt(r[2]):null;return{year:null===n?s:100*n,restDateString:e.slice((r[1]||r[2]).length)}}(b.date,y);o=function(e,t){var a,r,s,n,o,i,c,d;if(null===t)return new Date(NaN);let g=e.match(l);if(!g)return new Date(NaN);let x=!!g[4],p=u(g[1]),y=u(g[2])-1,b=u(g[3]),f=u(g[4]),N=u(g[5])-1;if(x){return(a=0,r=f,s=N,r>=1&&r<=53&&s>=0&&s<=6)?function(e,t,a){let r=new Date(0);r.setUTCFullYear(e,0,4);let s=r.getUTCDay()||7;return r.setUTCDate(r.getUTCDate()+((t-1)*7+a+1-s)),r}(t,f,N):new Date(NaN)}{let e=new Date(0);return(n=t,o=y,i=b,o>=0&&o<=11&&i>=1&&i<=(h[o]||(m(n)?29:28))&&(c=t,(d=p)>=1&&d<=(m(c)?366:365)))?(e.setUTCFullYear(t,y,Math.max(p,b)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!o||isNaN(+o))return p();let f=+o,N=0;if(b.time&&isNaN(N=function(e){var t,a,s;let n=e.match(c);if(!n)return NaN;let o=g(n[1]),i=g(n[2]),l=g(n[3]);return(t=o,a=i,s=l,24===t?0===a&&0===s:s>=0&&s<60&&a>=0&&a<60&&t>=0&&t<25)?o*r.s0+i*r.Cg+1e3*l:NaN}(b.time)))return p();if(b.timezone){if(isNaN(x=function(e){var t,a;if("Z"===e)return 0;let s=e.match(d);if(!s)return 0;let n="+"===s[1]?-1:1,o=parseInt(s[2]),i=s[3]&&parseInt(s[3])||0;return(t=0,(a=i)>=0&&a<=59)?n*(o*r.s0+i*r.Cg):NaN}(b.timezone)))return p()}else{let e=new Date(f+N),a=(0,n.a)(0,null==t?void 0:t.in);return a.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),a.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),a}return(0,n.a)(f+N+x,null==t?void 0:t.in)}let i={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e){return e?parseInt(e):1}function g(e){return e&&parseFloat(e.replace(",","."))||0}let h=[31,null,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100!=0}}},e=>{var t=t=>e(e.s=t);e.O(0,[6711,3464,3568,1005,6153,2055,8441,1684,7358],()=>t(37827)),_N_E=e.O()}]);