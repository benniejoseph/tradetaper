(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},50484:(e,t,r)=>{Promise.resolve().then(r.bind(r,82048))},63014:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});var a=r(80722);class n{static async createNote(e){return(await a.Y0.post("/notes",e)).data}static async getNotes(){var e,t,r;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams;Object.entries(n).forEach(e=>{let[t,r]=e;null!=r&&(Array.isArray(r)?r.forEach(e=>s.append(t,e.toString())):s.append(t,r.toString()))});let l="/notes?".concat(s.toString());console.log("\uD83D\uDD0D NotesService.getNotes Debug:",{params:n,searchParams:s.toString(),fullUrl:l,timestamp:new Date().toISOString()});let o=await a.Y0.get(l);return console.log("\uD83D\uDCE5 NotesService.getNotes Response:",{status:o.status,dataType:typeof o.data,notesCount:(null==(t=o.data)||null==(e=t.notes)?void 0:e.length)||0,total:(null==(r=o.data)?void 0:r.total)||0,url:l}),o.data}static async getNote(e){return(await a.Y0.get("/notes/".concat(e))).data}static async updateNote(e,t){return(await a.Y0.patch("/notes/".concat(e),t)).data}static async deleteNote(e){await a.Y0.delete("/notes/".concat(e))}static async togglePin(e){return(await a.Y0.patch("/notes/".concat(e,"/toggle-pin"))).data}static async getStats(){return(await a.Y0.get("/notes/stats")).data}static async getTags(){return(await a.Y0.get("/notes/tags")).data}static async getCalendarNotes(e,t){return(await a.Y0.get("/notes/calendar/".concat(e,"/").concat(t))).data}static async uploadMedia(e,t){let r=new FormData;return r.append("file",e),t&&r.append("noteId",t),(await a.Y0.post("/notes/media/upload",r,{headers:{"Content-Type":"multipart/form-data"}})).data}static async speechToText(e){let t=new FormData;return t.append("audio",e,"recording.webm"),(await a.Y0.post("/notes/speech-to-text",t,{headers:{"Content-Type":"multipart/form-data"}})).data}static async searchNotes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getNotes({...t,search:e})}static async getRecentNotes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return(await this.getNotes({sortBy:"updatedAt",sortOrder:"DESC",limit:e})).notes}static async getPinnedNotes(){return(await this.getNotes({pinnedOnly:!0,sortBy:"updatedAt",sortOrder:"DESC"})).notes}static async getNotesWithMedia(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this.getNotes({hasMedia:!0,sortBy:"updatedAt",sortOrder:"DESC",limit:e})}static async getNotesByTag(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return this.getNotes({tags:[e],sortBy:"updatedAt",sortOrder:"DESC",limit:t})}static async getNotesByAccount(e){return this.getNotes({accountId:e,sortBy:"updatedAt",sortOrder:"DESC"})}static async getNotesByTrade(e){return this.getNotes({tradeId:e,sortBy:"createdAt",sortOrder:"ASC"})}static async exportNotes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URLSearchParams;return Object.entries(t).forEach(e=>{let[t,a]=e;null!=a&&(Array.isArray(a)?a.forEach(e=>r.append(t,e.toString())):r.append(t,a.toString()))}),r.append("format",e),(await a.Y0.get("/notes/export?".concat(r.toString()),{responseType:"blob"})).data}static async duplicateNote(e){return(await a.Y0.post("/notes/".concat(e,"/duplicate"))).data}static async getTemplates(){return(await a.Y0.get("/notes/templates")).data}static async createFromTemplate(e,t){return(await a.Y0.post("/notes/templates/".concat(e,"/create"),{title:t})).data}static async getNotesForDate(e){return(await a.Y0.get("/notes/calendar/date/".concat(e))).data}static async getCalendarStats(e,t){return(await a.Y0.get("/notes/calendar/".concat(e,"/").concat(t,"/stats"))).data}static async getMediaUrl(e){return(await a.Y0.get("/notes/media/".concat(e,"/url"))).data.url}static async deleteMedia(e){await a.Y0.delete("/notes/media/".concat(e))}static async generateEmbedData(e){return(await a.Y0.post("/notes/media/embed",{url:e})).data}static async enhanceText(e,t){return(await a.Y0.post("/notes/ai/enhance-text",{text:e,task:t})).data}static async generateNoteSuggestions(e){return(await a.Y0.post("/notes/ai/generate-suggestions",{content:e})).data}static async exportNote(e,t){return(await a.Y0.get("/notes/".concat(e,"/export/").concat(t),{responseType:"blob"})).data}static async bulkDelete(e){await a.Y0.post("/notes/bulk/delete",{noteIds:e})}static async bulkUpdateTags(e,t){await a.Y0.post("/notes/bulk/tags",{noteIds:e,tags:t})}static async bulkUpdateVisibility(e,t){await a.Y0.post("/notes/bulk/visibility",{noteIds:e,visibility:t})}}},74436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var a=r(12115),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=a.createContext&&a.createContext(n),l=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var a,n,s;a=e,n=t,s=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in a?Object.defineProperty(a,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>a.createElement(u,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:n,size:s,title:i}=e,d=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,l),u=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==s?a.createElement(s.Consumer,null,e=>t(e)):t(n)}},80722:(e,t,r)=>{"use strict";r.d(t,{Y0:()=>l,uE:()=>s,wv:()=>o});var a=r(23464);let n="https://tradetaper-backend-481634875325.us-central1.run.app/api/v1";console.log("\uD83D\uDD27 API Configuration:",{env:"production",apiUrl:n,envVar:"https://tradetaper-backend-481634875325.us-central1.run.app/api/v1",timestamp:new Date().toISOString()});let s=a.A.create({baseURL:n,headers:{"Content-Type":"application/json"}}),l=a.A.create({baseURL:n,headers:{"Content-Type":"application/json"}});function o(e){l.interceptors.request.use(t=>{let r=e().auth.token;return r&&(t.headers.Authorization="Bearer ".concat(r)),console.log("\uD83D\uDE80 Making authenticated API request to:",t.baseURL+t.url),t},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{var t,r,a;return console.error("❌ API Request failed:",{url:null==(t=e.config)?void 0:t.url,baseURL:null==(r=e.config)?void 0:r.baseURL,status:null==(a=e.response)?void 0:a.status,message:e.message}),e.response&&401===e.response.status&&console.log("Unauthorized from interceptor..."),Promise.reject(e)}),console.log("[API.TS] Auth interceptors configured.")}},82048:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(95155),n=r(12115),s=r(35695),l=r(29911),o=r(52436),i=r(31246),c=r(63014),d=r(13568);let u=e=>{let{icon:t,label:r,description:n,onClick:s}=e;return(0,a.jsxs)("button",{onClick:s,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:t}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:r}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:n})]})]})},g=e=>{var t,r,n,s,o,i,c,u,g,x,m,b,h,y,v,j,f,N,k,w,C,S,A,O,D,P;let{block:E,onUpdate:B,onAddBlock:Y,onDelete:T,onImageUpload:U,convertVideoUrl:L,uploading:R}=e,z=(e,t)=>{B({[e]:t})};switch(E.type){case"text":return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("textarea",{value:(null==(t=E.content)?void 0:t.text)||"",onChange:e=>z("text",e.target.value),placeholder:"Type something...",className:"w-full bg-transparent border-none outline-none resize-none min-h-[1.5rem] text-gray-800 dark:text-gray-200 placeholder-gray-400",rows:1,style:{height:"auto"},onInput:e=>{let t=e.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"}}),(0,a.jsx)(p,{onAddBlock:Y,onDelete:T})]});case"heading":return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("input",{type:"text",value:(null==(r=E.content)?void 0:r.text)||"",onChange:e=>z("text",e.target.value),placeholder:"Heading",className:"w-full bg-transparent border-none outline-none text-2xl font-bold text-gray-800 dark:text-gray-200 placeholder-gray-400"}),(0,a.jsx)(p,{onAddBlock:Y,onDelete:T})]});case"quote":return(0,a.jsxs)("div",{className:"group relative border-l-4 border-gray-300 dark:border-gray-600 pl-4",children:[(0,a.jsx)("textarea",{value:(null==(n=E.content)?void 0:n.text)||"",onChange:e=>z("text",e.target.value),placeholder:"Quote...",className:"w-full bg-transparent border-none outline-none resize-none italic text-gray-600 dark:text-gray-400 placeholder-gray-400",rows:1}),(0,a.jsx)("input",{type:"text",value:(null==(s=E.content)?void 0:s.author)||"",onChange:e=>z("author",e.target.value),placeholder:"Author (optional)",className:"w-full bg-transparent border-none outline-none text-sm text-gray-500 dark:text-gray-500 placeholder-gray-400 mt-1"}),(0,a.jsx)(p,{onAddBlock:Y,onDelete:T})]});case"list":return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,a.jsx)("button",{onClick:()=>{var e;return z("ordered",!(null==(e=E.content)?void 0:e.ordered))},className:"text-sm px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded",children:(null==(o=E.content)?void 0:o.ordered)?"Numbered":"Bulleted"})}),(0,a.jsx)("div",{className:"space-y-1",children:((null==(i=E.content)?void 0:i.items)||[""]).map((e,t)=>{var r;return(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-gray-400 pt-1",children:(null==(r=E.content)?void 0:r.ordered)?"".concat(t+1,"."):"•"}),(0,a.jsx)("input",{type:"text",value:e,onChange:e=>{var r;let a=[...(null==(r=E.content)?void 0:r.items)||[""]];a[t]=e.target.value,z("items",a)},onKeyDown:r=>{var a,n,s,l;if("Enter"===r.key){r.preventDefault();let e=[...(null==(s=E.content)?void 0:s.items)||[""]];e.splice(t+1,0,""),z("items",e)}else if("Backspace"===r.key&&!e&&((null==(n=E.content)||null==(a=n.items)?void 0:a.length)||0)>1){r.preventDefault();let e=[...(null==(l=E.content)?void 0:l.items)||[""]];e.splice(t,1),z("items",e)}},placeholder:"List item...",className:"flex-1 bg-transparent border-none outline-none text-gray-800 dark:text-gray-200 placeholder-gray-400"})]},t)})}),(0,a.jsx)(p,{onAddBlock:Y,onDelete:T})]});case"code":return(0,a.jsxs)("div",{className:"group relative bg-gray-100 dark:bg-gray-800 rounded-lg p-4",children:[(0,a.jsxs)("select",{value:(null==(c=E.content)?void 0:c.language)||"javascript",onChange:e=>z("language",e.target.value),className:"mb-2 text-xs bg-transparent border-none outline-none text-gray-500",children:[(0,a.jsx)("option",{value:"javascript",children:"JavaScript"}),(0,a.jsx)("option",{value:"typescript",children:"TypeScript"}),(0,a.jsx)("option",{value:"python",children:"Python"}),(0,a.jsx)("option",{value:"html",children:"HTML"}),(0,a.jsx)("option",{value:"css",children:"CSS"}),(0,a.jsx)("option",{value:"json",children:"JSON"}),(0,a.jsx)("option",{value:"sql",children:"SQL"}),(0,a.jsx)("option",{value:"bash",children:"Bash"})]}),(0,a.jsx)("textarea",{value:(null==(u=E.content)?void 0:u.code)||"",onChange:e=>z("code",e.target.value),placeholder:"Enter code...",className:"w-full bg-transparent border-none outline-none resize-none font-mono text-sm text-gray-800 dark:text-gray-200 placeholder-gray-400",rows:3}),(0,a.jsx)(p,{onAddBlock:Y,onDelete:T})]});case"image":return(0,a.jsxs)("div",{className:"group relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.dkL,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){if(r.size>0xa00000)return void d.Ay.error("File size must be less than 10MB");U(r)}},disabled:R,className:"hidden",id:"file-upload-".concat(E.id)}),(0,a.jsx)("label",{htmlFor:"file-upload-".concat(E.id),className:"flex items-center justify-center gap-2 w-full px-4 py-3 border-2 border-dashed rounded-lg cursor-pointer transition-all ".concat(R?"border-blue-300 bg-blue-50 dark:bg-blue-900/20 cursor-not-allowed":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20"),children:R?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.hW,{className:"animate-spin text-blue-500"}),(0,a.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:"Uploading..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.HVe,{className:"text-gray-500"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Click to upload image"})]})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(l.AnD,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)("input",{type:"text",value:(null==(g=E.content)?void 0:g.url)||"",onChange:e=>z("url",e.target.value),placeholder:"Or paste image URL...",className:"w-full pl-10 bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsx)("input",{type:"text",value:(null==(x=E.content)?void 0:x.caption)||"",onChange:e=>z("caption",e.target.value),placeholder:"Caption (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("input",{type:"text",value:(null==(m=E.content)?void 0:m.alt)||"",onChange:e=>z("alt",e.target.value),placeholder:"Alt text (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"})]}),(null==(b=E.content)?void 0:b.url)&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("img",{src:E.content.url,alt:E.content.alt||"Image",className:"max-w-full h-auto rounded-lg",onError:e=>{e.target.style.display="none"}}),E.content.caption&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2 italic",children:E.content.caption})]})]}),(0,a.jsx)(p,{onAddBlock:Y,onDelete:T})]});case"video":return(0,a.jsxs)("div",{className:"group relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.HiP,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("input",{type:"text",value:(null==(h=E.content)?void 0:h.url)||"",onChange:e=>z("url",e.target.value),placeholder:"Video URL (YouTube, Vimeo, etc.)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("input",{type:"text",value:(null==(y=E.content)?void 0:y.caption)||"",onChange:e=>z("caption",e.target.value),placeholder:"Caption (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"})]}),(null==(v=E.content)?void 0:v.url)&&(0,a.jsxs)("div",{className:"mt-4",children:[L(E.content.url)!==E.content.url?(0,a.jsx)("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:(0,a.jsx)("iframe",{src:L(E.content.url),className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded video"})}):(0,a.jsx)("div",{className:"aspect-video bg-gray-200 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.gSK,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:E.content.url.includes("youtube.com")||E.content.url.includes("vimeo.com")?"Unsupported video format":"Enter a YouTube or Vimeo URL"})]})}),E.content.caption&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2 italic",children:E.content.caption})]})]}),(0,a.jsx)(p,{onAddBlock:Y,onDelete:T})]});case"embed":return(0,a.jsxs)("div",{className:"group relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.AnD,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("input",{type:"text",value:(null==(j=E.content)?void 0:j.url)||"",onChange:e=>z("url",e.target.value),placeholder:"URL to embed",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("input",{type:"text",value:(null==(f=E.content)?void 0:f.title)||"",onChange:e=>z("title",e.target.value),placeholder:"Title (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("textarea",{value:(null==(N=E.content)?void 0:N.description)||"",onChange:e=>z("description",e.target.value),placeholder:"Description (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:2})]}),(null==(k=E.content)?void 0:k.url)&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:(0,a.jsxs)("div",{className:"text-left",children:[E.content.title&&(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:E.content.title}),(0,a.jsx)("p",{className:"text-sm text-blue-500 break-all",children:E.content.url}),E.content.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:E.content.description})]})})]}),(0,a.jsx)(p,{onAddBlock:Y,onDelete:T})]});case"table":return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 dark:border-gray-600",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[((null==(w=E.content)?void 0:w.headers)||[]).map((e,t)=>(0,a.jsx)("th",{className:"border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 p-2",children:(0,a.jsx)("input",{type:"text",value:e,onChange:e=>{var r;let a=[...(null==(r=E.content)?void 0:r.headers)||[]];a[t]=e.target.value,z("headers",a)},className:"w-full bg-transparent border-none outline-none text-sm font-medium",placeholder:"Header ".concat(t+1)})},t)),(0,a.jsx)("th",{className:"border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 p-2 w-10",children:(0,a.jsx)("button",{onClick:()=>{var e,t;let r=[...(null==(e=E.content)?void 0:e.headers)||[],""],a=((null==(t=E.content)?void 0:t.rows)||[]).map(e=>[...e,""]);z("headers",r),z("rows",a)},className:"text-blue-500 hover:text-blue-700",children:(0,a.jsx)(l.OiG,{size:12})})})]})}),(0,a.jsxs)("tbody",{children:[((null==(C=E.content)?void 0:C.rows)||[]).map((e,t)=>(0,a.jsxs)("tr",{children:[e.map((e,r)=>(0,a.jsx)("td",{className:"border border-gray-300 dark:border-gray-600 p-2",children:(0,a.jsx)("input",{type:"text",value:e,onChange:e=>{var a;let n=[...(null==(a=E.content)?void 0:a.rows)||[]];n[t][r]=e.target.value,z("rows",n)},className:"w-full bg-transparent border-none outline-none text-sm",placeholder:"Cell ".concat(t+1,"-").concat(r+1)})},r)),(0,a.jsx)("td",{className:"border border-gray-300 dark:border-gray-600 p-2 w-10",children:(0,a.jsx)("button",{onClick:()=>{var e;z("rows",((null==(e=E.content)?void 0:e.rows)||[]).filter((e,r)=>r!==t))},className:"text-red-500 hover:text-red-700",children:"\xd7"})})]},t)),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:((null==(A=E.content)||null==(S=A.headers)?void 0:S.length)||0)+1,className:"border border-gray-300 dark:border-gray-600 p-2 text-center",children:(0,a.jsxs)("button",{onClick:()=>{var e,t,r;let a=Array((null==(t=E.content)||null==(e=t.headers)?void 0:e.length)||2).fill("");z("rows",[...(null==(r=E.content)?void 0:r.rows)||[],a])},className:"text-blue-500 hover:text-blue-700 text-sm",children:[(0,a.jsx)(l.OiG,{className:"inline mr-1",size:12}),"Add Row"]})})})]})]})}),(0,a.jsx)(p,{onAddBlock:Y,onDelete:T})]});case"divider":return(0,a.jsxs)("div",{className:"group relative py-4",children:[(0,a.jsx)("hr",{className:"border-gray-300 dark:border-gray-600"}),(0,a.jsx)(p,{onAddBlock:Y,onDelete:T})]});case"callout":let F={info:(0,a.jsx)(l.__w,{className:"text-blue-500"}),warning:(0,a.jsx)(l.BS8,{className:"text-yellow-500"}),success:(0,a.jsx)(l.A7C,{className:"text-green-500"})};return(0,a.jsxs)("div",{className:"group relative bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[F[null==(O=E.content)?void 0:O.type],(0,a.jsxs)("select",{value:(null==(D=E.content)?void 0:D.type)||"info",onChange:e=>z("type",e.target.value),className:"text-sm bg-transparent border-none outline-none",children:[(0,a.jsx)("option",{value:"info",children:"Info"}),(0,a.jsx)("option",{value:"warning",children:"Warning"}),(0,a.jsx)("option",{value:"success",children:"Success"})]})]}),(0,a.jsx)("textarea",{value:(null==(P=E.content)?void 0:P.text)||"",onChange:e=>z("text",e.target.value),placeholder:"Callout text...",className:"w-full bg-transparent border-none outline-none resize-none text-gray-800 dark:text-gray-200 placeholder-gray-400",rows:1}),(0,a.jsx)(p,{onAddBlock:Y,onDelete:T})]});default:return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsxs)("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-500",children:["Unsupported block type: ",E.type]}),(0,a.jsx)(p,{onAddBlock:Y,onDelete:T})]})}},p=e=>{let{onAddBlock:t,onDelete:r}=e;return(0,a.jsxs)("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>t("text"),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Add block",children:(0,a.jsx)(l.OiG,{size:12})}),(0,a.jsx)("button",{onClick:r,className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete block",children:"\xd7"})]})},x=()=>{let e=(0,s.useRouter)(),t=(0,s.useParams)(),r=null==t?void 0:t.id,[p,x]=(0,n.useState)(null),[m,b]=(0,n.useState)(!0),[h,y]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[f,N]=(0,n.useState)(""),[k,w]=(0,n.useState)([]),[C,S]=(0,n.useState)([]),[A,O]=(0,n.useState)(""),[D,P]=(0,n.useState)(!1),[E,B]=(0,n.useState)("private"),[Y,T]=(0,n.useState)(!1),[U,L]=(0,n.useState)(!1),[R,z]=(0,n.useState)(null),F=async()=>{if(r)try{b(!0);let e=await c.j.getNote(r);x(e),N(e.title),w(e.content||[]),S(e.tags||[]),B(e.visibility),T(e.isPinned)}catch(t){console.error("Error fetching note:",t),d.Ay.error("Failed to load note"),e.push("/notes")}finally{b(!1)}};(0,n.useEffect)(()=>{r&&F()},[r]);let I=async()=>{if(!f.trim())return void d.Ay.error("Please enter a note title");try{y(!0);let t=await c.j.updateNote(r,{title:f,content:k,tags:C,visibility:E,isPinned:Y});x(t),d.Ay.success("Note saved successfully"),e.push("/notes/".concat(r))}catch(e){console.error("Error saving note:",e),d.Ay.error("Failed to save note")}finally{y(!1)}},V=(e,t)=>{let r=void 0!==t?t+1:k.length,a={id:"block-".concat(Date.now(),"-").concat(Math.random()),type:e,content:M(e),position:r};w([...k.slice(0,r),a,...k.slice(r).map(e=>({...e,position:e.position+1}))]),L(!1)},M=e=>{switch(e){case"text":case"heading":return{text:""};case"quote":return{text:"",author:""};case"list":return{items:[""],ordered:!1};case"code":return{code:"",language:"javascript"};case"image":return{url:"",caption:"",alt:""};case"video":return{url:"",caption:""};case"embed":return{url:"",title:"",description:""};case"callout":return{text:"",type:"info"};case"table":return{headers:["Column 1","Column 2"],rows:[["",""],["",""]]};default:return{}}},Q=(e,t)=>{let r=[...k];r[e]={...r[e],content:{...r[e].content,...t}},w(r)},H=e=>{1!==k.length&&w(k.filter((t,r)=>r!==e))},_=()=>{A.trim()&&!C.includes(A.trim())&&(S([...C,A.trim()]),O(""),P(!1))},q=e=>{S(C.filter(t=>t!==e))},W=async(e,t)=>{try{j(!0);let{url:a}=await c.j.uploadMedia(e,r);Q(t,{url:a}),d.Ay.success("Image uploaded successfully")}catch(e){console.error("Error uploading image:",e),d.Ay.error("Failed to upload image")}finally{j(!1)}},J=e=>{var t,r;if(e.includes("youtube.com/watch?v=")){let r=null==(t=e.split("v=")[1])?void 0:t.split("&")[0];return"https://www.youtube.com/embed/".concat(r)}if(e.includes("vimeo.com/")&&!e.includes("/embed/")){let t=null==(r=e.split("vimeo.com/")[1])?void 0:r.split("/")[0];return"https://player.vimeo.com/video/".concat(t)}return e};return m?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.hW,{className:"animate-spin text-4xl text-blue-500 mb-4 mx-auto"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"Loading note editor..."})]})}):p?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 dark:from-gray-900 dark:via-blue-900 dark:to-purple-900 p-4",children:[(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsx)(o.Ue,{className:"backdrop-blur-sm bg-white/70 dark:bg-gray-800/70 border border-white/20 shadow-xl",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(i.Qf,{onClick:()=>e.push("/notes/".concat(r)),className:"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 dark:bg-gray-700/50 dark:hover:bg-gray-600/50 dark:text-gray-300",children:(0,a.jsx)(l.QVr,{})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Edit Note"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.Qf,{onClick:()=>T(!Y),className:"".concat(Y?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-gray-100/50 text-gray-600 hover:bg-gray-200/50"," dark:bg-gray-700/50 dark:hover:bg-gray-600/50 dark:text-gray-300"),children:Y?(0,a.jsx)(l.gt3,{}):(0,a.jsx)(l.wei,{})}),(0,a.jsx)(i.Qf,{onClick:()=>B("private"===E?"shared":"private"),className:"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 dark:bg-gray-700/50 dark:hover:bg-gray-600/50 dark:text-gray-300",children:"private"===E?(0,a.jsx)(l.mx3,{}):(0,a.jsx)(l.Ny1,{})}),(0,a.jsxs)(i.Qf,{onClick:I,disabled:h,className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700",children:[h?(0,a.jsx)(l.hW,{className:"animate-spin"}):(0,a.jsx)(l.dIn,{}),h?"Saving...":"Save"]})]})]}),(0,a.jsx)("input",{type:"text",value:f,onChange:e=>N(e.target.value),placeholder:"Note title...",className:"w-full text-4xl font-bold bg-transparent border-none outline-none text-gray-900 dark:text-white placeholder-gray-400 mb-6",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-8",children:[C.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-full",children:["#",e,(0,a.jsx)("button",{onClick:()=>q(e),className:"ml-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",children:(0,a.jsx)(l.QCr,{className:"w-3 h-3"})})]},t)),D?(0,a.jsx)("input",{type:"text",value:A,onChange:e=>O(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),_()):"Escape"===e.key&&(P(!1),O(""))},onBlur:()=>{A.trim()?_():P(!1)},placeholder:"Add tag...",className:"px-3 py-1 text-sm bg-transparent border border-gray-300 dark:border-gray-600 rounded-full outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,a.jsxs)("button",{onClick:()=>P(!0),className:"inline-flex items-center gap-1 px-3 py-1 text-sm text-gray-500 dark:text-gray-400 border border-dashed border-gray-300 dark:border-gray-600 rounded-full hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:[(0,a.jsx)(l.BuZ,{className:"w-3 h-3"}),"Add tag"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6 p-4 bg-gray-50/50 dark:bg-gray-800/50 rounded-lg",children:[(0,a.jsxs)("button",{onClick:()=>V("image"),className:"flex items-center gap-2 px-3 py-2 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:[(0,a.jsx)(l.dkL,{className:"w-4 h-4"}),"Image"]}),(0,a.jsxs)("button",{onClick:()=>V("video"),className:"flex items-center gap-2 px-3 py-2 text-sm bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:[(0,a.jsx)(l.HiP,{className:"w-4 h-4"}),"Video"]}),(0,a.jsxs)("button",{onClick:()=>V("table"),className:"flex items-center gap-2 px-3 py-2 text-sm bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",children:[(0,a.jsx)(l.ist,{className:"w-4 h-4"}),"Table"]}),(0,a.jsxs)("button",{onClick:()=>V("list"),className:"flex items-center gap-2 px-3 py-2 text-sm bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors",children:[(0,a.jsx)(l.v5n,{className:"w-4 h-4"}),"List"]})]}),(0,a.jsx)("div",{className:"space-y-4 min-h-[200px]",children:k.map((e,t)=>(0,a.jsx)(g,{block:e,index:t,onUpdate:e=>Q(t,e),onAddBlock:e=>V(e,t),onDelete:()=>H(t),onImageUpload:e=>W(e,t),convertVideoUrl:J,uploading:v},e.id))}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)("button",{onClick:e=>{let t=e.currentTarget.getBoundingClientRect(),r=window.innerHeight;z({top:(t.bottom+400>r?t.top-400:t.bottom)+window.scrollY,left:t.left}),L(!0)},className:"w-full border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-gray-500 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-all duration-200 flex items-center justify-center gap-2 group",children:[(0,a.jsx)(l.OiG,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Add a block"]})}),(0,a.jsxs)("div",{className:"mt-6 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm text-gray-600 dark:text-gray-400",children:[(0,a.jsx)("strong",{children:"Debug:"})," ",k.length," blocks (",k.map(e=>e.type).join(", "),")"]})]})})}),U&&R&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>L(!1)}),(0,a.jsx)("div",{className:"fixed z-50 bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto",style:{top:R.top,left:R.left,width:"280px"},children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)(u,{icon:(0,a.jsx)(l.UEl,{className:"text-blue-500"}),label:"Heading",description:"Big section heading",onClick:()=>V("heading")}),(0,a.jsx)(u,{icon:(0,a.jsx)("div",{className:"w-4 h-4 bg-gray-400 rounded-sm"}),label:"Text",description:"Just start writing with plain text",onClick:()=>V("text")}),(0,a.jsx)(u,{icon:(0,a.jsx)(l.JwJ,{className:"text-gray-500"}),label:"Quote",description:"Capture a quote with attribution",onClick:()=>V("quote")}),(0,a.jsx)(u,{icon:(0,a.jsx)(l.v5n,{className:"text-purple-500"}),label:"Bulleted List",description:"Create a simple bulleted list",onClick:()=>V("list")}),(0,a.jsx)(u,{icon:(0,a.jsx)(l.lfF,{className:"text-purple-500"}),label:"Numbered List",description:"Create a list with numbering",onClick:()=>{let e=k.length;w([...k,{id:"block-".concat(Date.now(),"-").concat(Math.random()),type:"list",content:{items:[""],ordered:!0},position:e}]),L(!1)}}),(0,a.jsx)(u,{icon:(0,a.jsx)(l.FSj,{className:"text-green-500"}),label:"Code",description:"Capture a code snippet",onClick:()=>V("code")}),(0,a.jsx)(u,{icon:(0,a.jsx)(l.dkL,{className:"text-blue-500"}),label:"Image",description:"Upload or embed with a link",onClick:()=>V("image")}),(0,a.jsx)(u,{icon:(0,a.jsx)(l.HiP,{className:"text-red-500"}),label:"Video",description:"Embed from YouTube, Vimeo, etc.",onClick:()=>V("video")}),(0,a.jsx)(u,{icon:(0,a.jsx)(l.AnD,{className:"text-indigo-500"}),label:"Web Bookmark",description:"Save a link to any page on the web",onClick:()=>V("embed")}),(0,a.jsx)(u,{icon:(0,a.jsx)(l.ist,{className:"text-green-500"}),label:"Table",description:"Add a table with rows and columns",onClick:()=>V("table")}),(0,a.jsx)(u,{icon:(0,a.jsx)(l.__w,{className:"text-blue-500"}),label:"Callout",description:"Make writing stand out",onClick:()=>V("callout")}),(0,a.jsx)(u,{icon:(0,a.jsx)(l.iu5,{className:"text-gray-400"}),label:"Divider",description:"Visually divide blocks",onClick:()=>V("divider")})]})})]})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Note not found"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The note you're looking for doesn't exist or has been deleted."}),(0,a.jsxs)(i.Qf,{onClick:()=>e.push("/notes"),children:[(0,a.jsx)(l.QVr,{className:"mr-2"}),"Back to Notes"]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6711,3464,3568,6153,2055,8441,1684,7358],()=>t(50484)),_N_E=e.O()}]);