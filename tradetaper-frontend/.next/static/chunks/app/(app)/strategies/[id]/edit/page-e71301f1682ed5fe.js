(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2138],{17796:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(95155),s=r(12115),n=r(35695),o=r(43082),i=r(73853),l=r(10351),c=r(12515);function d(e){let{title:t,description:r}=e;return(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t}),r&&(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:r})]})}function u(){var e;let t=(0,n.useParams)(),r=(0,n.useRouter)(),[u,g]=(0,s.useState)(null),[h,y]=(0,s.useState)(!0),[m,b]=(0,s.useState)(!1),[x,p]=(0,s.useState)(null),[f,v]=(0,s.useState)("");(0,s.useEffect)(()=>{t.id&&k(t.id)},[t.id]);let k=async e=>{try{y(!0);let t=await o.P.getStrategy(e);g(t)}catch(e){p("Failed to load strategy"),console.error("Error loading strategy:",e)}finally{y(!1)}},j=async e=>{if(e.preventDefault(),u){b(!0);try{let e={name:u.name,description:u.description,checklist:u.checklist,tradingSession:u.tradingSession,isActive:u.isActive,color:u.color,tags:u.tags};await o.P.updateStrategy(u.id,e),r.push("/strategies/".concat(u.id))}catch(e){console.error("Error updating strategy:",e)}finally{b(!1)}}},w=()=>{if(f.trim()&&u){var e;let t={id:Date.now().toString(),text:f.trim(),completed:!1,order:(null==(e=u.checklist)?void 0:e.length)||0};g(e=>e?{...e,checklist:[...e.checklist||[],t]}:null),v("")}},N=e=>{g(t=>{var r;return t?{...t,checklist:(null==(r=t.checklist)?void 0:r.filter(t=>t.id!==e))||[]}:null})},S=(e,t)=>{g(r=>{var a;return r?{...r,checklist:(null==(a=r.checklist)?void 0:a.map(r=>r.id===e?{...r,text:t}:r))||[]}:null})};return h?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(i.kt,{})}):x||!u?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-red-600 dark:text-red-400 mb-4",children:x||"Strategy not found"}),(0,a.jsx)("button",{onClick:()=>r.back(),className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Go Back"})]}):(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,a.jsx)(d,{title:"Edit Strategy",description:"Modify your ".concat(u.name," strategy")}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Basic Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Strategy Name *"}),(0,a.jsx)("input",{type:"text",value:u.name,onChange:e=>g(t=>t?{...t,name:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Breakout Scalping, Trend Following",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:u.description||"",onChange:e=>g(t=>t?{...t,description:e.target.value}:null),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Describe your strategy, rules, and methodology..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Trading Session"}),(0,a.jsxs)("select",{value:u.tradingSession||"",onChange:e=>g(t=>t?{...t,tradingSession:e.target.value||null}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Select session"}),(0,a.jsx)("option",{value:"london",children:"London"}),(0,a.jsx)("option",{value:"newyork",children:"New York"}),(0,a.jsx)("option",{value:"asia",children:"Asia"}),(0,a.jsx)("option",{value:"sydney",children:"Sydney"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),(0,a.jsx)("input",{type:"color",value:u.color,onChange:e=>g(t=>t?{...t,color:e.target.value}:null),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),(0,a.jsx)("input",{type:"text",value:u.tags||"",onChange:e=>g(t=>t?{...t,tags:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"scalping, momentum, reversal (comma separated)"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"isActive",checked:u.isActive,onChange:e=>g(t=>t?{...t,isActive:e.target.checked}:null),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Strategy is active"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Trading Checklist"}),(0,a.jsxs)("div",{className:"space-y-3",children:[null==(e=u.checklist)?void 0:e.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,a.jsx)(c.LUV,{className:"text-gray-400 flex-shrink-0"}),(0,a.jsx)("input",{type:"text",value:e.text,onChange:t=>S(e.id,t.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Checklist item..."}),(0,a.jsx)("button",{type:"button",onClick:()=>N(e.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:(0,a.jsx)(l.IXo,{className:"w-4 h-4"})})]},e.id)),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("input",{type:"text",value:f,onChange:e=>v(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),w()),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Add checklist item..."}),(0,a.jsx)("button",{type:"button",onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:(0,a.jsx)(l.GGD,{className:"w-4 h-4"})})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>r.back(),className:"px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:m||!u.name.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Saving...":"Save Changes"})]})]})]})}},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},43082:(e,t,r)=>{"use strict";r.d(t,{P:()=>n});let a="https://tradetaper-backend-481634875325.us-central1.run.app/api/v1";class s{async getAuthHeaders(){let e=localStorage.getItem("token");return{"Content-Type":"application/json",...e&&{Authorization:"Bearer ".concat(e)}}}async getStrategies(){let e=await fetch("".concat(a,"/strategies"),{headers:await this.getAuthHeaders()});if(!e.ok)throw Error("Failed to fetch strategies");return e.json()}async getStrategiesWithStats(){let e=await fetch("".concat(a,"/strategies/with-stats"),{headers:await this.getAuthHeaders()});if(!e.ok)throw Error("Failed to fetch strategies with stats");return e.json()}async getStrategy(e){let t=await fetch("".concat(a,"/strategies/").concat(e),{headers:await this.getAuthHeaders()});if(!t.ok)throw Error("Failed to fetch strategy");return t.json()}async getStrategyStats(e){let t=await fetch("".concat(a,"/strategies/").concat(e,"/stats"),{headers:await this.getAuthHeaders()});if(!t.ok)throw Error("Failed to fetch strategy stats");return t.json()}async createStrategy(e){let t=await fetch("".concat(a,"/strategies"),{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create strategy");return t.json()}async updateStrategy(e,t){let r=await fetch("".concat(a,"/strategies/").concat(e),{method:"PATCH",headers:await this.getAuthHeaders(),body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to update strategy");return r.json()}async toggleStrategyActive(e){let t=await fetch("".concat(a,"/strategies/").concat(e,"/toggle-active"),{method:"PATCH",headers:await this.getAuthHeaders()});if(!t.ok)throw Error("Failed to toggle strategy active status");return t.json()}async deleteStrategy(e){if(!(await fetch("".concat(a,"/strategies/").concat(e),{method:"DELETE",headers:await this.getAuthHeaders()})).ok)throw Error("Failed to delete strategy")}}let n=new s},73853:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>l,eO:()=>i,kt:()=>o});var a=r(95155);r(12115);let s={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},n={primary:"border-accent-blue",secondary:"border-gray-400",accent:"border-accent-green"};function o(e){let{size:t="md",color:r="primary",text:o,className:i=""}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center ".concat(i),children:[(0,a.jsx)("div",{className:"\n          ".concat(s[t]," \n          ").concat(n[r]," \n          border-2 border-t-transparent rounded-full animate-spin\n        ")}),o&&(0,a.jsx)("p",{className:"mt-2 text-sm text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:o})]})}function i(e){let{text:t="Loading data..."}=e;return(0,a.jsx)("div",{className:"py-10 text-center",children:(0,a.jsx)(o,{size:"md",text:t})})}let l=o},74436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var a=r(12115),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=a.createContext&&a.createContext(s),o=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var a,s,n;a=e,s=t,n=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>a.createElement(u,i({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:s,size:n,title:l}=e,d=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,o),u=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),l&&a.createElement("title",null,l),e.children)};return void 0!==n?a.createElement(n.Consumer,null,e=>t(e)):t(s)}},88896:(e,t,r)=>{Promise.resolve().then(r.bind(r,17796))}},e=>{var t=t=>e(e.s=t);e.O(0,[844,5479,8441,1684,7358],()=>t(88896)),_N_E=e.O()}]);