(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1536],{29132:(e,t,a)=>{Promise.resolve().then(a.bind(a,98711))},56051:(e,t,a)=>{"use strict";a.d(t,{PW:()=>r,d1:()=>l,w_:()=>s});var r=function(e){return e.STOCK="Stock",e.CRYPTO="Crypto",e.FOREX="Forex",e.COMMODITIES="Commodities",e.FUTURES="Futures",e.OPTIONS="Options",e}({}),s=function(e){return e.LONG="Long",e.SHORT="Short",e}({}),l=function(e){return e.OPEN="Open",e.CLOSED="Closed",e.PENDING="Pending",e.CANCELLED="Cancelled",e}({})},71079:(e,t,a)=>{"use strict";a.d(t,{e:()=>l});var r=a(95155);a(12115);var s=a(95557);let l=e=>{let{amount:t,fromCurrency:a="USD",className:l="",showOriginal:n=!1,precision:o}=e,{formatCurrency:i,selectedCurrency:d,convertAmount:c}=(0,s.H2)();if(0===t)return(0,r.jsx)("span",{className:l,children:"0"});if(isNaN(t))return(0,r.jsx)("span",{className:l,children:"-"});let x=i(t,a);c(t,a);let m=n&&a!==d;return(0,r.jsxs)("span",{className:l,title:m?"Original: ".concat(t.toFixed(o||2)," ").concat(a):void 0,children:[x,m&&(0,r.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1",children:["(",t.toFixed(o||2)," ",a,")"]})]})}},76233:(e,t,a)=>{"use strict";a.d(t,{Fj:()=>x,Q0:()=>f,T9:()=>v,TR:()=>g,cu:()=>m,f6:()=>p,pD:()=>c,tL:()=>u,yG:()=>i});var r=a(56051),s=a(32620),l=a(66848),n=a(3898),o=a(50007);function i(e){let t=e.filter(e=>e.status===r.d1.CLOSED&&void 0!==e.profitOrLoss&&e.exitDate).sort((e,t)=>new Date(e.exitDate).getTime()-new Date(t.exitDate).getTime()),a=0,s=0,l=0,n=0,o=0,i=0,d=0,c=[],x=0,m=0,g=0,u=0;t.forEach(e=>{let t=e.profitOrLoss;c.push(t),a+=t,s+=e.commission||0,t>0?(l++,i+=t,t>g&&(g=t)):t<0?(n++,d+=t,t<u&&(u=t)):o++,void 0!==e.rMultiple&&null!==e.rMultiple&&(x+=e.rMultiple,m++)});let h=l+n+o,f=h>0?l/h:0,b=h>0?n/h:0,p=l>0?i/l:0,v=n>0?d/n:0,y=f*p-b*Math.abs(v),j=function(e){if(0===e.length)return 0;let t=0,a=0,r=0;for(let s of e){(r+=s)>a&&(a=r);let e=a>0?(a-r)/a:0;e>t&&(t=e)}return 100*t}(c),N=m>0?x/m:0,k=a;return{totalTrades:e.length,openTrades:e.filter(e=>e.status===r.d1.OPEN||e.status===r.d1.PENDING).length,closedTrades:t.length,winningTrades:l,losingTrades:n,breakevenTrades:o,totalNetPnl:a,totalCommissions:s,winRate:100*f,lossRate:100*b,averageWin:p,averageLoss:v,profitFactor:0!==d?Math.abs(i/d):i>0?1/0:0,expectancy:y,maxDrawdown:j,currentBalance:k,averageRR:N,largestWin:g,largestLoss:u}}function d(e,t){return{tag:t,...i(e)}}function c(e){let t={};return e.forEach(e=>{if(e.status===r.d1.CLOSED&&void 0!==e.profitOrLoss&&e.exitDate){let a=(0,s.GP)(new Date(e.exitDate),"yyyy-MM-dd");t[a]||(t[a]={pnl:0,tradeCount:0}),t[a].pnl+=e.profitOrLoss,t[a].tradeCount++}}),t}function x(e){let t=e.filter(e=>e.status===r.d1.CLOSED&&void 0!==e.profitOrLoss&&e.exitDate).sort((e,t)=>new Date(e.exitDate).getTime()-new Date(t.exitDate).getTime()),a=0,s=t.map(e=>(a+=e.profitOrLoss,{date:e.exitDate,value:a}));if(s.length>0){let e=new Date(s[0].date);return[{date:new Date(e.setDate(e.getDate()-1)).toISOString(),value:0},...s]}return[{date:new Date().toISOString(),value:0}]}function m(e){let t={};return e.forEach(e=>{if(e.tags&&e.tags.length>0)e.tags.forEach(a=>{let r=a.name||"Unnamed Tag";t[r]||(t[r]=[]),t[r].push(e)});else{let a="Uncategorized";t[a]||(t[a]=[]),t[a].push(e)}}),Object.entries(t).map(e=>{let[t,a]=e;return d(a,t)}).sort((e,t)=>t.totalNetPnl-e.totalNetPnl)}function g(e){let t={};return e.forEach(e=>{let a=e.assetType||"Unknown Asset";t[a]||(t[a]=[]),t[a].push(e)}),Object.entries(t).map(e=>{let[t,a]=e;return d(a,t)}).sort((e,t)=>t.totalNetPnl-e.totalNetPnl)}function u(e){let t={};return e.forEach(e=>{var a;let r=(null==(a=e.symbol)?void 0:a.toUpperCase())||"Unknown Symbol";t[r]||(t[r]=[]),t[r].push(e)}),Object.entries(t).map(e=>{let[t,a]=e;return d(a,t)}).sort((e,t)=>t.totalNetPnl-e.totalNetPnl)}let h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function f(e){let t={};return h.forEach(e=>{t[e]=[]}),e.filter(e=>e.status===r.d1.CLOSED&&e.exitDate).forEach(e=>{t[h[(0,l.P)(new Date(e.exitDate))]].push(e)}),h.map(e=>d(t[e],e))}let b=["Intraday (<1 Day)","Short-Term (1-7 Days)","Medium-Term (1-4 Weeks)","Long-Term (1-3 Months)","Very Long-Term (>3 Months)","Unknown Duration"];function p(e){let t={};return b.forEach(e=>{t[e]=[]}),e.filter(e=>e.status===r.d1.CLOSED&&e.entryDate&&e.exitDate).forEach(e=>{let a=function(e){if(e.status!==r.d1.CLOSED||!e.entryDate||!e.exitDate)return"Unknown Duration";let t=new Date(e.entryDate),a=new Date(e.exitDate);if((0,n.r)(t,a))return"Intraday (<1 Day)";let s=(0,o.m)(a,t);return s<=0?"Intraday (<1 Day)":s<=7?"Short-Term (1-7 Days)":s<=28?"Medium-Term (1-4 Weeks)":s<=90?"Long-Term (1-3 Months)":"Very Long-Term (>3 Months)"}(e);t[a]&&t[a].push(e)}),b.map(e=>d(t[e]||[],e)).filter(e=>e.totalTrades>0||"Unknown Duration"===e.tag)}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,s=e.filter(e=>e.status===r.d1.CLOSED&&"number"==typeof e.profitOrLoss);if(0===s.length)return[];let l=s.map(e=>e.profitOrLoss),n=Math.min(...l),o=Math.max(...l);n===o&&(0===o?(n=-1,o=1):(n=o-Math.abs(.1*o||1),o+=Math.abs(.1*o||1))),o-n<1&&o-n>-1&&o-n!=0&&(n=Math.floor(n)-1,o=Math.ceil(o)+1);let i=a||(o-n)/t;if(i<=0)return[{name:"".concat(n.toFixed(2)," to ").concat(o.toFixed(2)),count:s.length,minPnl:n,maxPnl:o}];let d=[];for(let e=0;e<t;e++){let t=n+e*i,a=n+(e+1)*i;d.push({name:"".concat(t.toFixed(0)," to ").concat(a.toFixed(0)),count:0,minPnl:t,maxPnl:a})}return d.length>0&&d[d.length-1].maxPnl<o&&(d[d.length-1].maxPnl=o,d[d.length-1].name="".concat(d[d.length-1].minPnl.toFixed(0)," to ").concat(d[d.length-1].maxPnl.toFixed(0))),l.forEach(e=>{for(let t of d)if(e>=t.minPnl&&(e<t.maxPnl||t===d[d.length-1]&&e<=t.maxPnl)){t.count++;break}}),d.filter(e=>e.count>0)}},98711:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>X});var r=a(95155),s=a(12115),l=a(34540),n=a(23352),o=a(70392),i=a(96787),d=a(76233),c=a(37049),x=a(29911);function m(e){let{title:t,children:a,className:s="",icon:l,showInfoIcon:n=!1,showMenuIcon:o=!1,showTimeRangeSelector:i=!1,timeRangeOptions:d=["7d","1M","3M","1Y","All"],selectedTimeRange:c="7d",onTimeRangeChange:m,gridSpan:g="col-span-1"}=e;return(0,r.jsxs)("div",{className:"group relative bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-1 overflow-hidden ".concat(g," ").concat(s),children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-green-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,r.jsxs)("div",{className:"relative z-10 flex items-center justify-between p-6 border-b border-gray-200/30 dark:border-gray-700/30",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[l&&(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-green-500/20 rounded-xl",children:(0,r.jsx)(l,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t}),(0,r.jsx)("div",{className:"w-8 h-0.5 bg-gradient-to-r from-blue-500 to-green-500 mt-1"})]}),n&&(0,r.jsx)("button",{className:"p-1.5 rounded-lg text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:(0,r.jsx)(x.__w,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[i&&(0,r.jsx)("div",{className:"flex items-center bg-gray-100/80 dark:bg-gray-800/80 p-1 rounded-xl backdrop-blur-sm",children:d.map(e=>(0,r.jsx)("button",{onClick:()=>m&&m(e),className:"px-3 py-1.5 text-xs font-medium rounded-lg transition-all duration-200 ".concat(c===e?"bg-gradient-to-r from-blue-500 to-green-500 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white/80 dark:hover:bg-gray-700/80"),children:e},e))}),o&&(0,r.jsx)("button",{className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100/80 dark:hover:bg-gray-800/80 transition-all duration-200",children:(0,r.jsx)(x.HFM,{className:"w-4 h-4"})})]})]}),(0,r.jsx)("div",{className:"relative z-10 p-6",children:a}),(0,r.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400/10 to-green-400/10 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})}var g=a(52436),u=a(31246),h=a(56051),f=a(9107),b=a(98794),p=a(57716),v=a(32620),y=a(71079),j=a(83540),N=a(93504),k=a(94517),w=a(21374),T=a(62341),C=a(51382),D=a(94754),S=a(96025),P=a(16238),L=a(34098),O=a(57335),F=a(67555);function R(e){let{isOpen:t,onClose:a,currentGoal:l,onSave:n,title:o="Set Your Personal Target"}=e,[i,d]=(0,s.useState)(l.toString());return((0,s.useEffect)(()=>{d(l.toString())},[l,t]),t)?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-md flex items-center justify-center p-4 z-[100] transition-opacity duration-300 ease-in-out",onClick:a,children:(0,r.jsxs)("div",{className:"bg-[var(--color-light-primary)] dark:bg-dark-secondary rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-lg transform transition-all duration-300 ease-in-out scale-100 opacity-100 dark:shadow-card-modern",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-[var(--color-text-dark-primary)] dark:text-text-light-primary",children:o}),(0,r.jsx)("button",{onClick:a,className:"text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary hover:text-accent-red dark:hover:text-accent-red p-1 rounded-full transition-colors","aria-label":"Close modal",children:(0,r.jsx)(x.QCr,{size:22})})]}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"goalAmount",className:"block text-sm font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary mb-1.5",children:"Target Goal Amount ($)"}),(0,r.jsx)("input",{type:"number",id:"goalAmount",name:"goalAmount",value:i,onChange:e=>d(e.target.value),placeholder:"e.g., 1000",className:"w-full px-4 py-3 border border-[var(--color-light-border)] dark:border-dark-primary rounded-lg focus:ring-2 focus:ring-accent-green focus:border-transparent outline-none transition-colors bg-transparent text-[var(--color-text-dark-primary)] dark:text-text-light-primary placeholder:text-[var(--color-text-dark-placeholder)] dark:placeholder:text-[var(--color-text-light-placeholder)] shadow-sm text-base",autoFocus:!0})]})}),(0,r.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:a,className:"w-full sm:w-auto px-6 py-3 text-sm font-semibold rounded-lg border border-[var(--color-light-border)] dark:border-dark-primary hover:bg-[var(--color-light-hover)] dark:hover:bg-dark-hover text-[var(--color-text-dark-primary)] dark:text-text-light-primary transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-green dark:focus:ring-offset-dark-secondary shadow-sm",children:"Cancel"}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e=parseFloat(i);!isNaN(e)&&e>0?(n(e),a()):alert("Please enter a valid positive number for the goal.")},className:"w-full sm:w-auto px-6 py-3 text-sm font-semibold rounded-lg bg-accent-green text-dark-primary hover:bg-accent-green-darker transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-green dark:focus:ring-offset-dark-secondary shadow-md hover:shadow-lg",children:"Save Target"})]})]})}):null}var M=a(21001),E=a.n(M),A=a(6711),I=a(94458),G=a(6262);function B(e){let{trades:t,onDateClick:a}=e,l=(0,A.o)(new Date),n=(0,I.d)(l,1),o=(0,s.useMemo)(()=>{if(!t||0===t.length)return[];let e={};return t.forEach(t=>{let a=t.status===h.d1.CLOSED&&t.exitDate?t.exitDate:t.entryDate;if(a)try{let r=(0,G.x)((0,A.o)((0,b.H)(a)),{representation:"date"}),s=t.profitOrLoss||0;e[r]||(e[r]={count:0,totalPnl:0}),e[r].count+=1,e[r].totalPnl+=s}catch(e){console.error("Error processing trade date for heatmap:",a,e)}}),Object.entries(e).map(e=>{let[t,a]=e;return{date:t,count:a.count,totalPnl:a.totalPnl}})},[t]),i=e=>t.filter(t=>{let a=t.status===h.d1.CLOSED&&t.exitDate?t.exitDate:t.entryDate;if(!a)return!1;try{return(0,G.x)((0,A.o)((0,b.H)(a)),{representation:"date"})===e}catch(e){return!1}});return(0,r.jsx)("div",{className:"p-1 sm:p-3 h-full flex flex-col rounded-lg min-h-[180px] sm:min-h-[200px]",children:(0,r.jsx)(E(),{startDate:n,endDate:l,values:o,classForValue:e=>{if(!e||!e.date||0===e.count||void 0===e.totalPnl)return"color-empty";let t=Math.min(Math.ceil(e.count/2),4);return(1===e.count&&(t=1),0===e.count&&(t=0),e.totalPnl>0)?"color-scale-green-".concat(t):e.totalPnl<0?"color-scale-red-".concat(t):"color-scale-neutral-".concat(t)},showWeekdayLabels:!0,monthLabels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],onClick:e=>{if(e&&e.date&&void 0!==e.totalPnl&&e.count>0&&a){let t=i(e.date);a(e,t)}},gutterSize:2})})}function W(e){let{isOpen:t,onClose:a,selectedDate:s,tradesForDate:l}=e;return t&&s?(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 px-6 py-4 border-b border-gray-200 dark:border-gray-600 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(x.bfZ,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Trading Activity - ",(0,v.GP)((0,b.H)(s.date),"MMMM d, yyyy")]})]}),(0,r.jsx)("button",{onClick:a,className:"p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:(0,r.jsx)(x.QCr,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,r.jsx)(x.yk7,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.count}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:1===s.count?"Trade":"Trades"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,r.jsx)(x.YYR,{className:"w-5 h-5 ".concat(s.totalPnl>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")})}),(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(s.totalPnl>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:(0,r.jsx)(y.e,{amount:s.totalPnl,className:"inline"})}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Net P&L"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,r.jsx)(x.YYR,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(0,r.jsx)(y.e,{amount:s.count>0?s.totalPnl/s.count:0,className:"inline"})}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg P&L"})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Individual Trades"}),l.map((e,t)=>(0,r.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:e.symbol}),(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("Long"===e.direction?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:e.direction}),(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("Closed"===e.status?"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"),children:e.status})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Entry: ",(0,r.jsx)(y.e,{amount:e.entryPrice,className:"inline"}),e.exitPrice&&(0,r.jsxs)(r.Fragment,{children:[" • Exit: ",(0,r.jsx)(y.e,{amount:e.exitPrice,className:"inline"})]}),e.quantity&&(0,r.jsxs)(r.Fragment,{children:[" • Qty: ",e.quantity.toLocaleString()]})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("div",{className:"text-lg font-bold ".concat((e.profitOrLoss||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[(e.profitOrLoss||0)>=0?"+":"",(0,r.jsx)(y.e,{amount:e.profitOrLoss||0,className:"inline"})]})})]})},e.id))]})]})]})}):null}function z(e){let{trades:t,topN:a=3}=e,l=(0,s.useMemo)(()=>{if(!t||0===t.length)return[];let e=t.filter(e=>e.status===h.d1.CLOSED&&void 0!==e.profitOrLoss);return e.sort((e,t)=>{var a,r;return(null!=(a=t.profitOrLoss)?a:0)-(null!=(r=e.profitOrLoss)?r:0)}),e.slice(0,a).map(e=>{var t;return{id:e.id,symbol:e.symbol,profitOrLoss:e.profitOrLoss,rMultiple:e.rMultiple,assetType:null==(t=e.assetType)?void 0:t.toString()}})},[t,a]),n=t&&t.length>0,o=l.length>0,i=e=>"".concat(e>=0?"+":"-","$").concat(Math.abs(e).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),d=e=>void 0===e?null:"".concat((100*e).toFixed(2),"%");return(0,r.jsx)("div",{className:"h-full flex flex-col min-h-[200px]",children:n?o?(0,r.jsx)("div",{className:"space-y-3 overflow-y-auto flex-grow pr-1",children:l.map(e=>{var t;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-md bg-[var(--color-light-secondary)] dark:bg-dark-primary",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-1.5 h-6 rounded-full mr-2.5 ".concat(e.profitOrLoss>=0?"bg-green-500":"bg-red-500")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-[var(--color-text-dark-primary)] dark:text-text-light-primary truncate",children:e.symbol}),e.assetType&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[e.assetType," "]})]})]}),(0,r.jsxs)("div",{className:"text-right flex flex-col items-end",children:[(0,r.jsx)("p",{className:"text-sm font-semibold ".concat(e.profitOrLoss>=0?"text-green-500":"text-red-500"),children:i(e.profitOrLoss)}),void 0!==e.rMultiple&&(0,r.jsxs)("div",{className:"text-xs flex items-center ".concat(e.profitOrLoss>=0?"text-green-500":"text-red-500"),children:[e.profitOrLoss>=0?(0,r.jsx)(x.uCC,{className:"mr-0.5 h-2.5 w-2.5"}):(0,r.jsx)(x.$TP,{className:"mr-0.5 h-2.5 w-2.5"}),null!=(t=d(e.rMultiple))?t:"N/A"]})]})]},e.id)})}):(0,r.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-sm text-center text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:"No closed trades with P&L found in the selected period."})}):(0,r.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-sm text-center text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:"No trading data available for the selected period."})})})}a(55382);var Y=a(53231),U=a(3898),$=a(70542),H=a(32944),_=a(84423),Q=a(72794),K=a(80079),q=a(37223),J=a(48882);function Z(e){let{trades:t}=e,[a,l]=(0,s.useState)((0,Y.w)(new Date)),[n,o]=(0,s.useState)((0,A.o)(new Date)),i=(0,s.useMemo)(()=>{let e={};return t&&t.forEach(t=>{if(t.status===h.d1.CLOSED&&t.exitDate&&void 0!==t.profitOrLoss)try{let a=(0,G.x)((0,A.o)((0,b.H)(t.exitDate)),{representation:"date"});e[a]||(e[a]={pnl:0,tradeCount:0,trades:[]}),e[a].pnl+=t.profitOrLoss,e[a].tradeCount+=1,e[a].trades.push(t)}catch(e){console.error("Error processing trade for P&L calendar:",t,e)}}),e},[t]);(0,s.useEffect)(()=>{let e=(0,A.o)(new Date);if((0,U.r)(n,e)&&!i[(0,G.x)(e,{representation:"date"})]){let e=Object.keys(i).map(e=>(0,b.H)(e)).filter(e=>(0,$.t)(e,a)).sort((e,t)=>t.getTime()-e.getTime());e.length>0&&o(e[0])}},[i,a]);let d=(0,s.useMemo)(()=>{let e=(0,Y.w)(a),t=(0,H.p)(a),r=(0,_.k)(e,{weekStartsOn:1}),s=(0,Q.$)(t,{weekStartsOn:1});return(0,K.k)({start:r,end:s})},[a]),c=(e,t)=>{if((0,U.r)(e,n))return"bg-blue-500 text-white";if(!(0,$.t)(e,a))return"text-gray-400 dark:text-gray-500";if(t){if(t.pnl>0)return"bg-green-500 text-white";if(t.pnl<0)return"bg-red-500 text-white"}return"bg-gray-100 dark:bg-gray-700/50 hover:bg-gray-200 dark:hover:bg-gray-600/50"},m=i[(0,G.x)(n,{representation:"date"})],g=(0,s.useMemo)(()=>{if(!m||0===m.tradeCount)return{winRate:0,totalReturn:0,returnOnWinners:0,returnOnLosers:0,winTradesCount:0,lossTradesCount:0,breakevenTradesCount:0};let e=m.trades,t=0,a=0,r=0,s=0,l=0;e.forEach(e=>{e.profitOrLoss&&e.profitOrLoss>0?(t++,s+=e.profitOrLoss):e.profitOrLoss&&e.profitOrLoss<0?(a++,l+=e.profitOrLoss):r++});let n=t+a+r;return{winRate:n>0?t/n*100:0,totalReturn:m.pnl,returnOnWinners:s,returnOnLosers:l,winTradesCount:t,lossTradesCount:a,breakevenTradesCount:r,totalTrades:n}},[m]),u="p-1.5 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary focus:outline-none focus:ring-1 focus:ring-blue-500";return(0,r.jsxs)("div",{className:"flex flex-col md:flex-row text-[var(--color-text-dark-primary)] dark:text-text-light-primary min-h-[300px] max-h-[320px] md:max-h-[300px]",children:[(0,r.jsxs)("div",{className:"flex-grow md:w-2/3 ".concat("p-2.5 rounded-lg bg-[var(--color-light-secondary)] dark:bg-dark-primary"," flex flex-col"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2.5 px-0.5",children:[(0,r.jsx)("button",{onClick:()=>l((0,q.a)(a,1)),className:u,"aria-label":"Previous month",children:(0,r.jsx)(x._Jj,{className:"h-3 w-3"})}),(0,r.jsxs)("button",{className:"px-3 py-1.5 text-xs font-semibold rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 text-[var(--color-text-dark-primary)] dark:text-text-light-primary flex items-center focus:outline-none focus:ring-1 focus:ring-blue-500","aria-label":"Select month and year",children:[(0,r.jsx)(x.bfZ,{className:"h-3.5 w-3.5 mr-1.5 opacity-70"}),(0,v.GP)(a,"MMMM yyyy")]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("button",{onClick:()=>l((0,J.P)(a,1)),className:u,"aria-label":"Next month",children:(0,r.jsx)(x.X6T,{className:"h-3 w-3"})}),(0,r.jsx)("button",{className:"".concat(u," ml-1"),"aria-label":"More options",children:(0,r.jsx)(x.HFM,{className:"h-3.5 w-3.5"})})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-0.5 text-center text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:["Mo","Tu","We","Th","Fr","Sa","Su"].map(e=>(0,r.jsx)("div",{children:e},e))}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-0.5 flex-grow",children:d.map(e=>{let t=(0,G.x)(e,{representation:"date"}),s=c(e,i[t]),l=(0,$.t)(e,a);return(0,r.jsx)("button",{onClick:()=>{o(e)},className:"h-7 w-full rounded-sm flex items-center justify-center text-xs font-medium transition-colors duration-150 focus:outline-none focus:ring-1 focus:ring-blue-500 p-0.5\n                            ".concat(s,"\n                            ").concat(l||(0,U.r)(e,n)?"":"opacity-50 text-gray-400 dark:text-gray-600"),children:(0,v.GP)(e,"d")},t)})})]}),(0,r.jsxs)("div",{className:"md:w-1/3 ".concat("p-3 rounded-lg bg-[var(--color-light-secondary)] dark:bg-dark-primary md:ml-4 mt-4 md:mt-0"," flex flex-col text-xs"),children:[(0,r.jsx)("h4",{className:"text-sm font-semibold mb-2.5 border-b border-[var(--color-light-border)] dark:border-gray-700 pb-1.5",children:(0,v.GP)(n,"dd MMMM yyyy")}),m?(0,r.jsxs)("div",{className:"space-y-1.5 flex-grow",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total trades"}),(0,r.jsx)("span",{children:g.totalTrades})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Winrate"}),(0,r.jsxs)("span",{className:g.winRate>=50?"text-green-500 font-semibold":"text-red-500 font-semibold",children:[g.winRate.toFixed(0),"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Return"}),(0,r.jsxs)("span",{className:g.totalReturn>=0?"text-green-500 font-semibold":"text-red-500 font-semibold",children:["$",g.totalReturn.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Return on winners"}),(0,r.jsxs)("span",{className:"text-green-500 font-semibold",children:["$",g.returnOnWinners.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Return on losers"}),(0,r.jsxs)("span",{className:"text-red-500 font-semibold",children:["$",g.returnOnLosers.toFixed(2)]})]}),(0,r.jsx)("div",{className:"pt-1 pb-0.5",children:(0,r.jsxs)("div",{className:"flex h-4 text-[0.6rem] font-semibold rounded-sm overflow-hidden",children:[(0,r.jsxs)("div",{style:{width:"".concat(g.winRate,"%")},className:"bg-green-500 flex items-center justify-center text-white whitespace-nowrap overflow-hidden px-1 shadow-sm",children:["L ",g.winRate.toFixed(0),"%"]}),(0,r.jsxs)("div",{style:{width:"".concat(Math.max(0,100-g.winRate),"%")},className:"bg-red-500 flex items-center justify-center text-white whitespace-nowrap overflow-hidden px-1 shadow-sm",children:["S ",Math.max(0,100-g.winRate).toFixed(0),"%"]})]})}),(0,r.jsxs)("div",{className:"flex justify-between pt-1.5 border-t border-[var(--color-light-border)] dark:border-gray-700",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Win trades"}),(0,r.jsx)("span",{className:"text-green-500 font-semibold",children:g.winTradesCount})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Loss trades"}),(0,r.jsx)("span",{className:"text-red-500 font-semibold",children:g.lossTradesCount})]}),g.breakevenTradesCount>0&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Breakeven trades"}),(0,r.jsx)("span",{children:g.breakevenTradesCount})]})]}):(0,r.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex flex-col items-center justify-center h-full py-6",children:[(0,r.jsx)(x.bfZ,{className:"w-10 h-10 mb-2 opacity-30"}),(0,r.jsxs)("p",{className:"font-medium",children:["No trades on ",(0,v.GP)(n,"dd MMM")]}),(0,r.jsx)("p",{className:"mt-0.5 text-center",children:"Select another day or adjust filters to view P&L details."})]})]})]})}let V={"7d":7,"1M":30,"3M":90,"1Y":365,All:1/0};function X(){var e,t,a;let M=(0,l.wA)(),{trades:E,isLoading:A}=(0,l.d4)(e=>e.trades),{user:I,isAuthenticated:G}=(0,l.d4)(e=>e.auth),Y=(0,l.d4)(o.i7),U=(0,l.d4)(i.kI),$=(0,l.d4)(o.xB);(0,l.d4)(i.Tq);let H=(0,l.d4)(o.G6);(0,l.d4)(i.bw);let{theme:_}=(0,c.D)(),[Q,K]=(0,s.useState)("All"),[q,J]=(0,s.useState)(!1),[X,ee]=(0,s.useState)(!1),[et,ea]=(0,s.useState)(null),[er,es]=(0,s.useState)([]),el=async e=>{if(ec){alert('When "All Accounts" is selected, please set targets for individual accounts in Settings → Manage Accounts'),J(!1);return}if($)try{await M((0,o.RS)({id:$.id,target:e})).unwrap(),J(!1)}catch(e){console.error("Failed to update target:",e),alert("Failed to update target. Please try again.")}else alert("No account selected to update target")};(0,s.useEffect)(()=>{if(G){let e=Y||U;console.log("Dashboard fetchTrades - accountId:",e,"authenticated:",G),M((0,n.Cm)(e||void 0))}},[M,G,Y,U]),(0,s.useEffect)(()=>{console.log("Dashboard trades data:",{tradesCount:(null==E?void 0:E.length)||0,trades:E,isLoading:A,selectedAccountId:Y,selectedMT5AccountId:U})},[E,A,Y,U]);let en=(0,s.useMemo)(()=>{let e=V[Q];if(e===1/0||!E||0===E.length)return console.log("Dashboard filteredTrades - using all trades or empty:",{timeRange:Q,days:e,tradesLength:null==E?void 0:E.length}),E;let t=(0,f.e)(new Date,e),a=E.filter(e=>{let a=e.status===h.d1.CLOSED&&e.exitDate?e.exitDate:e.entryDate;if(!a)return!1;try{let e=(0,b.H)(a);return(0,p.d)(e,t)}catch(e){return console.error("Error parsing trade date:",a,e),!1}});return console.log("Dashboard filteredTrades - filtered result:",{timeRange:Q,originalCount:E.length,filteredCount:a.length,cutOffDate:t.toISOString()}),a},[E,Q]),eo=(0,s.useMemo)(()=>{if(en&&en.length>0){let e=(0,d.yG)(en);return console.log("Dashboard calculateDashboardStats result:",e),e}return console.log("Dashboard no stats - no trades:",{filteredTradesLength:null==en?void 0:en.length}),null},[en]),{personalTargetCurrent:ei,personalTargetGoal:ed,isAllAccountsSelected:ec}=(0,s.useMemo)(()=>{if(!Y&&!U){let e=H.reduce((e,t)=>e+(t.target||0),0)+0;return{personalTargetCurrent:(null==eo?void 0:eo.totalNetPnl)||0,personalTargetGoal:e>0?e:1e3,isAllAccountsSelected:!0}}{let e=(null==$?void 0:$.target)||1e3;return{personalTargetCurrent:(null==eo?void 0:eo.totalNetPnl)||0,personalTargetGoal:e,isAllAccountsSelected:!1}}},[Y,U,$,H,null==eo?void 0:eo.totalNetPnl]),ex=(0,s.useMemo)(()=>{if(en&&en.length>0){let e=(0,d.Fj)(en);if(e.length>0)return e.map(e=>({...e,date:(0,v.GP)(new Date(e.date),"MMM dd")}))}return[{date:(0,v.GP)(new Date,"MMM dd"),value:0}]},[en]),em=(0,s.useMemo)(()=>{var e;let t=null==(e=ex[0])?void 0:e.value,a=null==eo?void 0:eo.currentBalance,r=null==eo?void 0:eo.totalNetPnl,s=0;void 0!==t&&0!==t&&void 0!==a?s=(a-t)/t*100:void 0!==a&&a>0&&0===t&&(s=1/0);let l=0;return void 0!==t&&0!==t&&void 0!==r?l=r/t*100:void 0!==r&&r>0&&0===t&&(l=1/0),{balancePercentageChange:s,roiPercentage:l,initialBalanceForPeriod:t}},[ex,eo]),eg=(0,s.useMemo)(()=>0===ed?0:ei/ed*100,[ei,ed]),eu=(null==eo||null==(e=eo.averageRR)?void 0:e.toFixed(2))||"0.00",eh=(0,s.useMemo)(()=>[{name:"Winrate",value:parseFloat(((null==eo?void 0:eo.winRate)||0).toFixed(1)),fill:"#3B82F6"}],[null==eo?void 0:eo.winRate]),ef=(0,s.useMemo)(()=>{if(!eo||0===eo.closedTrades||!en)return 1;let e=en.filter(e=>e.status===h.d1.CLOSED&&e.exitDate);if(0===e.length)return 1;let t=new Set(e.map(e=>{try{return new Date(e.exitDate).toDateString()}catch(e){return null}}).filter(Boolean));return t.size>0?t.size:1},[en,eo]),eb=(null==eo?void 0:eo.totalCommissions)&&ef?eo.totalCommissions/ef:0,ep=(null==eo?void 0:eo.closedTrades)&&ef?eo.closedTrades/ef:0,ev="dark"===_?"#9CA3AF":"#6B7280";return A&&0===E.length&&!eo?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-green-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,r.jsxs)(g.Ue,{variant:"glass",hoverEffect:"pulse",className:"text-center backdrop-blur-xl bg-white/10 dark:bg-gray-800/10",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500/30 border-t-blue-500 mx-auto mb-4"}),(0,r.jsx)("div",{className:"absolute inset-0 rounded-full bg-blue-500/20 animate-ping"})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-lg font-medium",children:"Loading your trading dashboard..."}),(0,r.jsxs)("div",{className:"mt-4 flex justify-center space-x-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/50 via-white to-green-50/50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,r.jsxs)("div",{className:"space-y-8 relative z-10",children:[(0,r.jsxs)(g.Ue,{variant:"glass",hoverEffect:"glow",className:"text-center space-y-4 bg-white/5 dark:bg-gray-800/5 backdrop-blur-xl border border-white/10 dark:border-gray-700/10",children:[(0,r.jsxs)("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:["Welcome back, ",(null==I?void 0:I.firstName)||(null==I||null==(t=I.email)?void 0:t.split("@")[0])||"Trader","!"]}),(0,r.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Here's your trading performance overview. Track your progress and optimize your strategy."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)(g.Ue,{variant:"gradient",hoverEffect:"lift",delay:.1,className:"bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white overflow-hidden",onClick:()=>{window.location.href="/journal/new"},children:[(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:(0,r.jsx)(x.OiG,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm opacity-80",children:"Quick Action"}),(0,r.jsx)("div",{className:"text-lg font-semibold",children:"Log Trade"})]})]}),(0,r.jsx)("p",{className:"text-blue-100",children:"Record a new trade with all the details"})]}),(0,r.jsx)("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full blur-xl"})]}),(0,r.jsxs)(g.Ue,{variant:"gradient",hoverEffect:"lift",delay:.2,className:"bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white overflow-hidden",onClick:()=>window.location.href="/trades",children:[(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:(0,r.jsx)(x.hko,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm opacity-80",children:"View All"}),(0,r.jsx)("div",{className:"text-lg font-semibold",children:"Journal"})]})]}),(0,r.jsx)("p",{className:"text-green-100",children:"Review your complete trading journal"})]}),(0,r.jsx)("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full blur-xl"})]}),(0,r.jsxs)(g.Ue,{variant:"gradient",hoverEffect:"lift",delay:.3,className:"bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white overflow-hidden",onClick:()=>window.location.href="/analytics",children:[(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:(0,r.jsx)(x.YYR,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm opacity-80",children:"Deep Dive"}),(0,r.jsx)("div",{className:"text-lg font-semibold",children:"Analytics"})]})]}),(0,r.jsx)("p",{className:"text-purple-100",children:"Advanced performance insights"})]}),(0,r.jsx)("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full blur-xl"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-6",children:[(0,r.jsx)(m,{title:"Portfolio Balance",icon:x.lcY,showTimeRangeSelector:!0,selectedTimeRange:Q,onTimeRangeChange:K,gridSpan:"sm:col-span-1 lg:col-span-2",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-baseline space-x-3",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:(0,r.jsx)(y.e,{amount:(null==eo?void 0:eo.currentBalance)||0})}),(0,r.jsxs)("span",{className:"px-2 py-1 rounded-lg text-sm font-medium ".concat(em.balancePercentageChange>=0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[em.balancePercentageChange===1/0?"∞":em.balancePercentageChange.toFixed(2),"%"]})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Initial: ",(0,r.jsx)(y.e,{amount:em.initialBalanceForPeriod||0,className:"inline"})," • Net P&L: ",(0,r.jsx)(y.e,{amount:(null==eo?void 0:eo.totalNetPnl)||0,className:"inline"})]})]}),(0,r.jsx)("div",{className:"h-24",children:(0,r.jsx)(j.u,{width:"100%",height:"100%",children:(0,r.jsxs)(N.b,{data:ex,margin:{top:5,right:0,left:0,bottom:5},children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"balanceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]})}),(0,r.jsx)(k.m,{contentStyle:{backgroundColor:"dark"===_?"rgba(17, 24, 39, 0.9)":"rgba(255, 255, 255, 0.9)",border:"1px solid #E5E7EB",borderRadius:"12px",backdropFilter:"blur(12px)"},labelStyle:{color:ev,fontWeight:"bold"},itemStyle:{color:"#3B82F6"},formatter:(e,t)=>["$".concat(e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),t]}),(0,r.jsx)(w.N,{type:"monotone",dataKey:"value",stroke:"#3B82F6",strokeWidth:3,dot:!1}),(0,r.jsx)(T.G,{type:"monotone",dataKey:"value",stroke:"none",fillOpacity:1,fill:"url(#balanceGradient)"})]})})})]})}),(0,r.jsx)(m,{title:"Personal Target",icon:x.RBv,showInfoIcon:!0,gridSpan:"sm:col-span-1 lg:col-span-2",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:(0,r.jsx)(y.e,{amount:ei})}),(0,r.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["/ ",(0,r.jsx)(y.e,{amount:ed,className:"inline"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(Math.min(eg,100),"%")}})}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("span",{children:"-$1,000"}),(0,r.jsxs)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[eg.toFixed(1),"%"]}),(0,r.jsx)("span",{children:"+$1,000"})]})]}),(0,r.jsx)(u.Qf,{onClick:()=>J(!0),variant:"gradient",size:"lg",fullWidth:!0,className:"bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600",ripple:!0,glow:!0,children:"Update Target"})]})}),(0,r.jsx)(m,{title:"Total Return",icon:x.uCC,showInfoIcon:!0,showTimeRangeSelector:!0,selectedTimeRange:Q,onTimeRangeChange:K,gridSpan:"sm:col-span-1 lg:col-span-2",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-baseline space-x-3",children:[(0,r.jsxs)("div",{className:"text-3xl font-bold ".concat(((null==eo?void 0:eo.totalNetPnl)||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[((null==eo?void 0:eo.totalNetPnl)||0)>=0?"+":"",(0,r.jsx)(y.e,{amount:(null==eo?void 0:eo.totalNetPnl)||0,className:"inline"})]}),(0,r.jsxs)("span",{className:"px-2 py-1 rounded-lg text-sm font-medium ".concat(em.roiPercentage>=0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[em.roiPercentage===1/0?"∞":em.roiPercentage.toFixed(2),"%"]})]}),(0,r.jsx)("div",{className:"space-y-3",children:[{label:"Average Win",value:null==eo?void 0:eo.averageWin,isPositive:!0},{label:"Average Loss",value:null==eo?void 0:eo.averageLoss,isPositive:!1},{label:"Largest Win",value:null==eo?void 0:eo.largestWin,isPositive:!0},{label:"Largest Loss",value:null==eo?void 0:eo.largestLoss,isPositive:!1}].map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.label}),(0,r.jsx)("span",{className:"text-sm font-semibold ".concat(e.isPositive?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:void 0!==e.value&&null!==e.value?(0,r.jsxs)(r.Fragment,{children:[e.isPositive&&e.value>0?"+":"",(0,r.jsx)(y.e,{amount:Math.abs(e.value),className:"inline"})]}):"N/A"})]},e.label))}),(0,r.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-3",children:(0,r.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300 flex items-center",children:[(0,r.jsx)(x.__w,{className:"mr-2 flex-shrink-0"}),"Profit factor: ",(null==eo||null==(a=eo.profitFactor)?void 0:a.toFixed(2))||"N/A",(null==eo?void 0:eo.profitFactor)&&(0,r.jsx)("span",{className:"ml-1",children:eo.profitFactor>=1?" • You earn $".concat(eo.profitFactor.toFixed(2)," per $1 lost"):" • You lose $".concat((1/eo.profitFactor).toFixed(2)," per $1 earned")})]})})]})}),(0,r.jsx)(m,{title:"Equity Curve",icon:x.YYR,showInfoIcon:!0,showTimeRangeSelector:!0,selectedTimeRange:Q,onTimeRangeChange:K,gridSpan:"sm:col-span-2 lg:col-span-3",children:(0,r.jsx)("div",{className:"h-80",children:(0,r.jsx)(j.u,{width:"100%",height:"100%",children:(0,r.jsxs)(C.X,{data:ex,margin:{top:20,right:20,left:0,bottom:20},children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"accountBalanceFillChart",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.05})]})}),(0,r.jsx)(D.d,{stroke:"dark"===_?"#374151":"#E5E7EB",strokeDasharray:"3 3",vertical:!1}),(0,r.jsx)(S.W,{dataKey:"date",stroke:ev,tick:{fontSize:12},axisLine:!1,tickLine:!1}),(0,r.jsx)(P.h,{stroke:ev,tickFormatter:e=>"$".concat((e/1e3).toFixed(0),"k"),tick:{fontSize:12},axisLine:!1,tickLine:!1}),(0,r.jsx)(k.m,{contentStyle:{backgroundColor:"dark"===_?"rgba(17, 24, 39, 0.9)":"rgba(255, 255, 255, 0.9)",border:"1px solid #E5E7EB",borderRadius:"12px",backdropFilter:"blur(12px)"},labelStyle:{color:ev,fontWeight:"bold"},itemStyle:{color:"#3B82F6"},formatter:(e,t)=>["$".concat(e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),t]}),(0,r.jsx)(T.G,{type:"monotone",dataKey:"value",stroke:"#3B82F6",fill:"url(#accountBalanceFillChart)",strokeWidth:3,activeDot:{r:6,strokeWidth:2,stroke:"#3B82F6",fill:"#3B82F6"}})]})})})}),(0,r.jsx)(m,{title:"Win Rate Analysis",icon:x.gdQ,showInfoIcon:!0,showTimeRangeSelector:!0,selectedTimeRange:Q,onTimeRangeChange:K,gridSpan:"sm:col-span-2 lg:col-span-3",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-6 h-full",children:[(0,r.jsxs)("div",{className:"relative w-48 h-48",children:[(0,r.jsx)(j.u,{width:"100%",height:"100%",children:(0,r.jsxs)(L.D,{cx:"50%",cy:"50%",innerRadius:"95%",outerRadius:"130%",barSize:16,data:eh,startAngle:90,endAngle:-270,children:[(0,r.jsx)(O.r,{type:"number",domain:[0,100],angleAxisId:0,tick:!1}),(0,r.jsx)(F.Z,{dataKey:"value",cornerRadius:8,angleAxisId:0,fill:"url(#winrateGradient)"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"winrateGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:"#3B82F6"}),(0,r.jsx)("stop",{offset:"100%",stopColor:"#10B981"})]})})]})}),(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,r.jsxs)("div",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:[((null==eo?void 0:eo.winRate)||0).toFixed(1),"%"]}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Win Rate"})]})]}),(0,r.jsxs)("div",{className:"w-full max-w-xs",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Risk-Reward Ratio"}),(0,r.jsx)("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:eu})]}),(0,r.jsx)("div",{className:"relative h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"absolute top-0 left-0 h-3 bg-gradient-to-r from-blue-500 to-green-500 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(((null==eo?void 0:eo.averageRR)||0)/5*100,100),"%")}})}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(0,r.jsx)("span",{children:"0"}),(0,r.jsx)("span",{children:"2.5"}),(0,r.jsx)("span",{children:"5"})]})]})]})}),(0,r.jsx)(m,{title:"Trading Costs",icon:x.xXS,gridSpan:"sm:col-span-1 lg:col-span-3",showTimeRangeSelector:!0,selectedTimeRange:Q,onTimeRangeChange:K,showInfoIcon:!0,children:(0,r.jsx)("div",{className:"space-y-4",children:[{label:"Total Commissions",value:(null==eo?void 0:eo.totalCommissions)||0,color:"text-gray-900 dark:text-white",isRatio:!1},{label:"Avg Fees per Trade",value:(null==eo?void 0:eo.totalCommissions)&&(null==eo?void 0:eo.closedTrades)?eo.totalCommissions/eo.closedTrades:0,color:"text-gray-900 dark:text-white",isRatio:!1},{label:"P&L to Fees Ratio",value:(null==eo?void 0:eo.totalNetPnl)&&(null==eo?void 0:eo.totalCommissions)&&0!==eo.totalCommissions?eo.totalNetPnl/eo.totalCommissions:0,color:(null==eo?void 0:eo.totalNetPnl)&&(null==eo?void 0:eo.totalCommissions)&&eo.totalNetPnl/eo.totalCommissions<1&&0!==eo.totalCommissions?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400",isRatio:!0},{label:"Avg Fees per Day",value:eb,color:"text-gray-900 dark:text-white",isRatio:!1}].map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e.label}),(0,r.jsx)("span",{className:"text-sm font-bold ".concat(e.color),children:e.isRatio?"number"==typeof e.value?e.value.toFixed(2):"0.00":(0,r.jsx)(y.e,{amount:e.value,className:"inline"})})]},t))})}),(0,r.jsx)(m,{title:"Trade Statistics",icon:x.w8j,gridSpan:"sm:col-span-1 lg:col-span-3",showTimeRangeSelector:!0,selectedTimeRange:Q,onTimeRangeChange:K,showInfoIcon:!0,children:(0,r.jsx)("div",{className:"space-y-4",children:[{label:"Total Trades",value:(null==eo?void 0:eo.closedTrades)||0,color:"text-gray-900 dark:text-white"},{label:"Winning Trades",value:(null==eo?void 0:eo.winningTrades)||0,color:"text-green-600 dark:text-green-400"},{label:"Losing Trades",value:(null==eo?void 0:eo.losingTrades)||0,color:"text-red-600 dark:text-red-400"},{label:"Breakeven Trades",value:(null==eo?void 0:eo.breakevenTrades)||0,color:"text-gray-900 dark:text-white"},{label:"Avg Trades per Day",value:ep.toFixed(2),color:"text-gray-900 dark:text-white"}].map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e.label}),(0,r.jsx)("span",{className:"text-sm font-bold ".concat(e.color),children:e.value})]},t))})}),(0,r.jsx)(m,{title:"Top Performing Trades",icon:x.lfF,gridSpan:"lg:col-span-3",showTimeRangeSelector:!0,selectedTimeRange:Q,onTimeRangeChange:K,showInfoIcon:!0,children:(0,r.jsx)(z,{trades:en,topN:5})}),(0,r.jsx)(m,{title:"P&L Calendar",icon:x.gvq,gridSpan:"lg:col-span-3",showTimeRangeSelector:!1,showInfoIcon:!0,children:(0,r.jsx)(Z,{trades:en})}),(0,r.jsx)(m,{title:"Trading Activity Heatmap",icon:x.bfZ,gridSpan:"lg:col-span-6",showTimeRangeSelector:!0,selectedTimeRange:Q,onTimeRangeChange:K,children:(0,r.jsx)(B,{trades:en,onDateClick:(e,t)=>{ea(e),es(t),ee(!0)}})})]}),(!en||0===en.length)&&!A&&(0,r.jsx)("div",{className:"text-center py-16 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto space-y-4",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center mx-auto",children:(0,r.jsx)(x.YYR,{className:"w-10 h-10 text-white"})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"No trades recorded yet"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Start your trading journey by logging your first trade or adjust the time range to view historical data."}),(0,r.jsx)(u.Qf,{onClick:()=>{window.location.href="/journal/new"},variant:"gradient",size:"lg",icon:(0,r.jsx)(x.OiG,{className:"w-4 h-4"}),iconPosition:"left",className:"bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600",ripple:!0,glow:!0,children:"Log Your First Trade"})]})}),(0,r.jsx)(R,{isOpen:q,onClose:()=>J(!1),currentGoal:ed,onSave:el}),(0,r.jsx)(W,{isOpen:X,onClose:()=>ee(!1),selectedDate:et,tradesForDate:er}),(0,r.jsx)(u.fd,{onClick:()=>{window.location.href="/journal/new"},icon:(0,r.jsx)(x.OiG,{className:"w-6 h-6"}),tooltip:"Log New Trade",position:"bottom-right"})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6799,6711,3464,1990,4540,3568,1005,6153,6244,1543,9222,3504,5493,8272,2055,3830,8441,1684,7358],()=>t(29132)),_N_E=e.O()}]);