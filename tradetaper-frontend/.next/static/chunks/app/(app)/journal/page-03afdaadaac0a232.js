(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4483],{2845:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});var a=r(36008),s=r(61183),l=r(25703);function n(e,t,r){let[n,o]=(0,s.x)(null==r?void 0:r.in,e,t),d=(n-o)/l.s0;return(0,a.u)(null==r?void 0:r.roundingMethod)(d)}},5535:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});var a=r(36008),s=r(25703),l=r(89447);function n(e,t,r){let n=((0,l.a)(e)-(0,l.a)(t))/s.Cg;return(0,a.u)(null==r?void 0:r.roundingMethod)(n)}},27045:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var a=r(95155),s=r(12115),l=r(34540),n=r(23352),o=r(70392),d=r(96787),i=r(6874),c=r.n(i),x=r(76233),g=r(56051),u=r(29911),m=r(32620),h=r(98794),b=r(5535),y=r(2845),p=r(98449);let f=e=>{let{data:t,itemsPerPage:r,initialPage:a=1}=e,[l,n]=(0,s.useState)(a),[o,d]=(0,s.useState)(r),i=Math.ceil(t.length/o),c=(0,s.useMemo)(()=>{let e=(l-1)*o;return t.slice(e,e+o)},[t,l,o]),x=l<i,g=l>1;return(0,s.useMemo)(()=>{l>i&&i>0&&n(1)},[i,l]),{currentPage:l,totalPages:i,currentData:c,hasNextPage:x,hasPreviousPage:g,goToPage:e=>{n(Math.max(1,Math.min(e,i)))},nextPage:()=>{x&&n(e=>e+1)},previousPage:()=>{g&&n(e=>e-1)},setItemsPerPage:e=>{d(e),n(1)},itemsPerPage:o}};var v=r(73853),j=r(71079);let k=(e,t)=>{if(!e)return"N/A";let r=t.find(t=>t.id===e);return r?r.name:"Unknown Account"},N=e=>null==e?"-":e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:5}),w=e=>{if(null==e||"number"!=typeof e)return(0,a.jsx)("span",{className:"text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:"-"});let t=e>0?"text-accent-green":e<0?"text-accent-red":"text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary";return(0,a.jsx)(j.e,{amount:e,className:"".concat(t," ").concat(e>0?"font-medium":""),showOriginal:!1})},D=e=>{if(!e)return"-";try{return(0,m.GP)((0,h.H)(e),"EEE")}catch(e){return"-"}},P=e=>{if(!e.entryDate||!e.exitDate)return"-";try{let t=(0,h.H)(e.entryDate),r=(0,h.H)(e.exitDate),a=(0,b.o)(r,t),s=(0,y.M)(r,t),l=(0,p.c)(r,t);if(l>0)return"".concat(l,"d ").concat(s%24,"h");if(s>0)return"".concat(s,"h ").concat(a%60,"m");return"".concat(a,"m")}catch(e){return"-"}};function L(e){let{trades:t,accounts:r,onRowClick:s,isLoading:l,itemsPerPage:n=25}=e,o=f({data:t,itemsPerPage:n,initialPage:1});if(l)return(0,a.jsx)(v.eO,{text:"Loading trades table..."});if(!t||0===t.length)return(0,a.jsx)("div",{className:"text-center py-10",children:"No trades to display."});let d="px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap",i="px-6 py-4 whitespace-nowrap text-sm";return(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg overflow-hidden",children:[o.totalPages>1&&(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200/30 dark:border-gray-700/30 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",(o.currentPage-1)*o.itemsPerPage+1," to"," ",Math.min(o.currentPage*o.itemsPerPage,t.length)," of ",t.length," trades"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:o.previousPage,disabled:!o.hasPreviousPage,className:"p-2 rounded-xl bg-white/80 dark:bg-gray-800/80 hover:bg-blue-500 dark:hover:bg-blue-500 text-gray-600 dark:text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-105 backdrop-blur-sm",children:(0,a.jsx)(u._Jj,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white px-3",children:["Page ",o.currentPage," of ",o.totalPages]}),(0,a.jsx)("button",{onClick:o.nextPage,disabled:!o.hasNextPage,className:"p-2 rounded-xl bg-white/80 dark:bg-gray-800/80 hover:bg-blue-500 dark:hover:bg-blue-500 text-gray-600 dark:text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-105 backdrop-blur-sm",children:(0,a.jsx)(u.X6T,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50/80 dark:bg-gray-800/80 backdrop-blur-sm",children:(0,a.jsxs)("tr",{className:"border-b border-gray-200/30 dark:border-gray-700/30",children:[(0,a.jsx)("th",{className:d,children:"Pair"}),(0,a.jsx)("th",{className:d,children:"Open Date"}),(0,a.jsx)("th",{className:d,children:"Account"}),(0,a.jsx)("th",{className:d,children:"Session"}),(0,a.jsx)("th",{className:d,children:"Weekday"}),(0,a.jsx)("th",{className:d,children:"Holdtime"}),(0,a.jsx)("th",{className:d,children:"Entry"}),(0,a.jsx)("th",{className:d,children:"Exit"}),(0,a.jsx)("th",{className:d,children:"P&L"}),(0,a.jsx)("th",{className:d,children:"R-Multiple"}),(0,a.jsx)("th",{className:d,children:"Chart"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200/30 dark:divide-gray-700/30",children:o.currentData.map(e=>(0,a.jsxs)("tr",{onClick:()=>s(e),className:"group hover:bg-white/90 dark:hover:bg-gray-800/60 cursor-pointer transition-all duration-200 hover:shadow-md backdrop-blur-sm",children:[(0,a.jsx)("td",{className:"".concat(i," font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"),children:e.symbol}),(0,a.jsx)("td",{className:"".concat(i," text-gray-700 dark:text-gray-300"),children:e.entryDate?(0,m.GP)((0,h.H)(e.entryDate),"dd MMM, HH:mm:ss"):"-"}),(0,a.jsx)("td",{className:"".concat(i," text-gray-700 dark:text-gray-300"),children:(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100/80 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg text-xs font-medium",children:k(e.accountId,r)})}),(0,a.jsx)("td",{className:"".concat(i," text-gray-700 dark:text-gray-300"),children:e.session?(0,a.jsx)("span",{className:"px-2 py-1 bg-purple-100/80 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg text-xs font-medium",children:e.session}):"-"}),(0,a.jsx)("td",{className:"".concat(i," text-gray-700 dark:text-gray-300"),children:D(e.entryDate)}),(0,a.jsx)("td",{className:"".concat(i," text-gray-700 dark:text-gray-300"),children:P(e)}),(0,a.jsx)("td",{className:"".concat(i," font-mono text-gray-900 dark:text-white"),children:N(e.entryPrice)}),(0,a.jsx)("td",{className:"".concat(i," font-mono text-gray-900 dark:text-white"),children:N(e.exitPrice)}),(0,a.jsx)("td",{className:"".concat(i," font-mono"),children:w(e.profitOrLoss)}),(0,a.jsx)("td",{className:"".concat(i," text-gray-700 dark:text-gray-300"),children:void 0!==e.rMultiple&&null!==e.rMultiple?(0,a.jsxs)("span",{className:"font-semibold ".concat(e.rMultiple>0?"text-green-600 dark:text-green-400":e.rMultiple<0?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"),children:[e.rMultiple.toFixed(2),"R"]}):"-"}),(0,a.jsx)("td",{className:"".concat(i," text-center"),children:e.imageUrl?(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("img",{src:e.imageUrl,alt:"".concat(e.symbol," chart"),className:"w-12 h-8 object-cover rounded-lg shadow-sm hover:scale-110 transition-transform duration-200 cursor-pointer",onClick:t=>{t.stopPropagation(),window.open(e.imageUrl,"_blank")},onError:t=>{console.error("Table image failed to load:",e.imageUrl),t.target.style.display="none"},onLoad:()=>console.log("Table image loaded:",e.imageUrl)})}):(0,a.jsx)("span",{className:"text-gray-400 dark:text-gray-500 text-xs",children:"No image"})})]},e.id))})]})}),o.totalPages>1&&(0,a.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200/30 dark:border-gray-700/30 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Items per page:"}),(0,a.jsxs)("select",{value:o.itemsPerPage,onChange:e=>o.setItemsPerPage(Number(e.target.value)),className:"appearance-none bg-white/50 dark:bg-gray-800/50 border border-gray-200/50 dark:border-gray-700/50 rounded-lg px-3 py-2 pr-8 text-sm font-medium text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 backdrop-blur-sm hover:bg-white/70 dark:hover:bg-gray-800/70",children:[(0,a.jsx)("option",{value:10,children:"10"}),(0,a.jsx)("option",{value:25,children:"25"}),(0,a.jsx)("option",{value:50,children:"50"}),(0,a.jsx)("option",{value:100,children:"100"})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,o.totalPages)},(e,t)=>{let r=t+1;return(0,a.jsx)("button",{onClick:()=>o.goToPage(r),className:"px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ".concat(o.currentPage===r?"bg-gradient-to-r from-blue-500 to-green-500 text-white shadow-md":"bg-white/80 dark:bg-gray-800/80 text-gray-700 dark:text-gray-300 hover:bg-gray-100/80 dark:hover:bg-gray-700/80 backdrop-blur-sm"),children:r},r)})})]})]})}var C=r(35695),T=r(52699),M=r.n(T);let O=e=>{var t,r,l,n;let{trade:o,isOpen:d,onClose:i}=e,c=(0,s.useRef)(null),[x,b]=(0,s.useState)(!1),y=async()=>{if(c.current){b(!0);try{let e=await M()(c.current,{backgroundColor:"#ffffff",scale:2,width:400,height:600}),t=document.createElement("a");t.download="".concat(o.symbol,"-trade-").concat(o.id,".png"),t.href=e.toDataURL(),t.click()}catch(e){console.error("Failed to generate trade card:",e)}finally{b(!1)}}},p=o.profitOrLoss||0,f=p>0,v=o.entryPrice&&o.quantity?p/Math.abs(o.entryPrice*o.quantity)*100:0;return d?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-2xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200/30 dark:border-gray-700/30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Share Trade"}),(0,a.jsx)("button",{onClick:i,className:"p-2.5 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-red-500 dark:hover:bg-red-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105",children:(0,a.jsx)(u.QCr,{className:"h-4 w-4"})})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{ref:c,className:"bg-gradient-to-br from-blue-50/80 to-green-50/80 dark:from-blue-900/20 dark:to-green-900/20 backdrop-blur-xl p-6 rounded-2xl border border-blue-200/50 dark:border-blue-800/50 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold shadow-lg ".concat(o.direction===g.w_.LONG?"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-red-500 to-red-600"),children:o.direction===g.w_.LONG?"↗":"↘"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:o.symbol}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.direction," • ",o.assetType]})]})]}),(0,a.jsx)("div",{className:"px-3 py-1.5 rounded-xl text-sm font-medium shadow-sm ".concat(f?"bg-green-100/80 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100/80 text-red-800 dark:bg-red-900/30 dark:text-red-300"),children:f?"WIN":"LOSS"})]}),(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold mb-1 ".concat(f?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[p>=0?"+":"","$",Math.abs(p).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsxs)("div",{className:"text-sm font-medium ".concat(f?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[v>=0?"+":"",v.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Entry"}),(0,a.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-white",children:["$",(null==(t=o.entryPrice)?void 0:t.toFixed(4))||"N/A"]})]}),(0,a.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Exit"}),(0,a.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-white",children:["$",(null==(r=o.exitPrice)?void 0:r.toFixed(4))||"N/A"]})]}),(0,a.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Quantity"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:(null==(l=o.quantity)?void 0:l.toLocaleString())||"N/A"})]}),(0,a.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"R-Multiple"}),(0,a.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-white",children:[(null==(n=o.rMultiple)?void 0:n.toFixed(2))||"N/A","R"]})]})]}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200/30 dark:border-gray-700/30 text-center",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:o.entryDate?(0,m.GP)((0,h.H)(o.entryDate),"MMM dd, yyyy"):"N/A"}),(0,a.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Powered by TradeTaper"})]})]})}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200/30 dark:border-gray-700/30",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{let e="".concat(window.location.origin,"/journal/view/").concat(o.id);navigator.clipboard.writeText(e)},className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gray-100/80 dark:bg-gray-800/80 hover:bg-blue-500 dark:hover:bg-blue-500 text-gray-700 dark:text-gray-300 hover:text-white rounded-xl transition-all duration-200 hover:scale-105 backdrop-blur-sm",children:[(0,a.jsx)(u.paH,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Copy Link"})]}),(0,a.jsxs)("button",{onClick:y,disabled:x,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-100/80 dark:bg-blue-800/80 hover:bg-blue-500 dark:hover:bg-blue-500 text-blue-700 dark:text-blue-300 hover:text-white rounded-xl transition-all duration-200 hover:scale-105 backdrop-blur-sm disabled:opacity-50",children:[(0,a.jsx)(u.WCW,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:x?"Generating...":"Download"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=o.profitOrLoss||0,t=e>=0?"+$".concat(Math.abs(e).toFixed(2)):"-$".concat(Math.abs(e).toFixed(2)),r="Just ".concat(e>=0?"closed a winning":"completed a"," ").concat(o.direction," trade on ").concat(o.symbol," ").concat(t," \uD83D\uDCC8 #TradeTaper #Trading"),a="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(r));window.open(a,"_blank")},className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-100/80 dark:bg-blue-800/80 hover:bg-blue-500 dark:hover:bg-blue-500 text-blue-700 dark:text-blue-300 hover:text-white rounded-xl transition-all duration-200 hover:scale-105 backdrop-blur-sm",children:[(0,a.jsx)(u.feZ,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Twitter"})]}),(0,a.jsxs)("button",{onClick:()=>{let e="".concat(window.location.origin,"/journal/view/").concat(o.id),t="https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(e));window.open(t,"_blank")},className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-100/80 dark:bg-blue-800/80 hover:bg-blue-500 dark:hover:bg-blue-500 text-blue-700 dark:text-blue-300 hover:text-white rounded-xl transition-all duration-200 hover:scale-105 backdrop-blur-sm",children:[(0,a.jsx)(u.QEs,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"LinkedIn"})]})]})})]})}):null},S=e=>{if(void 0===e.profitOrLoss||null===e.profitOrLoss||!e.entryPrice||!e.quantity||0===e.entryPrice||0===e.quantity)return null;let t=e.entryPrice*e.quantity;return 0===t?null:e.profitOrLoss/Math.abs(t)*100};function E(e){var t;let{trade:r,isOpen:o,onClose:d,onEdit:i,onDelete:c}=e,x=(0,l.wA)(),b=(0,C.useRouter)(),[y,p]=(0,s.useState)("details"),[f,v]=(0,s.useState)(!1);if(console.log("TradePreviewDrawer render:",{isOpen:o,trade:(null==r?void 0:r.symbol)||"null",tradeId:null==r?void 0:r.id}),!o||!r)return console.log("TradePreviewDrawer returning null - isOpen:",o,"trade:",!!r),null;let j=async()=>{var e;if(!r)return;let t={assetType:r.assetType,symbol:r.symbol,direction:r.direction,status:r.status,entryDate:r.entryDate,entryPrice:r.entryPrice,quantity:r.quantity,...r.exitDate&&{exitDate:r.exitDate},...r.exitPrice&&{exitPrice:r.exitPrice},...void 0!==r.commission&&{commission:r.commission},...r.notes&&{notes:r.notes},...r.stopLoss&&{stopLoss:r.stopLoss},...r.takeProfit&&{takeProfit:r.takeProfit},...r.ictConcept&&{ictConcept:r.ictConcept},...r.session&&{session:r.session},...r.setupDetails&&{setupDetails:r.setupDetails},...r.mistakesMade&&{mistakesMade:r.mistakesMade},...r.lessonsLearned&&{lessonsLearned:r.lessonsLearned},...r.imageUrl&&{imageUrl:r.imageUrl},...r.accountId&&{accountId:r.accountId},tagNames:(null==(e=r.tags)?void 0:e.map(e=>e.name))||[],isStarred:!r.isStarred};x((0,n.Gz)({id:r.id,payload:t})).unwrap().catch(e=>{console.error("Failed to update star status:",e)})},k=void 0!==r.profitOrLoss&&null!==r.profitOrLoss&&r.profitOrLoss>0,w=void 0!==r.profitOrLoss&&null!==r.profitOrLoss&&r.profitOrLoss<0,L=k?"Win":w?"Loss":r.status===g.d1.OPEN?"Open":"N/A",T=S(r),M=r.entryPrice&&r.quantity?r.entryPrice*r.quantity:null,E=e=>{let{label:t,value:r,valueClass:s,containerClass:l}=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 px-4 bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200 ".concat(l||""),children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t}),(0,a.jsx)("span",{className:"text-sm text-right font-semibold ".concat(s||"text-gray-900 dark:text-white"),children:null!=r?r:"-"})]})},F=e=>{let{title:t,icon:r}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4 mt-6",children:[r&&(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-green-500/20 rounded-xl",children:r}),(0,a.jsx)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:t})]})};return(0,a.jsxs)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex justify-end z-40 transition-opacity duration-300 ease-in-out",onClick:d,children:[(0,a.jsxs)("div",{className:"w-full max-w-lg h-full bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl border-l border-gray-200/50 dark:border-gray-700/50 shadow-2xl flex flex-col transform transition-transform duration-300 ease-in-out translate-x-0",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200/30 dark:border-gray-700/30 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:r.symbol}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 mt-2",children:[(0,a.jsx)("span",{className:"px-3 py-1.5 rounded-xl text-white text-sm font-semibold shadow-lg ".concat(k?"bg-gradient-to-r from-green-500 to-green-600":w?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-gray-500 to-gray-600"),children:L}),(0,a.jsx)("span",{className:"px-3 py-1.5 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 text-gray-700 dark:text-gray-300 text-sm font-semibold backdrop-blur-sm",children:r.direction})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:j,className:"p-2.5 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-yellow-500 dark:hover:bg-yellow-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105 backdrop-blur-sm",children:r.isStarred?(0,a.jsx)(u.gt3,{className:"h-5 w-5 text-yellow-400"}):(0,a.jsx)(u.wei,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>{v(!0)},className:"p-2.5 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-purple-500 dark:hover:bg-purple-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105 backdrop-blur-sm",children:(0,a.jsx)(u.A$,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>{b.push("/journal/view/".concat(r.id))},className:"p-2.5 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-blue-500 dark:hover:bg-blue-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105 backdrop-blur-sm",children:(0,a.jsx)(u.EQc,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:d,className:"p-2.5 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-red-500 dark:hover:bg-red-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105 backdrop-blur-sm",children:(0,a.jsx)(u.QCr,{className:"h-5 w-5"})})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{children:["Opened: ",r.entryDate?(0,m.GP)((0,h.H)(r.entryDate),"dd MMM yy, HH:mm"):"-"]}),r.status===g.d1.CLOSED&&r.exitDate&&(0,a.jsxs)("span",{children:["Closed: ",(0,m.GP)((0,h.H)(r.exitDate),"dd MMM yy, HH:mm")]})]})})]}),(0,a.jsx)("div",{className:"px-6 border-b border-gray-200/30 dark:border-gray-700/30 bg-white/60 dark:bg-gray-900/60 backdrop-blur-xl",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("button",{onClick:()=>p("details"),className:"py-4 px-4 text-sm font-semibold rounded-t-xl transition-all duration-200 ".concat("details"===y?"text-blue-600 dark:text-blue-400 bg-gradient-to-t from-blue-50/80 to-transparent dark:from-blue-900/20 border-b-2 border-blue-500":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50/50 dark:hover:bg-gray-800/30"),children:"Details"}),(0,a.jsx)("button",{onClick:()=>p("manage"),className:"py-4 px-4 text-sm font-semibold rounded-t-xl transition-all duration-200 ".concat("manage"===y?"text-blue-600 dark:text-blue-400 bg-gradient-to-t from-blue-50/80 to-transparent dark:from-blue-900/20 border-b-2 border-blue-500":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50/50 dark:hover:bg-gray-800/30"),children:"Manage"})]})}),(0,a.jsxs)("div",{className:"flex-grow p-6 overflow-y-auto space-y-4 text-sm",children:["details"===y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50/80 to-green-50/80 dark:from-blue-900/20 dark:to-green-900/20 backdrop-blur-xl p-6 rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Net P&L"}),null!==T&&(0,a.jsxs)("span",{className:"text-sm font-bold px-3 py-1 rounded-lg ".concat(T>0?"bg-green-100/80 text-green-700 dark:bg-green-900/30 dark:text-green-300":T<0?"bg-red-100/80 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-gray-100/80 text-gray-700 dark:bg-gray-800/80 dark:text-gray-300"),children:[T>0?"+":"",T.toFixed(1),"%"]})]}),(0,a.jsx)("span",{className:"text-3xl font-bold ".concat(k?"text-green-600 dark:text-green-400":w?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"),children:void 0!==r.profitOrLoss&&null!==r.profitOrLoss?"".concat(r.profitOrLoss>0?"+":"","$").concat(Math.abs(r.profitOrLoss).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})):"-"})]}),(0,a.jsx)(F,{title:"Performance",icon:(0,a.jsx)(u.YYR,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(E,{label:"P&L (Gross)",value:void 0!==r.profitOrLoss&&null!==r.profitOrLoss&&void 0!==r.commission&&null!==r.commission?"$".concat((r.profitOrLoss+r.commission).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})):"-"}),(0,a.jsx)(E,{label:"Fees",value:void 0!==r.commission&&null!==r.commission?"-$".concat(Math.abs(r.commission).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})):"-",valueClass:"text-red-600 dark:text-red-400"}),(0,a.jsx)(E,{label:"Funding",value:"$0.00"}),(0,a.jsx)(E,{label:"Max Favorable Excursion (MFE)",value:(0,a.jsx)("span",{className:"text-gray-400 dark:text-gray-500",children:"- (Future Feature)"})}),(0,a.jsx)(E,{label:"Max Adverse Excursion (MAE)",value:(0,a.jsx)("span",{className:"text-gray-400 dark:text-gray-500",children:"- (Future Feature)"})}),(0,a.jsx)(E,{label:"Leverage Used",value:(0,a.jsx)("span",{className:"text-gray-400 dark:text-gray-500",children:"- (Future Feature)"})})]}),(0,a.jsx)(F,{title:"Entry / Exit",icon:(0,a.jsx)(u.Tsk,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(E,{label:"Entry Price",value:N(r.entryPrice),valueClass:"font-mono"}),(0,a.jsx)(E,{label:"Exit Price",value:N(r.exitPrice),valueClass:"font-mono"})]}),(0,a.jsx)(F,{title:"Time",icon:(0,a.jsx)(u.w_X,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(E,{label:"Weekday",value:D(r.entryDate)}),(0,a.jsx)(E,{label:"Session",value:r.session||"-"}),(0,a.jsx)(E,{label:"Hold Time",value:P(r)})]}),(0,a.jsx)(F,{title:"Size",icon:(0,a.jsx)(u.Tsk,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(E,{label:"Volume (Entry Value)",value:null!==M?"$".concat(M.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})):"-"}),(0,a.jsx)(E,{label:"Quantity",value:null==(t=r.quantity)?void 0:t.toLocaleString()}),(0,a.jsx)(E,{label:"R-Multiple",value:void 0!==r.rMultiple&&null!==r.rMultiple?"".concat(r.rMultiple.toFixed(2),"R"):"-"})]}),(r.notes||r.setupDetails||r.mistakesMade||r.lessonsLearned)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F,{title:"Notes & Analysis",icon:(0,a.jsx)(u.uO9,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[r.notes&&(0,a.jsx)(E,{label:"Notes",value:(0,a.jsx)("div",{className:"text-right max-w-xs whitespace-pre-wrap text-sm",children:r.notes})}),r.setupDetails&&(0,a.jsx)(E,{label:"Setup Details",value:(0,a.jsx)("div",{className:"text-right max-w-xs whitespace-pre-wrap text-sm",children:r.setupDetails})}),r.mistakesMade&&(0,a.jsx)(E,{label:"Mistakes Made",value:(0,a.jsx)("div",{className:"text-right max-w-xs whitespace-pre-wrap text-sm",children:r.mistakesMade})}),r.lessonsLearned&&(0,a.jsx)(E,{label:"Lessons Learned",value:(0,a.jsx)("div",{className:"text-right max-w-xs whitespace-pre-wrap text-sm",children:r.lessonsLearned})})]})]}),r.imageUrl&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F,{title:"Chart Attachment",icon:(0,a.jsx)(u.YYR,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})}),(0,a.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-2xl border border-gray-200/30 dark:border-gray-700/30 p-4 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:(0,a.jsx)("div",{className:"relative w-full rounded-xl overflow-hidden cursor-pointer",onClick:()=>window.open(r.imageUrl,"_blank"),children:(0,a.jsx)("img",{src:r.imageUrl,alt:"".concat(r.symbol," trade chart"),className:"w-full h-auto max-h-64 object-contain hover:scale-105 transition-transform duration-300 rounded-xl",onError:e=>{console.error("Image failed to load:",r.imageUrl),e.target.style.display="none"},onLoad:()=>console.log("Image loaded successfully:",r.imageUrl)})})})]})]}),"manage"===y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F,{title:"Notes & Analysis",icon:(0,a.jsx)(u.uO9,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[r.notes&&(0,a.jsx)(E,{label:"Notes",value:(0,a.jsx)("div",{className:"text-right max-w-xs whitespace-pre-wrap",children:r.notes})}),r.setupDetails&&(0,a.jsx)(E,{label:"Setup Details",value:(0,a.jsx)("div",{className:"text-right max-w-xs whitespace-pre-wrap",children:r.setupDetails})}),r.mistakesMade&&(0,a.jsx)(E,{label:"Mistakes Made",value:(0,a.jsx)("div",{className:"text-right max-w-xs whitespace-pre-wrap",children:r.mistakesMade})}),r.lessonsLearned&&(0,a.jsx)(E,{label:"Lessons Learned",value:(0,a.jsx)("div",{className:"text-right max-w-xs whitespace-pre-wrap",children:r.lessonsLearned})})]}),r.imageUrl&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)(F,{title:"Chart Attachment",icon:(0,a.jsx)(u.YYR,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})}),(0,a.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-2xl border border-gray-200/30 dark:border-gray-700/30 p-4 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:(0,a.jsx)("div",{className:"relative w-full rounded-xl overflow-hidden cursor-pointer",onClick:()=>window.open(r.imageUrl,"_blank"),children:(0,a.jsx)("img",{src:r.imageUrl,alt:"".concat(r.symbol," trade chart"),className:"w-full h-auto max-h-64 object-contain hover:scale-105 transition-transform duration-300 rounded-xl",onError:e=>{console.error("Image failed to load:",r.imageUrl),e.target.style.display="none"},onLoad:()=>console.log("Image loaded successfully:",r.imageUrl)})})})]})]})]}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200/30 dark:border-gray-700/30 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl",children:(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>i(r.id),className:"flex-1 py-3 px-6 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold transition-all duration-200 text-sm flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl hover:scale-105",children:[(0,a.jsx)(u.uO9,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Edit Trade"})]}),(0,a.jsxs)("button",{onClick:()=>c(r.id),className:"flex-1 py-3 px-6 rounded-xl bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold transition-all duration-200 text-sm flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl hover:scale-105",children:[(0,a.jsx)(u.RCe,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Delete Trade"})]})]})})]}),(0,a.jsx)(O,{trade:r,isOpen:f,onClose:()=>v(!1)})]})}var F=r(53231),R=r(32944),A=r(23068),U=r(80520),I=r(54239);r(35279);var G=r(37223),H=r(54549),W=r(9107),_=r(57716),q=r(29161),z=r(19828);let $=(e,t)=>t?e.filter(e=>e.accountId===t):e,Y=(e,t)=>"all"===t?e:e.filter(e=>"open"===t?e.status===g.d1.OPEN:e.status===g.d1.CLOSED),Q=(e,t)=>{if("all"===t)return e;let r=new Date,a="1m"===t?(0,G.a)(r,1):"7d"===t?(0,H.k)(r,1):"1d"===t?(0,W.e)(r,1):null;return a?e.filter(e=>{if(!e.entryDate)return!1;try{let t=(0,h.H)(e.entryDate);return(0,A.f)(t)&&(0,_.d)(t,a)}catch(e){return!1}}):e},V=(e,t)=>{let r=e;return t.from&&(r=r.filter(e=>{if(!e.entryDate)return!1;try{let r=(0,h.H)(e.entryDate);return(0,A.f)(r)&&!(0,q.Y)(r,t.from)}catch(e){return!1}})),t.to&&(r=r.filter(e=>{if(!e.entryDate)return!1;try{let r=(0,h.H)(e.entryDate),a=(0,z.D)(t.to);return(0,A.f)(r)&&!(0,_.d)(r,a)}catch(e){return!1}})),r},B=(e,t)=>{if(!t.trim())return e;let r=t.toLowerCase();return e.filter(e=>e.symbol.toLowerCase().includes(r)||e.notes&&e.notes.toLowerCase().includes(r)||e.setupDetails&&e.setupDetails.toLowerCase().includes(r))},J=(e,t)=>t?e.filter(e=>!0===e.isStarred):e,X=(e,t)=>{let r=e;return[...r=J(r=B(r=V(r=Q(r=Y(r=$(r,t.accountId),t.positionFilter),t.timeFilter),t.customDateRange),t.searchQuery),t.showOnlyStarred)].sort((e,t)=>new Date(t.entryDate).getTime()-new Date(e.entryDate).getTime())};var K=r(32348);function Z(){let e=(0,l.wA)(),t=(0,C.useRouter)(),{trades:r,isLoading:i,error:b}=(0,l.d4)(e=>e.trades),{isAuthenticated:y}=(0,l.d4)(e=>e.auth),p=(0,l.d4)(o.i7),f=(0,l.d4)(d.kI),v=(0,l.d4)(o.xB),k=(0,l.d4)(o.G6),[N,w]=(0,s.useState)("all"),[D,P]=(0,s.useState)("all"),[T,M]=(0,s.useState)(null),[O,S]=(0,s.useState)(!1),[G,H]=(0,s.useState)({}),[W,_]=(0,s.useState)(""),[q,z]=(0,s.useState)(!1),[$,Y]=(0,s.useState)(null),[Q,V]=(0,s.useState)(null),[B,J]=(0,s.useState)(!1),[Z,ee]=(0,s.useState)("table"),et=(0,K.d)(W,300);(0,s.useEffect)(()=>{if(y){e((0,o.Tq)());let t=p||f;e((0,n.Cm)(t||void 0))}},[e,y,p,f]);let er=(0,s.useMemo)(()=>X(r,{accountId:p||f,positionFilter:N,timeFilter:D,customDateRange:G,searchQuery:et,showOnlyStarred:B}),[r,p,f,N,D,G,et,B]),ea=(0,s.useMemo)(()=>{if(!er||0===er.length)return{winRate:0,longTrades:0,shortTrades:0,totalPnl:0,monthlyPnl:0,winningTradesCount:0,losingTradesCount:0};let e=er.filter(e=>e.status===g.d1.CLOSED&&"number"==typeof e.profitOrLoss),t=e.filter(e=>e.profitOrLoss>0),r=e.filter(e=>e.profitOrLoss<0),a=e.length>0?t.length/e.length*100:0,s=er.filter(e=>"Long"===e.direction).length,l=er.filter(e=>"Short"===e.direction).length,n=e.reduce((e,t)=>e+(t.profitOrLoss||0),0),o=new Date,d=(0,F.w)(o),i=(0,R.p)(o);return{winRate:a,longTrades:s,shortTrades:l,totalPnl:n,monthlyPnl:e.filter(e=>{if(!e.exitDate)return!1;try{let t=(0,h.H)(e.exitDate);return(0,A.f)(t)&&(0,U.v)(t,{start:d,end:i})}catch(e){return!1}}).reduce((e,t)=>e+(t.profitOrLoss||0),0),winningTradesCount:t.length,losingTradesCount:r.length}},[er]),es=(0,s.useMemo)(()=>{if(!er||0===er.length)return{totalNetPnl:0,totalTrades:0,totalCommissions:0,averageWin:0,averageLoss:0,averageRR:0,totalTradedValue:0};let e=(0,x.yG)(er),t=er.reduce((e,t)=>t.entryPrice&&t.quantity?e+Math.abs(t.entryPrice*t.quantity):e,0);return{totalNetPnl:e.totalNetPnl,totalTrades:e.totalTrades,totalCommissions:e.totalCommissions,averageWin:e.averageWin,averageLoss:e.averageLoss,averageRR:e.averageRR,totalTradedValue:t}},[er]);return i&&0===r.length?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Loading your trading journal..."})]})}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:"Trading Journal"}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-300",children:["Track and analyze your trading performance • Last updated: ",(0,m.GP)(new Date,"MMM dd, hh:mm a")]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{onClick:()=>J(!B),className:"p-3 rounded-xl transition-all duration-200 hover:scale-105 ".concat(B?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400":"bg-gray-100/80 dark:bg-gray-800/80 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"),children:B?(0,a.jsx)(u.gt3,{}):(0,a.jsx)(u.wei,{})}),(0,a.jsx)("button",{className:"p-3 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-green-500 dark:hover:bg-green-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105",children:(0,a.jsx)(u.WCW,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"group relative bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-green-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Monthly Progress"}),(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-green-500/20 rounded-xl",children:(0,a.jsx)(u.YYR,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold mb-4 ".concat(ea.monthlyPnl>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[ea.monthlyPnl>=0?"+":"",(0,a.jsx)(j.e,{amount:ea.monthlyPnl,className:"inline"})]}),(0,a.jsx)("div",{className:"h-8 flex items-center",children:(0,a.jsxs)("svg",{viewBox:"0 0 100 30",className:"w-full h-full",preserveAspectRatio:"none",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"sparklineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#3B82F6"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#10B981"})]})}),(0,a.jsx)("path",{d:"M 0 25 Q 15 20, 25 15 T 50 10 T 75 8 T 100 5",stroke:"url(#sparklineGradient)",fill:"none",strokeWidth:"2"})]})})]})]}),(0,a.jsxs)("div",{className:"group relative bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-pink-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Net Balance"}),(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-xl",children:(0,a.jsx)(u.hko,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})})]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:(null==v?void 0:v.balance)!==void 0?(0,a.jsx)(j.e,{amount:v.balance+es.totalNetPnl,className:"inline"}):p||f?"N/A":(0,a.jsx)(j.e,{amount:es.totalNetPnl,className:"inline"})}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(null==v?void 0:v.name)||"All Accounts",v&&(0,a.jsxs)("span",{className:"block text-xs mt-1",children:["Base: ",(0,a.jsx)(j.e,{amount:v.balance,className:"inline"})," + P&L: ",(0,a.jsx)(j.e,{amount:es.totalNetPnl,className:"inline",showSign:!0})]})]})]})]}),(0,a.jsxs)("div",{className:"group relative bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-blue-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Win Rate"}),(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-xl",children:(0,a.jsx)(u.uCC,{className:"w-4 h-4 text-green-600 dark:text-green-400"})})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:[ea.winRate.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsxs)("span",{className:"text-green-600 dark:text-green-400",children:["Wins: ",ea.winningTradesCount]}),(0,a.jsxs)("span",{className:"text-red-600 dark:text-red-400",children:["Losses: ",ea.losingTradesCount]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(ea.winRate,"%")}})})]})]})]}),(0,a.jsxs)("div",{className:"group relative bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/5 to-red-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Direction Split"}),(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-orange-500/20 to-red-500/20 rounded-xl",children:(0,a.jsx)(u.$TP,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:[ea.longTrades,"L / ",ea.shortTrades,"S"]}),ea.longTrades+ea.shortTrades>0&&(0,a.jsxs)("div",{className:"w-full h-3 flex rounded-xl overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-full transition-all duration-500",style:{width:"".concat(ea.longTrades/(ea.longTrades+ea.shortTrades)*100,"%")}}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-full transition-all duration-500",style:{width:"".concat(ea.shortTrades/(ea.longTrades+ea.shortTrades)*100,"%")}})]})]})]})]}),(0,a.jsx)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mr-2",children:"Status:"}),(0,a.jsx)("div",{className:"flex bg-gray-100/80 dark:bg-gray-800/80 p-1 rounded-xl",children:["all","open","closed"].map(e=>(0,a.jsx)("button",{onClick:()=>w(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat(N===e?"bg-gradient-to-r from-blue-500 to-green-500 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-200/50 dark:hover:bg-gray-700/50"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mr-2",children:"Period:"}),(0,a.jsxs)("div",{className:"flex bg-gray-100/80 dark:bg-gray-800/80 p-1 rounded-xl",children:[["all","1d","7d","1m"].map(e=>(0,a.jsx)("button",{onClick:()=>P(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat(D===e?"bg-gradient-to-r from-blue-500 to-green-500 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-200/50 dark:hover:bg-gray-700/50"),children:"all"===e?"All time":"1m"===e?"1 month":e},e)),(0,a.jsx)("button",{onClick:()=>z(!0),className:"p-2 rounded-lg text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-200/50 dark:hover:bg-gray-700/50 transition-all duration-200",children:(0,a.jsx)(u.bfZ,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 ml-auto",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search trades...",className:"pl-10 pr-4 py-2.5 text-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",value:W,onChange:e=>_(e.target.value)}),(0,a.jsx)(u.KSO,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"})]}),(0,a.jsxs)(c(),{href:"/journal/new",className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white font-semibold py-2.5 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105",children:[(0,a.jsx)(u.OiG,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Log Trade"})]})]})]})}),i&&(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading trades..."})]}),b&&(0,a.jsx)("div",{className:"text-center py-16 bg-red-50 dark:bg-red-900/20 rounded-2xl border border-red-200 dark:border-red-800",children:(0,a.jsxs)("p",{className:"text-red-600 dark:text-red-400",children:["Error fetching trades: ",b]})}),!i&&!b&&0===er.length&&(0,a.jsx)("div",{className:"text-center py-16 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(u.hko,{className:"w-10 h-10 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r.length>0?"No trades match your filters":"No trades recorded yet"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:r.length>0?"Try adjusting your filters to see more trades.":"Start building your trading journal by logging your first trade."})]}),(()=>{let e=p||f,t=e?r.filter(t=>t.accountId===e):r;return 0===er.length&&0===t.length&&(0,a.jsxs)(c(),{href:"/journal/new",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,a.jsx)(u.OiG,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Log Your First Trade"})]})})()]})}),!i&&er.length>0&&(0,a.jsx)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg overflow-hidden",children:(0,a.jsx)(L,{trades:er,accounts:k,onRowClick:e=>{M(e),S(!0)},isLoading:i})}),!i&&er.length>0&&(0,a.jsx)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg",children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-7 gap-4",children:[{label:"Total P&L",value:es.totalNetPnl,color:es.totalNetPnl>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",isAmount:!0,showSign:!0},{label:"Total Trades",value:es.totalTrades,color:"text-gray-900 dark:text-white",isAmount:!1},{label:"Commissions",value:es.totalCommissions,color:"text-gray-900 dark:text-white",isAmount:!0},{label:"Total Value",value:es.totalTradedValue,color:"text-gray-900 dark:text-white",isAmount:!0},{label:"Avg Win",value:es.averageWin,color:"text-green-600 dark:text-green-400",isAmount:!0,showSign:!0},{label:"Avg Loss",value:es.averageLoss,color:"text-red-600 dark:text-red-400",isAmount:!0,showSign:!0},{label:"Avg R:R",value:"".concat(es.averageRR.toFixed(2),"R"),color:"text-gray-900 dark:text-white",isAmount:!1}].map((e,t)=>(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50/80 dark:bg-gray-800/50 rounded-xl hover:bg-gray-100/80 dark:hover:bg-gray-800/80 transition-colors duration-200 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2 truncate",children:e.label}),(0,a.jsx)("div",{className:"text-base lg:text-lg font-bold ".concat(e.color," truncate"),children:e.isAmount?(0,a.jsxs)(a.Fragment,{children:[e.showSign&&"number"==typeof e.value&&e.value>=0?"+":"",(0,a.jsx)(j.e,{amount:"number"==typeof e.value?e.value:0,className:"inline"})]}):e.value})]},t))})}),(0,a.jsx)(E,{trade:T,isOpen:O,onClose:()=>{S(!1),M(null)},onEdit:e=>{t.push("/journal/edit/".concat(e)),S(!1)},onDelete:t=>{window.confirm("Are you sure you want to delete this trade?")&&(e((0,n.s5)(t)),S(!1))}}),q&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl p-6 rounded-2xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 space-y-6 max-w-sm w-full",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-center bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:"Select Date Range"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From:"}),(0,a.jsx)(I.Ay,{selected:$||void 0,onChange:e=>Y(e),selectsStart:!0,startDate:$||void 0,endDate:Q||void 0,isClearable:!0,placeholderText:"Start date",className:"w-full p-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",dateFormat:"yyyy-MM-dd"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"To:"}),(0,a.jsx)(I.Ay,{selected:Q||void 0,onChange:e=>V(e),selectsEnd:!0,startDate:$||void 0,endDate:Q||void 0,minDate:$||void 0,isClearable:!0,placeholderText:"End date",className:"w-full p-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",dateFormat:"yyyy-MM-dd"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,a.jsx)("button",{onClick:()=>{Y(null),V(null),H({})},className:"px-6 py-2.5 text-sm font-medium rounded-xl bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 transition-colors duration-200",children:"Clear"}),(0,a.jsx)("button",{onClick:()=>z(!1),className:"px-6 py-2.5 text-sm font-medium rounded-xl bg-gray-500 hover:bg-gray-600 text-white transition-colors duration-200",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{H({from:$||void 0,to:Q||void 0}),z(!1)},className:"px-6 py-2.5 text-sm font-medium rounded-xl bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white transition-all duration-200 shadow-lg hover:shadow-xl",children:"Apply"})]})]})})]})}},32348:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var a=r(12115);function s(e,t){let[r,s]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let r=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}},33185:(e,t,r)=>{Promise.resolve().then(r.bind(r,27045))},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},36008:(e,t,r)=>{"use strict";function a(e){return t=>{let r=(e?Math[e]:Math.trunc)(t);return 0===r?0:r}}r.d(t,{u:()=>a})},56051:(e,t,r)=>{"use strict";r.d(t,{PW:()=>a,d1:()=>l,w_:()=>s});var a=function(e){return e.STOCK="Stock",e.CRYPTO="Crypto",e.FOREX="Forex",e.COMMODITIES="Commodities",e.FUTURES="Futures",e.OPTIONS="Options",e}({}),s=function(e){return e.LONG="Long",e.SHORT="Short",e}({}),l=function(e){return e.OPEN="Open",e.CLOSED="Closed",e.PENDING="Pending",e.CANCELLED="Cancelled",e}({})},71079:(e,t,r)=>{"use strict";r.d(t,{e:()=>l});var a=r(95155);r(12115);var s=r(95557);let l=e=>{let{amount:t,fromCurrency:r="USD",className:l="",showOriginal:n=!1,precision:o}=e,{formatCurrency:d,selectedCurrency:i,convertAmount:c}=(0,s.H2)();if(0===t)return(0,a.jsx)("span",{className:l,children:"0"});if(isNaN(t))return(0,a.jsx)("span",{className:l,children:"-"});let x=d(t,r);c(t,r);let g=n&&r!==i;return(0,a.jsxs)("span",{className:l,title:g?"Original: ".concat(t.toFixed(o||2)," ").concat(r):void 0,children:[x,g&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1",children:["(",t.toFixed(o||2)," ",r,")"]})]})}},73853:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,eO:()=>o,kt:()=>n});var a=r(95155);r(12115);let s={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},l={primary:"border-accent-blue",secondary:"border-gray-400",accent:"border-accent-green"};function n(e){let{size:t="md",color:r="primary",text:n,className:o=""}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center ".concat(o),children:[(0,a.jsx)("div",{className:"\n          ".concat(s[t]," \n          ").concat(l[r]," \n          border-2 border-t-transparent rounded-full animate-spin\n        ")}),n&&(0,a.jsx)("p",{className:"mt-2 text-sm text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:n})]})}function o(e){let{text:t="Loading data..."}=e;return(0,a.jsx)("div",{className:"py-10 text-center",children:(0,a.jsx)(n,{size:"md",text:t})})}let d=n},76233:(e,t,r)=>{"use strict";r.d(t,{Fj:()=>x,Q0:()=>b,T9:()=>f,TR:()=>u,cu:()=>g,f6:()=>p,pD:()=>c,tL:()=>m,yG:()=>d});var a=r(56051),s=r(32620),l=r(66848),n=r(3898),o=r(50007);function d(e){let t=e.filter(e=>e.status===a.d1.CLOSED&&void 0!==e.profitOrLoss&&e.exitDate).sort((e,t)=>new Date(e.exitDate).getTime()-new Date(t.exitDate).getTime()),r=0,s=0,l=0,n=0,o=0,d=0,i=0,c=[],x=0,g=0,u=0,m=0;t.forEach(e=>{let t=e.profitOrLoss;c.push(t),r+=t,s+=e.commission||0,t>0?(l++,d+=t,t>u&&(u=t)):t<0?(n++,i+=t,t<m&&(m=t)):o++,void 0!==e.rMultiple&&null!==e.rMultiple&&(x+=e.rMultiple,g++)});let h=l+n+o,b=h>0?l/h:0,y=h>0?n/h:0,p=l>0?d/l:0,f=n>0?i/n:0,v=b*p-y*Math.abs(f),j=function(e){if(0===e.length)return 0;let t=0,r=0,a=0;for(let s of e){(a+=s)>r&&(r=a);let e=r>0?(r-a)/r:0;e>t&&(t=e)}return 100*t}(c),k=g>0?x/g:0,N=r;return{totalTrades:e.length,openTrades:e.filter(e=>e.status===a.d1.OPEN||e.status===a.d1.PENDING).length,closedTrades:t.length,winningTrades:l,losingTrades:n,breakevenTrades:o,totalNetPnl:r,totalCommissions:s,winRate:100*b,lossRate:100*y,averageWin:p,averageLoss:f,profitFactor:0!==i?Math.abs(d/i):d>0?1/0:0,expectancy:v,maxDrawdown:j,currentBalance:N,averageRR:k,largestWin:u,largestLoss:m}}function i(e,t){return{tag:t,...d(e)}}function c(e){let t={};return e.forEach(e=>{if(e.status===a.d1.CLOSED&&void 0!==e.profitOrLoss&&e.exitDate){let r=(0,s.GP)(new Date(e.exitDate),"yyyy-MM-dd");t[r]||(t[r]={pnl:0,tradeCount:0}),t[r].pnl+=e.profitOrLoss,t[r].tradeCount++}}),t}function x(e){let t=e.filter(e=>e.status===a.d1.CLOSED&&void 0!==e.profitOrLoss&&e.exitDate).sort((e,t)=>new Date(e.exitDate).getTime()-new Date(t.exitDate).getTime()),r=0,s=t.map(e=>(r+=e.profitOrLoss,{date:e.exitDate,value:r}));if(s.length>0){let e=new Date(s[0].date);return[{date:new Date(e.setDate(e.getDate()-1)).toISOString(),value:0},...s]}return[{date:new Date().toISOString(),value:0}]}function g(e){let t={};return e.forEach(e=>{if(e.tags&&e.tags.length>0)e.tags.forEach(r=>{let a=r.name||"Unnamed Tag";t[a]||(t[a]=[]),t[a].push(e)});else{let r="Uncategorized";t[r]||(t[r]=[]),t[r].push(e)}}),Object.entries(t).map(e=>{let[t,r]=e;return i(r,t)}).sort((e,t)=>t.totalNetPnl-e.totalNetPnl)}function u(e){let t={};return e.forEach(e=>{let r=e.assetType||"Unknown Asset";t[r]||(t[r]=[]),t[r].push(e)}),Object.entries(t).map(e=>{let[t,r]=e;return i(r,t)}).sort((e,t)=>t.totalNetPnl-e.totalNetPnl)}function m(e){let t={};return e.forEach(e=>{var r;let a=(null==(r=e.symbol)?void 0:r.toUpperCase())||"Unknown Symbol";t[a]||(t[a]=[]),t[a].push(e)}),Object.entries(t).map(e=>{let[t,r]=e;return i(r,t)}).sort((e,t)=>t.totalNetPnl-e.totalNetPnl)}let h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function b(e){let t={};return h.forEach(e=>{t[e]=[]}),e.filter(e=>e.status===a.d1.CLOSED&&e.exitDate).forEach(e=>{t[h[(0,l.P)(new Date(e.exitDate))]].push(e)}),h.map(e=>i(t[e],e))}let y=["Intraday (<1 Day)","Short-Term (1-7 Days)","Medium-Term (1-4 Weeks)","Long-Term (1-3 Months)","Very Long-Term (>3 Months)","Unknown Duration"];function p(e){let t={};return y.forEach(e=>{t[e]=[]}),e.filter(e=>e.status===a.d1.CLOSED&&e.entryDate&&e.exitDate).forEach(e=>{let r=function(e){if(e.status!==a.d1.CLOSED||!e.entryDate||!e.exitDate)return"Unknown Duration";let t=new Date(e.entryDate),r=new Date(e.exitDate);if((0,n.r)(t,r))return"Intraday (<1 Day)";let s=(0,o.m)(r,t);return s<=0?"Intraday (<1 Day)":s<=7?"Short-Term (1-7 Days)":s<=28?"Medium-Term (1-4 Weeks)":s<=90?"Long-Term (1-3 Months)":"Very Long-Term (>3 Months)"}(e);t[r]&&t[r].push(e)}),y.map(e=>i(t[e]||[],e)).filter(e=>e.totalTrades>0||"Unknown Duration"===e.tag)}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2?arguments[2]:void 0,s=e.filter(e=>e.status===a.d1.CLOSED&&"number"==typeof e.profitOrLoss);if(0===s.length)return[];let l=s.map(e=>e.profitOrLoss),n=Math.min(...l),o=Math.max(...l);n===o&&(0===o?(n=-1,o=1):(n=o-Math.abs(.1*o||1),o+=Math.abs(.1*o||1))),o-n<1&&o-n>-1&&o-n!=0&&(n=Math.floor(n)-1,o=Math.ceil(o)+1);let d=r||(o-n)/t;if(d<=0)return[{name:"".concat(n.toFixed(2)," to ").concat(o.toFixed(2)),count:s.length,minPnl:n,maxPnl:o}];let i=[];for(let e=0;e<t;e++){let t=n+e*d,r=n+(e+1)*d;i.push({name:"".concat(t.toFixed(0)," to ").concat(r.toFixed(0)),count:0,minPnl:t,maxPnl:r})}return i.length>0&&i[i.length-1].maxPnl<o&&(i[i.length-1].maxPnl=o,i[i.length-1].name="".concat(i[i.length-1].minPnl.toFixed(0)," to ").concat(i[i.length-1].maxPnl.toFixed(0))),l.forEach(e=>{for(let t of i)if(e>=t.minPnl&&(e<t.maxPnl||t===i[i.length-1]&&e<=t.maxPnl)){t.count++;break}}),i.filter(e=>e.count>0)}}},e=>{var t=t=>e(e.s=t);e.O(0,[5302,6711,5579,2545,4316,3464,4540,1990,6874,1005,3568,6492,403,9255,8857,8441,1684,7358],()=>t(33185)),_N_E=e.O()}]);