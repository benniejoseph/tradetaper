(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{23352:(e,r,t)=>{"use strict";t.d(r,{$L:()=>c,Ay:()=>j,Cm:()=>d,Gz:()=>x,IJ:()=>w,P:()=>k,PE:()=>n,YY:()=>p,cV:()=>y,dq:()=>N,kQ:()=>v,s5:()=>m,tJ:()=>f});var a=t(51990),s=t(80722);let l={trades:[],isLoading:!1,error:null,currentTrade:null,filters:{},analyticsFilters:{analyticsDateFrom:"",analyticsDateTo:""}};function o(e){return{id:e.id,userId:e.userId,assetType:e.assetType,symbol:e.symbol,direction:e.side,status:e.status,entryDate:e.openTime,entryPrice:parseFloat(e.openPrice),exitDate:e.closeTime,exitPrice:e.closePrice?parseFloat(e.closePrice):void 0,quantity:parseFloat(e.quantity),stopLoss:e.stopLoss?parseFloat(e.stopLoss):void 0,takeProfit:e.takeProfit?parseFloat(e.takeProfit):void 0,commission:e.commission?parseFloat(e.commission):void 0,notes:e.notes,profitOrLoss:e.profitOrLoss?parseFloat(e.profitOrLoss):void 0,rMultiple:e.rMultiple?parseFloat(e.rMultiple):void 0,ictConcept:e.ictConcept,session:e.session,setupDetails:e.setupDetails,mistakesMade:e.mistakesMade,lessonsLearned:e.lessonsLearned,imageUrl:e.imageUrl,tags:e.tags||[],createdAt:e.createdAt,updatedAt:e.updatedAt,accountId:e.accountId,isStarred:e.isStarred||!1}}function i(e){let r=e=>{if(e)try{if(e.includes("T")&&(e.includes("Z")||e.includes("+")||e.includes("-")))return e;return new Date(e).toISOString()}catch(r){console.error("Error formatting date for API:",e,r);return}};return{assetType:e.assetType,symbol:e.symbol,side:e.direction,status:e.status,openTime:r(e.entryDate),openPrice:e.entryPrice,closeTime:r(e.exitDate),closePrice:e.exitPrice,quantity:e.quantity,stopLoss:e.stopLoss,takeProfit:e.takeProfit,commission:e.commission,notes:e.notes,ictConcept:e.ictConcept,session:e.session,setupDetails:e.setupDetails,mistakesMade:e.mistakesMade,lessonsLearned:e.lessonsLearned,imageUrl:e.imageUrl,tagNames:e.tagNames,accountId:e.accountId,isStarred:e.isStarred}}let d=(0,a.zD)("trades/fetchTrades",async(e,r)=>{let{rejectWithValue:t}=r;try{let r="/trades";e&&(r+="?accountId=".concat(e));let t=await s.Y0.get(r);console.log("Raw fetchTrades from API (accountId: ".concat(e||"all","):"),t.data);let a=t.data.map(o);return console.log("Transformed trades for frontend:",a),a}catch(e){var a,l;return t((null==(l=e.response)||null==(a=l.data)?void 0:a.message)||e.message||"Failed to fetch trades")}}),n=(0,a.zD)("trades/fetchTradeById",async(e,r)=>{let{rejectWithValue:t}=r;try{let r=await s.Y0.get("/trades/".concat(e));console.log("Raw fetchTradeById from API:",r.data);let t=o(r.data);return console.log("Transformed trade for frontend:",t),t}catch(e){var a,l;return t((null==(l=e.response)||null==(a=l.data)?void 0:a.message)||e.message||"Failed to fetch trade")}}),c=(0,a.zD)("trades/createTrade",async(e,r)=>{let{rejectWithValue:t}=r;try{let r=i(e);console.log("Frontend payload:",e),console.log("Transformed API payload:",r);let t=await s.Y0.post("/trades",r);console.log("Raw createTrade from API:",t.data);let a=o(t.data);return console.log("Transformed created trade for frontend:",a),a}catch(e){var a,l;return t((null==(l=e.response)||null==(a=l.data)?void 0:a.message)||e.message||"Failed to create trade")}}),x=(0,a.zD)("trades/updateTrade",async(e,r)=>{let{id:t,payload:a}=e,{rejectWithValue:l}=r;try{let e=i(a);console.log("Frontend updateTrade payload:",a),console.log("Transformed updateTrade API payload:",e);let r=await s.Y0.patch("/trades/".concat(t),e);console.log("Raw updateTrade from API:",r.data);let l=o(r.data);return console.log("Transformed updated trade for frontend:",l),l}catch(e){var d,n;return l((null==(n=e.response)||null==(d=n.data)?void 0:d.message)||e.message||"Failed to update trade")}}),m=(0,a.zD)("trades/deleteTrade",async(e,r)=>{let{rejectWithValue:t}=r;try{return await s.Y0.delete("/trades/".concat(e)),e}catch(e){var a,l;return t((null==(l=e.response)||null==(a=l.data)?void 0:a.message)||e.message||"Failed to delete trade")}}),g=(0,a.Z0)({name:"trades",initialState:l,reducers:{clearTradesError(e){e.error=null},setCurrentTrade(e,r){e.currentTrade=r.payload},setTradeFilters(e,r){e.filters={...e.filters,...r.payload}},resetTradeFilters(e){e.filters=l.filters},setAnalyticsDateFilters(e,r){e.analyticsFilters={...e.analyticsFilters,...r.payload}},resetAnalyticsDateFilters(e){e.analyticsFilters=l.analyticsFilters},addTrade(e,r){-1===e.trades.findIndex(e=>e.id===r.payload.id)&&e.trades.unshift(r.payload)},updateTradeRealtime(e,r){var t;let a=e.trades.findIndex(e=>e.id===r.payload.id);-1!==a&&(e.trades[a]=r.payload),(null==(t=e.currentTrade)?void 0:t.id)===r.payload.id&&(e.currentTrade=r.payload)},removeTrade(e,r){var t;e.trades=e.trades.filter(e=>e.id!==r.payload),(null==(t=e.currentTrade)?void 0:t.id)===r.payload&&(e.currentTrade=null)},setTrades(e,r){e.trades=r.payload}},extraReducers:e=>{e.addCase(d.pending,e=>{e.isLoading=!0,e.error=null}).addCase(d.fulfilled,(e,r)=>{e.isLoading=!1,e.trades=r.payload}).addCase(d.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,(e,r)=>{e.isLoading=!1,e.currentTrade=r.payload}).addCase(n.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(c.pending,e=>{e.isLoading=!0,e.error=null}).addCase(c.fulfilled,(e,r)=>{e.isLoading=!1,e.trades.unshift(r.payload)}).addCase(c.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(x.pending,e=>{e.isLoading=!0,e.error=null}).addCase(x.fulfilled,(e,r)=>{var t;e.isLoading=!1;let a=e.trades.findIndex(e=>e.id===r.payload.id);-1!==a&&(e.trades[a]=r.payload),(null==(t=e.currentTrade)?void 0:t.id)===r.payload.id&&(e.currentTrade=r.payload)}).addCase(x.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(m.pending,e=>{e.isLoading=!0,e.error=null}).addCase(m.fulfilled,(e,r)=>{var t;e.isLoading=!1,e.trades=e.trades.filter(e=>e.id!==r.payload),(null==(t=e.currentTrade)?void 0:t.id)===r.payload&&(e.currentTrade=null)}).addCase(m.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload})}}),{clearTradesError:u,setCurrentTrade:p,setTradeFilters:h,resetTradeFilters:b,setAnalyticsDateFilters:y,resetAnalyticsDateFilters:f,addTrade:v,updateTradeRealtime:k,removeTrade:N,setTrades:w}=g.actions,j=g.reducer},37049:(e,r,t)=>{"use strict";t.d(r,{D:()=>i,ThemeProvider:()=>o});var a=t(95155),s=t(12115);let l=(0,s.createContext)(void 0),o=e=>{let{children:r}=e,[t,o]=(0,s.useState)("dark");return(0,s.useEffect)(()=>{let e=localStorage.getItem("tradetaper-theme");e?o(e):o(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[]),(0,s.useEffect)(()=>{"dark"===t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("tradetaper-theme",t)},[t]),(0,a.jsx)(l.Provider,{value:{theme:t,setTheme:e=>{o(e)},toggleTheme:()=>{o(e=>"light"===e?"dark":"light")}},children:r})},i=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},51583:(e,r,t)=>{Promise.resolve().then(t.bind(t,87012))},56051:(e,r,t)=>{"use strict";t.d(r,{PW:()=>a,d1:()=>l,w_:()=>s});var a=function(e){return e.STOCK="Stock",e.CRYPTO="Crypto",e.FOREX="Forex",e.COMMODITIES="Commodities",e.FUTURES="Futures",e.OPTIONS="Options",e}({}),s=function(e){return e.LONG="Long",e.SHORT="Short",e}({}),l=function(e){return e.OPEN="Open",e.CLOSED="Closed",e.PENDING="Pending",e.CANCELLED="Cancelled",e}({})},80722:(e,r,t)=>{"use strict";t.d(r,{Y0:()=>o,uE:()=>l,wv:()=>i});var a=t(23464);let s="https://tradetaper-backend-481634875325.us-central1.run.app/api/v1";console.log("\uD83D\uDD27 API Configuration:",{env:"production",apiUrl:s,envVar:"https://tradetaper-backend-481634875325.us-central1.run.app/api/v1",timestamp:new Date().toISOString()});let l=a.A.create({baseURL:s,headers:{"Content-Type":"application/json"}}),o=a.A.create({baseURL:s,headers:{"Content-Type":"application/json"}});function i(e){o.interceptors.request.use(r=>{let t=e().auth.token;return t&&(r.headers.Authorization="Bearer ".concat(t)),console.log("\uD83D\uDE80 Making authenticated API request to:",r.baseURL+r.url),r},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>{var r,t,a;return console.error("❌ API Request failed:",{url:null==(r=e.config)?void 0:r.url,baseURL:null==(t=e.config)?void 0:t.baseURL,status:null==(a=e.response)?void 0:a.status,message:e.message}),e.response&&401===e.response.status&&console.log("Unauthorized from interceptor..."),Promise.reject(e)}),console.log("[API.TS] Auth interceptors configured.")}},87012:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>P});var a=t(95155),s=t(12115),l=t(35695),o=t(34540),i=t(23352),d=t(6874),n=t.n(d),c=t(44969),x=t(37049);let m=(0,s.memo)(e=>{let{trade:r,priceData:t=[],volumeData:l=[],showVolume:o=!0,showMovingAverages:i=!0,enableInteraction:d=!0,height:n=400}=e,{theme:m}=(0,x.D)(),[g,u]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!0),[b,y]=(0,s.useState)("candlestick"),f=(0,s.useRef)(null),v=(0,s.useRef)(null),k=(0,s.useRef)(null),N=(0,s.useRef)(null),w=(0,s.useRef)(null),j=(0,s.useRef)(null),D=(0,s.useRef)(null),T=(0,s.useRef)(null),S=(0,s.useCallback)(()=>{let e="dark"===m;return{background:e?"#1f2937":"#ffffff",textColor:e?"#e5e7eb":"#374151",gridColor:e?"#374151":"#e5e7eb",upColor:"#10b981",downColor:"#ef4444",volumeUpColor:"rgba(16, 185, 129, 0.3)",volumeDownColor:"rgba(239, 68, 68, 0.3)",ma20Color:"#3b82f6",ma50Color:"#f59e0b"}},[m]),C={upColor:S().upColor,downColor:S().downColor,borderVisible:!1,wickUpColor:S().upColor,wickDownColor:S().downColor},P=(0,s.useCallback)((e,r)=>{let t=[];for(let a=r-1;a<e.length;a++){let s=0;for(let t=0;t<r;t++)s+=e[a-t].close;t.push({time:e[a].time,value:s/r})}return t},[]),U=(0,s.useCallback)(e=>e.map(e=>({time:e.time,value:e.close})),[]),L=(0,s.useCallback)(()=>{try{if(!f.current)return;let e=S(),r={width:f.current.clientWidth,height:g?window.innerHeight:n,layout:{background:{type:c.mE.Solid,color:e.background},textColor:e.textColor,fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif",fontSize:12},grid:{vertLines:{color:e.gridColor,style:c.Sc.Dotted},horzLines:{color:e.gridColor,style:c.Sc.Dotted}},rightPriceScale:{borderVisible:!1,scaleMargins:{top:o?.1:.05,bottom:o?.4:.05},mode:c.xt.Normal},leftPriceScale:{visible:o,borderVisible:!1,scaleMargins:{top:.8,bottom:0}},timeScale:{borderVisible:!1,timeVisible:!0,secondsVisible:!0,tickMarkFormatter:e=>new Date(1e3*e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},crosshair:{mode:p?c._q.Normal:c._q.Hidden,vertLine:{labelVisible:!0,style:c.Sc.Solid,width:1,color:e.textColor},horzLine:{labelVisible:!0,style:c.Sc.Solid,width:1,color:e.textColor}},handleScroll:d,handleScale:d,kineticScroll:{touch:d,mouse:d}};v.current=(0,c.R9)(f.current,r)}catch(e){console.error("Error initializing chart:",e)}},[S,n,g,p,o,d]),A=(0,s.useCallback)(e=>{[k,N,w,j,D,T].forEach(r=>{if(r.current){try{e.removeSeries(r.current)}catch(e){console.warn("Error removing series:",e)}r.current=null}})},[]),E=(0,s.useCallback)(()=>{try{let e=f.current,a=v.current;if(!e||!a||(a.resize(e.clientWidth,g?window.innerHeight:n),A(a),0===t.length))return;let s=S(),d=null;if("candlestick"===b){let e=a.addSeries(c.HD,{...C,priceScaleId:"right"});e.setData(t),k.current=e,d=e}else if("line"===b){let e=U(t),r=a.addSeries(c.Im,{color:s.upColor,lineWidth:2,priceScaleId:"right"});r.setData(e),N.current=r,d=r}else if("area"===b){let e=U(t),r=a.addSeries(c.ti,{topColor:"".concat(s.upColor,"33"),bottomColor:"".concat(s.upColor,"00"),lineColor:s.upColor,lineWidth:2,priceScaleId:"right"});r.setData(e),w.current=r,d=r}if(o&&l.length>0&&d){let e=a.addSeries(c.Ej,{color:s.volumeUpColor,priceFormat:{type:"volume"},priceScaleId:"left",scaleMargins:{top:.8,bottom:0}});e.setData(l),j.current=e}if(i&&t.length>=50&&d){let e=P(t,20),r=P(t,50);if(e.length>0){let r=a.addSeries(c.Im,{color:s.ma20Color,lineWidth:1,lineStyle:c.Sc.Solid,priceScaleId:"right"});r.setData(e),D.current=r}if(r.length>0){let e=a.addSeries(c.Im,{color:s.ma50Color,lineWidth:1,lineStyle:c.Sc.Solid,priceScaleId:"right"});e.setData(r),T.current=e}}if(d){if(r.entryPrice&&d.createPriceLine({price:r.entryPrice,color:"#3b82f6",lineWidth:2,lineStyle:c.Sc.Solid,axisLabelVisible:!0,title:"Entry @ ".concat(r.entryPrice.toFixed(4))}),r.exitPrice){let e=r.profitOrLoss&&r.profitOrLoss>0;d.createPriceLine({price:r.exitPrice,color:e?"#10b981":"#ef4444",lineWidth:2,lineStyle:c.Sc.Solid,axisLabelVisible:!0,title:"Exit @ ".concat(r.exitPrice.toFixed(4))})}r.stopLoss&&d.createPriceLine({price:r.stopLoss,color:"#ef4444",lineWidth:2,lineStyle:c.Sc.Dashed,axisLabelVisible:!0,title:"SL @ ".concat(r.stopLoss.toFixed(4))}),r.takeProfit&&d.createPriceLine({price:r.takeProfit,color:"#10b981",lineWidth:2,lineStyle:c.Sc.Dashed,axisLabelVisible:!0,title:"TP @ ".concat(r.takeProfit.toFixed(4))})}a.timeScale().fitContent()}catch(e){console.error("Error updating chart:",e)}},[t,l,r,b,o,i,n,g,S,A,P,U,C]),F=(0,s.useCallback)(()=>{u(!g)},[g]),R=(0,s.useCallback)(e=>{y(e)},[]),M=(0,s.useCallback)(()=>{v.current&&v.current.timeScale().fitContent()},[]),I=(0,s.useCallback)(()=>{h(!p)},[p]);return(0,s.useEffect)(()=>{v.current||L(),E()},[L,E]),(0,s.useEffect)(()=>{let e=()=>{v.current&&f.current&&v.current.resize(f.current.clientWidth,g?window.innerHeight:n)},r=e=>{"Escape"===e.key&&g&&u(!1)};return window.addEventListener("resize",e),window.addEventListener("keydown",r),()=>{window.removeEventListener("resize",e),window.removeEventListener("keydown",r)}},[g,n]),(0,s.useEffect)(()=>()=>{v.current&&(v.current.remove(),v.current=null)},[]),(0,a.jsxs)("div",{className:"relative w-full bg-transparent rounded-lg overflow-hidden ".concat(g?"fixed inset-0 z-50 bg-white dark:bg-gray-900":""),style:{height:g?"100vh":n},children:[d&&(0,a.jsxs)("div",{className:"absolute top-2 left-2 z-10 flex flex-wrap gap-2",children:[(0,a.jsx)("div",{className:"flex bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:["candlestick","line","area"].map(e=>(0,a.jsx)("button",{onClick:()=>R(e),className:"px-3 py-1.5 text-xs font-medium transition-all duration-200 first:rounded-l-lg last:rounded-r-lg ".concat(b===e?"bg-blue-500 text-white shadow-sm":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("button",{onClick:I,className:"px-3 py-1.5 text-xs font-medium rounded-lg backdrop-blur-sm border transition-all duration-200 ".concat(p?"bg-blue-500/20 border-blue-500/50 text-blue-600 dark:text-blue-400":"bg-white/90 dark:bg-gray-800/90 border-gray-200/50 dark:border-gray-700/50 text-gray-600 dark:text-gray-300"),title:"Toggle Crosshair",children:"✚"}),(0,a.jsx)("button",{onClick:M,className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200",title:"Reset Zoom",children:"\uD83D\uDD0D"}),d&&(0,a.jsx)("button",{onClick:F,className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200",title:g?"Exit Fullscreen (ESC)":"Fullscreen",children:g?"⤵":"⤴"})]})]}),(()=>{var e;return(0,a.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,a.jsxs)("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200/50 dark:border-gray-700/50 p-3",children:[(0,a.jsxs)("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[r.symbol," - ",r.direction]}),(0,a.jsxs)("div",{className:"space-y-1 text-xs",children:[i&&t.length>=50&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-0.5 bg-blue-500"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"MA(20)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-0.5 bg-amber-500"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"MA(50)"})]})]}),void 0!==r.profitOrLoss&&(0,a.jsxs)("div",{className:"font-medium ".concat(r.profitOrLoss>=0?"text-green-600":"text-red-600"),children:["P&L: ",r.profitOrLoss>=0?"+":"",null==(e=r.profitOrLoss)?void 0:e.toFixed(2)]})]})]})})})(),(0,a.jsx)("div",{ref:f,className:"w-full h-full",children:(!t||0===t.length)&&(0,a.jsx)("div",{className:"h-full flex items-center justify-center text-gray-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC8"}),(0,a.jsx)("div",{className:"text-lg font-medium",children:"No price data available"}),(0,a.jsx)("div",{className:"text-sm",children:"Chart will display when price data is loaded"})]})})})]})});m.displayName="TradeChart";var g=t(80722),u=t(32620);let p={XAUUSD:{assetType:"commodities",description:"Gold vs US Dollar"},XAGUSD:{assetType:"commodities",description:"Silver vs US Dollar"},XPTUSD:{assetType:"commodities",description:"Platinum vs US Dollar"},XPDUSD:{assetType:"commodities",description:"Palladium vs US Dollar"},USOIL:{assetType:"commodities",description:"US Crude Oil"},UKOIL:{assetType:"commodities",description:"UK Brent Oil"},NATGAS:{assetType:"commodities",description:"Natural Gas"},WHEAT:{assetType:"commodities",description:"Wheat"},CORN:{assetType:"commodities",description:"Corn"},SOYBEAN:{assetType:"commodities",description:"Soybean"},EURUSD:{assetType:"forex",description:"Euro vs US Dollar"},GBPUSD:{assetType:"forex",description:"British Pound vs US Dollar"},USDJPY:{assetType:"forex",description:"US Dollar vs Japanese Yen"},USDCHF:{assetType:"forex",description:"US Dollar vs Swiss Franc"},AUDUSD:{assetType:"forex",description:"Australian Dollar vs US Dollar"},USDCAD:{assetType:"forex",description:"US Dollar vs Canadian Dollar"},NZDUSD:{assetType:"forex",description:"New Zealand Dollar vs US Dollar"},EURGBP:{assetType:"forex",description:"Euro vs British Pound"},EURJPY:{assetType:"forex",description:"Euro vs Japanese Yen"},GBPJPY:{assetType:"forex",description:"British Pound vs Japanese Yen"},CHFJPY:{assetType:"forex",description:"Swiss Franc vs Japanese Yen"},AUDCAD:{assetType:"forex",description:"Australian Dollar vs Canadian Dollar"},AUDCHF:{assetType:"forex",description:"Australian Dollar vs Swiss Franc"},AUDJPY:{assetType:"forex",description:"Australian Dollar vs Japanese Yen"},CADCHF:{assetType:"forex",description:"Canadian Dollar vs Swiss Franc"},CADJPY:{assetType:"forex",description:"Canadian Dollar vs Japanese Yen"},CHFCAD:{assetType:"forex",description:"Swiss Franc vs Canadian Dollar"},EURAUD:{assetType:"forex",description:"Euro vs Australian Dollar"},EURCAD:{assetType:"forex",description:"Euro vs Canadian Dollar"},EURCHF:{assetType:"forex",description:"Euro vs Swiss Franc"},EURNZD:{assetType:"forex",description:"Euro vs New Zealand Dollar"},GBPAUD:{assetType:"forex",description:"British Pound vs Australian Dollar"},GBPCAD:{assetType:"forex",description:"British Pound vs Canadian Dollar"},GBPCHF:{assetType:"forex",description:"British Pound vs Swiss Franc"},GBPNZD:{assetType:"forex",description:"British Pound vs New Zealand Dollar"},NZDCAD:{assetType:"forex",description:"New Zealand Dollar vs Canadian Dollar"},NZDCHF:{assetType:"forex",description:"New Zealand Dollar vs Swiss Franc"},NZDJPY:{assetType:"forex",description:"New Zealand Dollar vs Japanese Yen"},USDZAR:{assetType:"forex",description:"US Dollar vs South African Rand"},USDMXN:{assetType:"forex",description:"US Dollar vs Mexican Peso"},USDTRY:{assetType:"forex",description:"US Dollar vs Turkish Lira"},USDSEK:{assetType:"forex",description:"US Dollar vs Swedish Krona"},USDNOK:{assetType:"forex",description:"US Dollar vs Norwegian Krone"},USDDKK:{assetType:"forex",description:"US Dollar vs Danish Krone"},USDPLN:{assetType:"forex",description:"US Dollar vs Polish Zloty"},USDCZK:{assetType:"forex",description:"US Dollar vs Czech Koruna"},USDHUF:{assetType:"forex",description:"US Dollar vs Hungarian Forint"},BTCUSD:{assetType:"crypto",description:"Bitcoin vs US Dollar"},ETHUSD:{assetType:"crypto",description:"Ethereum vs US Dollar"},LTCUSD:{assetType:"crypto",description:"Litecoin vs US Dollar"},XRPUSD:{assetType:"crypto",description:"Ripple vs US Dollar"},BCHUSD:{assetType:"crypto",description:"Bitcoin Cash vs US Dollar"},ADAUSD:{assetType:"crypto",description:"Cardano vs US Dollar"},DOTUSD:{assetType:"crypto",description:"Polkadot vs US Dollar"},LINKUSD:{assetType:"crypto",description:"Chainlink vs US Dollar"},AAPL:{assetType:"stocks",description:"Apple Inc."},GOOGL:{assetType:"stocks",description:"Alphabet Inc."},MSFT:{assetType:"stocks",description:"Microsoft Corporation"},AMZN:{assetType:"stocks",description:"Amazon.com Inc."},TSLA:{assetType:"stocks",description:"Tesla Inc."},META:{assetType:"stocks",description:"Meta Platforms Inc."},NFLX:{assetType:"stocks",description:"Netflix Inc."},NVDA:{assetType:"stocks",description:"NVIDIA Corporation"},JPM:{assetType:"stocks",description:"JPMorgan Chase & Co."},V:{assetType:"stocks",description:"Visa Inc."}},h=["USD","EUR","GBP","JPY","CHF","AUD","CAD","NZD"],b=["BTC","ETH","LTC","XRP","BCH","ADA","DOT","LINK"],y=["XAU","XAG","XPT","XPD"];function f(e){let r=e.toUpperCase().trim();if(p[r])return p[r];if(y.some(e=>r.startsWith(e)))return{assetType:"commodities",description:"".concat(r," Commodity")};if(r.endsWith("USD")&&r.length>=6){let e=r.slice(0,-3);if(b.includes(e))return{assetType:"crypto",description:"".concat(e," vs US Dollar")}}if(6===r.length){let e=r.slice(0,3),t=r.slice(3,6);if(h.includes(e)&&h.includes(t))return{assetType:"forex",description:"".concat(e," vs ").concat(t)}}if(r.includes("/")){let[e,t]=r.split("/");if(e&&t&&h.includes(e)&&h.includes(t))return{assetType:"forex",description:"".concat(e," vs ").concat(t)}}return r.length<=5&&r.match(/^[A-Z]+$/)?{assetType:"stocks",description:"".concat(r," Stock")}:(console.warn("Unable to classify symbol: ".concat(e,". Defaulting to forex.")),{assetType:"forex",description:"".concat(r," (unclassified, defaulting to forex)")})}async function v(e,r,t,a){let s=(0,u.GP)(r,"yyyy-MM-dd"),l=(0,u.GP)(t,"yyyy-MM-dd");console.log("%c[FRONTEND - fetchRealPriceData] Sending request to backend with:","color: blue; font-weight: bold;",{rawSymbol:e,rawFromDateObj:r,rawToDateObj:t,rawInterval:a,processedSymbol:null==e?void 0:e.toUpperCase(),processedStartDate:s,processedEndDate:l,processedInterval:null==a?void 0:a.toLowerCase()});try{let r,t=new URLSearchParams({startDate:s,endDate:l,interval:a}),o=f(e);if("commodities"===o.assetType&&e.toUpperCase().startsWith("XAU")){let a="/market-data/historical/forex/XAU/USD";r="".concat(a,"?").concat(t.toString()),console.log("%c[FRONTEND - fetchRealPriceData] Using forex endpoint for commodity (temporary):","color: orange; font-weight: bold;",{originalSymbol:e,assetType:"commodities (using forex endpoint)",apiEndpoint:a,apiUrl:r})}else try{let a=function(e){let r=f(e),t=e.toUpperCase().trim();switch(r.assetType){case"forex":if(t.includes("/")){let[e,r]=t.split("/");return"/market-data/historical/forex/".concat(e,"/").concat(r)}if(6===t.length){let e=t.slice(0,3),r=t.slice(3,6);return"/market-data/historical/forex/".concat(e,"/").concat(r)}throw Error("Invalid forex symbol format: ".concat(e));case"commodities":return"/market-data/historical/commodities/".concat(t);case"stocks":return"/market-data/historical/stocks/".concat(t);case"crypto":return"/market-data/historical/crypto/".concat(t);default:throw Error("Unknown asset type: ".concat(r.assetType))}}(e);r="".concat(a,"?").concat(t.toString()),console.log("%c[FRONTEND - fetchRealPriceData] Symbol classification:","color: green; font-weight: bold;",{originalSymbol:e,assetType:o.assetType,description:o.description,apiEndpoint:a,apiUrl:r})}catch(i){let a,s=e.toUpperCase();if(s.includes("/"))a=s.split("/");else if(6===s.length)a=[s.slice(0,3),s.slice(3,6)];else throw Error("Unable to classify symbol: ".concat(e));let[l,o]=a;r="/market-data/historical/forex/".concat(l,"/").concat(o,"?").concat(t.toString()),console.log("%c[FRONTEND - fetchRealPriceData] Fallback to forex format:","color: orange;",{originalSymbol:e,baseCurrency:l,quoteCurrency:o,apiUrl:r})}let i=await g.Y0.get(r);if(!i.data)return console.warn("[fetchRealPriceData] No data received from backend for symbol:",e),[];return i.data.map(e=>({time:e.time,open:e.open,high:e.high,low:e.low,close:e.close}))}catch(e){if(console.error("%c[FRONTEND - fetchRealPriceData] Axios Error:","color: red; font-weight: bold;",e),e.isAxiosError&&e.response){if(console.error("%c[FRONTEND - fetchRealPriceData] Axios error.response.data:","color: red;",e.response.data),console.error("%c[FRONTEND - fetchRealPriceData] Axios error.response.status:","color: red;",e.response.status),console.error("%c[FRONTEND - fetchRealPriceData] Axios error.response.headers:","color: red;",e.response.headers),403===e.response.status||400===e.response.status){var o,i;let r=(null==(o=e.response.data)?void 0:o.message)||(null==(i=e.response.data)?void 0:i.error)||"API access limitation";console.warn("%c[FRONTEND - fetchRealPriceData] API Limitation detected:","color: orange;",r),(r.includes("one month history")||r.includes("working days"))&&console.info("%c[FRONTEND - fetchRealPriceData] Suggestion: Try using daily interval or shorter date range","color: blue;")}}else e.request?console.error("%c[FRONTEND - fetchRealPriceData] Axios error: No response received, request was made.","color: red;",e.request):console.error("%c[FRONTEND - fetchRealPriceData] Axios error: Error setting up request.","color: red;",e.message);throw e}}var k=t(5535),N=t(2845),w=t(98449),j=t(56051),D=t(9107),T=t(40714),S=t(29911);let C=[{value:"1minute",label:"1m"},{value:"5minute",label:"5m"},{value:"15minute",label:"15m"},{value:"hourly",label:"1h"},{value:"daily",label:"1D"}];function P(){var e,r;let t=(0,o.wA)(),d=(0,l.useParams)().tradeId,{currentTrade:c,isLoading:x,error:g}=(0,o.d4)(e=>e.trades),[p,h]=(0,s.useState)([]),[b,y]=(0,s.useState)(!1),[f,P]=(0,s.useState)("15minute"),[U,L]=(0,s.useState)(null);(0,s.useEffect)(()=>{d&&t((0,i.PE)(d))},[t,d]),(0,s.useEffect)(()=>{if(c&&c.id===d&&f){let e,r;y(!0),L(null);let t=new Date(c.entryDate);"1minute"===f||"5minute"===f?(e=(0,D.e)(t,2),r=(0,T.f)(c.exitDate?new Date(c.exitDate):t,1)):"15minute"===f||"30minute"===f?(e=(0,D.e)(t,5),r=(0,T.f)(c.exitDate?new Date(c.exitDate):t,1)):"hourly"===f?(e=(0,D.e)(t,14),r=(0,T.f)(c.exitDate?new Date(c.exitDate):t,3)):(e=(0,D.e)(t,30),r=(0,T.f)(c.exitDate?new Date(c.exitDate):t,7));let a=new Date;r>a&&(r=a),v(c.symbol,e,r,f).then(e=>{h(e),L(null)}).catch(t=>{var a,s;if(console.error("Failed to fetch price data:",t),(null==(a=t.response)?void 0:a.status)===403||(null==(s=t.response)?void 0:s.status)===400)return console.log("Attempting fallback to daily data due to API limitations..."),L("".concat(f," data is not available with current API plan. Showing daily data instead.")),v(c.symbol,e,r,"daily").then(e=>{console.log("Fallback to daily data successful:",e.length,"data points"),h(e)}).catch(e=>{console.error("Fallback to daily data also failed:",e),h([]),L("Unable to load price data. Please try again later.")});h([]),L("Unable to load price data. Please check your connection and try again.")}).finally(()=>{y(!1)})}},[c,d,f]);let A=(0,s.useMemo)(()=>{if(!(null==c?void 0:c.entryDate))return null;let e=new Date(c.entryDate),r=c.exitDate?new Date(c.exitDate):new Date,t=(0,k.o)(r,e),a=(0,N.M)(r,e),s=(0,w.c)(r,e);return s>0?"".concat(s,"d ").concat(a%24,"h"):a>0?"".concat(a,"h ").concat(t%60,"m"):"".concat(t,"m")},[c]),E=(0,s.useMemo)(()=>{if(!(null==c?void 0:c.entryPrice))return{mfe:0,mae:0};let e=c.profitOrLoss||0;return{mfe:1.2*Math.abs(e),mae:.3*Math.abs(e)}},[c]),F=(0,s.useMemo)(()=>{if(!(null==c?void 0:c.entryPrice)||!(null==c?void 0:c.stopLoss)||!(null==c?void 0:c.takeProfit))return null;let e=Math.abs(c.entryPrice-c.stopLoss);return Math.abs(c.takeProfit-c.entryPrice)/e},[c]);if(x&&!c)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("div",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Loading trade details..."})]})});if(g&&!c)return(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-red-500 to-red-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(S.QVr,{className:"w-10 h-10 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Error Loading Trade"}),(0,a.jsx)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:g}),(0,a.jsxs)(n(),{href:"/journal",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-200 hover:scale-105 shadow-lg",children:[(0,a.jsx)(S.QVr,{className:"mr-2"}),"Back to Journal"]})]})});if(!c)return(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-gray-500 to-gray-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(S.QVr,{className:"w-10 h-10 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Trade Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"The trade you're looking for doesn't exist."}),(0,a.jsxs)(n(),{href:"/journal",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-200 hover:scale-105 shadow-lg",children:[(0,a.jsx)(S.QVr,{className:"mr-2"}),"Back to Journal"]})]})});let R=c.profitOrLoss||0,M=R>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",I=c.direction===j.w_.LONG?S.uCC:S.$TP,O=c.entryPrice&&c.quantity?R/(c.entryPrice*c.quantity)*100:0;return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)(n(),{href:"/journal",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors p-2 rounded-xl hover:bg-gray-100/80 dark:hover:bg-gray-800/80",children:[(0,a.jsx)(S.QVr,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Back to Journal"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl shadow-lg ".concat(c.direction===j.w_.LONG?"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-red-500 to-red-600"),children:s.createElement(I,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:c.symbol}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-300",children:[c.direction," • ",c.assetType]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold ".concat(M),children:[R>=0?"+":"","$",Math.abs(R).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsxs)("div",{className:"text-sm font-medium ".concat(M),children:[O>=0?"+":"",O.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{onClick:()=>navigator.clipboard.writeText(window.location.href),className:"p-3 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-blue-500 dark:hover:bg-blue-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105",title:"Copy link",children:(0,a.jsx)(S.paH,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>window.print(),className:"p-3 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-green-500 dark:hover:bg-green-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105",title:"Export",children:(0,a.jsx)(S.WCW,{className:"h-4 w-4"})}),(0,a.jsxs)(n(),{href:"/journal/edit/".concat(d),className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,a.jsx)(S.uO9,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Edit Trade"})]})]})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"px-4 py-2 rounded-xl text-sm font-semibold shadow-lg ".concat(c.status===j.d1.CLOSED?"bg-gradient-to-r from-green-500 to-green-600 text-white":c.status===j.d1.OPEN?"bg-gradient-to-r from-blue-500 to-blue-600 text-white":"bg-gradient-to-r from-gray-500 to-gray-600 text-white"),children:c.status}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,a.jsxs)("span",{children:["Opened: ",(0,u.GP)(new Date(c.entryDate),"MMM dd, yyyy HH:mm")]}),c.exitDate&&(0,a.jsxs)("span",{className:"ml-4",children:["Closed: ",(0,u.GP)(new Date(c.exitDate),"MMM dd, yyyy HH:mm")]})]})]})}),(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200/30 dark:border-gray-700/30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-green-500/20 rounded-xl",children:(0,a.jsx)(S.YYR,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Price Chart - ",c.symbol]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Interactive price analysis for trade execution"})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:C.map(e=>(0,a.jsx)("button",{onClick:()=>P(e.value),className:"px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ".concat(f===e.value?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"bg-gray-100/80 dark:bg-gray-800/80 text-gray-600 dark:text-gray-400 hover:bg-gray-200/80 dark:hover:bg-gray-700/80 hover:text-gray-900 dark:hover:text-white"),children:e.label},e.value))})]})}),(0,a.jsxs)("div",{className:"p-6",children:[U&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-amber-50/80 dark:bg-amber-900/20 backdrop-blur-sm border border-amber-200/50 dark:border-amber-700/50 rounded-xl",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-5 h-5 text-amber-600 dark:text-amber-400",children:"⚠️"}),(0,a.jsx)("div",{className:"text-sm text-amber-800 dark:text-amber-200 font-medium",children:U})]})}),(0,a.jsx)("div",{className:"h-[600px] w-full rounded-xl overflow-hidden bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:b?(0,a.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading chart data..."})]})}):(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsx)(m,{trade:c,priceData:p})})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-6 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"xl:col-span-2 lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-500/20 to-green-500/20 rounded-xl",children:(0,a.jsx)(S.yk7,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Trade Execution"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Entry and exit details"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-green-600 dark:text-green-400 mb-1",children:"ENTRY PRICE"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["$",(null==(e=c.entryPrice)?void 0:e.toLocaleString())||"N/A"]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:(0,u.GP)(new Date(c.entryDate),"MMM dd, yyyy HH:mm")})]}),c.exitPrice&&(0,a.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 mb-1",children:"EXIT PRICE"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["$",c.exitPrice.toLocaleString()]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:c.exitDate?(0,u.GP)(new Date(c.exitDate),"MMM dd, yyyy HH:mm"):"N/A"})]}),(0,a.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 mb-1",children:"QUANTITY"}),(0,a.jsx)("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(null==(r=c.quantity)?void 0:r.toLocaleString())||"N/A"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:c.assetType||"Units"})]}),(0,a.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-orange-600 dark:text-orange-400 mb-1",children:"DURATION"}),(0,a.jsx)("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:A||"N/A"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:c.status})]})]})]})}),(0,a.jsx)("div",{className:"xl:col-span-2 lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-red-500/20 to-orange-500/20 rounded-xl",children:(0,a.jsx)(S.Ani,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Risk Management"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Stop loss and take profit analysis"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[c.stopLoss&&(0,a.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400 mb-1",children:"STOP LOSS"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",c.stopLoss.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Risk Amount"}),(0,a.jsxs)("div",{className:"text-sm font-semibold text-red-600 dark:text-red-400",children:["$",c.entryPrice&&c.quantity?(Math.abs(c.entryPrice-c.stopLoss)*c.quantity).toLocaleString(void 0,{maximumFractionDigits:2}):"N/A"]})]})]})}),c.takeProfit&&(0,a.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-green-600 dark:text-green-400 mb-1",children:"TAKE PROFIT"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",c.takeProfit.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Reward Amount"}),(0,a.jsxs)("div",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:["$",c.entryPrice&&c.quantity?(Math.abs(c.takeProfit-c.entryPrice)*c.quantity).toLocaleString(void 0,{maximumFractionDigits:2}):"N/A"]})]})]})}),F&&(0,a.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-indigo-600 dark:text-indigo-400 mb-1",children:"RISK:REWARD"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["1:",F.toFixed(2)]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("div",{className:"px-3 py-1.5 rounded-xl text-xs font-semibold ".concat(F>=2?"bg-green-100/80 text-green-700 dark:bg-green-900/30 dark:text-green-300":F>=1?"bg-yellow-100/80 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100/80 text-red-700 dark:bg-red-900/30 dark:text-red-300"),children:F>=2?"Excellent":F>=1?"Good":"Poor"})})]})})]})]})}),(0,a.jsx)("div",{className:"xl:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-xl",children:(0,a.jsx)(S.gdQ,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Performance"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"MFE, MAE, and R-Multiple analysis"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-green-600 dark:text-green-400 mb-1",children:"MFE (MAX FAVORABLE)"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:["+$",E.mfe.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(E.mfe/Math.abs(R||1)*50,100),"%")}})})]}),(0,a.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400 mb-1",children:"MAE (MAX ADVERSE)"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:["-$",E.mae.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-2",children:(0,a.jsx)("div",{className:"bg-red-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(E.mae/Math.abs(R||1)*50,100),"%")}})})]}),c.rMultiple&&(0,a.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 mb-1",children:"R-MULTIPLE"}),(0,a.jsxs)("div",{className:"text-xl font-bold ".concat(c.rMultiple>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[c.rMultiple.toFixed(2),"R"]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:c.rMultiple>=1?"Profitable":"Loss"})]})]})]})})]}),c.imageUrl&&(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-teal-500/20 to-cyan-500/20 rounded-xl",children:(0,a.jsx)(S.YYR,{className:"h-6 w-6 text-teal-600 dark:text-teal-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Trade Chart"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Chart analysis and setup visualization"})]})]}),(0,a.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30",children:(0,a.jsxs)("div",{className:"relative w-full rounded-xl overflow-hidden shadow-lg",children:[(0,a.jsx)("img",{src:c.imageUrl,alt:"".concat(c.symbol," trade chart"),className:"w-full h-auto max-h-[600px] object-contain hover:scale-105 transition-transform duration-300 cursor-pointer",onClick:()=>window.open(c.imageUrl,"_blank"),onError:e=>{console.error("Image failed to load in journal view:",c.imageUrl),e.target.style.display="none"},onLoad:()=>console.log("Image loaded successfully in journal view:",c.imageUrl)}),(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)("button",{onClick:()=>window.open(c.imageUrl,"_blank"),className:"px-3 py-2 bg-black/50 hover:bg-black/70 text-white text-sm font-medium rounded-lg backdrop-blur-sm transition-all duration-200",children:"View Full Size"})})]})})]}),c.notes&&(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-slate-500/20 to-gray-500/20 rounded-xl",children:(0,a.jsx)(S.uO9,{className:"h-6 w-6 text-slate-600 dark:text-slate-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Trade Notes"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Personal observations and analysis"})]})]}),(0,a.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-6 border border-gray-200/30 dark:border-gray-700/30",children:(0,a.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:(0,a.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed",children:c.notes})})})]}),c.setupDetails&&(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-indigo-500/20 to-purple-500/20 rounded-xl",children:(0,a.jsx)(S.YYR,{className:"h-6 w-6 text-indigo-600 dark:text-indigo-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Setup Details"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Trade setup and analysis"})]})]}),(0,a.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-6 border border-gray-200/30 dark:border-gray-700/30",children:(0,a.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:(0,a.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed",children:c.setupDetails})})})]}),c.mistakesMade&&(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-red-500/20 to-orange-500/20 rounded-xl",children:(0,a.jsx)(S.uO9,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Mistakes Made"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Areas for improvement"})]})]}),(0,a.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-6 border border-gray-200/30 dark:border-gray-700/30",children:(0,a.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:(0,a.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed",children:c.mistakesMade})})})]}),c.lessonsLearned&&(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-green-500/20 to-teal-500/20 rounded-xl",children:(0,a.jsx)(S.uO9,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Lessons Learned"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Key takeaways and insights"})]})]}),(0,a.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-6 border border-gray-200/30 dark:border-gray-700/30",children:(0,a.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:(0,a.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed",children:c.lessonsLearned})})})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[6711,8426,3464,4540,1990,6874,1005,6234,8441,1684,7358],()=>r(51583)),_N_E=e.O()}]);