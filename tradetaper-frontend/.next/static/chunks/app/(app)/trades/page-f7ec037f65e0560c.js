(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1039],{8497:(e,r,t)=>{Promise.resolve().then(t.bind(t,69660))},69660:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>R});var a=t(95155),s=t(12115),l=t(34540),d=t(23352),n=t(70392),o=t(96787),i=t(56051),c=t(29911),x=t(32620),m=t(6874),g=t.n(m),u=t(71079);function b(e){let{trade:r,isSelected:t=!1,onSelect:s,showCheckbox:l=!1}=e,d=r.profitOrLoss||0,n=d>0,o=d<0,m=e=>{if(!e)return"-";try{return(0,x.GP)(new Date(e),"MMM dd, yyyy")}catch(e){return"-"}},b=r.direction===i.w_.LONG?c.uCC:c.$TP;return(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 rounded-2xl p-6 shadow-lg hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 group ".concat(t?"ring-2 ring-blue-500 bg-blue-50/90 dark:bg-blue-900/20":""),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[l&&(0,a.jsx)("input",{type:"checkbox",checked:t,onChange:e=>null==s?void 0:s(e.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 backdrop-blur-sm"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-xl shadow-lg ".concat(r.direction===i.w_.LONG?"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-red-500 to-red-600"),children:(0,a.jsx)(b,{className:"h-4 w-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:r.symbol}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.assetType," • ",r.direction]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[r.isStarred?(0,a.jsx)(c.gt3,{className:"h-4 w-4 text-yellow-500"}):(0,a.jsx)(c.wei,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"px-3 py-1.5 text-xs font-semibold rounded-xl shadow-sm ".concat((e=>{switch(e){case i.d1.OPEN:return"bg-gradient-to-r from-blue-500 to-blue-600 text-white";case i.d1.CLOSED:return"bg-gradient-to-r from-green-500 to-green-600 text-white";case i.d1.CANCELLED:default:return"bg-gradient-to-r from-gray-500 to-gray-600 text-white"}})(r.status)),children:r.status})]})]}),r.status===i.d1.CLOSED&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-gradient-to-br from-gray-50/80 to-white/80 dark:from-gray-800/40 dark:to-gray-900/40 backdrop-blur-sm rounded-xl border border-gray-200/30 dark:border-gray-700/30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[n?(0,a.jsx)(c.YYR,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):(0,a.jsx)(c.YYR,{className:"h-4 w-4 text-red-600 dark:text-red-400"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Net P&L"})]}),(0,a.jsxs)("span",{className:"text-lg font-bold ".concat(n?"text-green-600 dark:text-green-400":o?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:[d>=0?"+":"",(0,a.jsx)(u.e,{amount:d,className:"inline",showOriginal:!1})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-3 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"ENTRY"}),(0,a.jsx)("div",{className:"text-sm font-mono font-semibold text-gray-900 dark:text-white",children:r.entryPrice?(0,a.jsx)(u.e,{amount:r.entryPrice,className:"inline"}):"-"})]}),r.status===i.d1.CLOSED&&(0,a.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-3 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"EXIT"}),(0,a.jsx)("div",{className:"text-sm font-mono font-semibold text-gray-900 dark:text-white",children:r.exitPrice?(0,a.jsx)(u.e,{amount:r.exitPrice,className:"inline"}):"-"})]}),(0,a.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-3 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"QUANTITY"}),(0,a.jsx)("div",{className:"text-sm font-mono font-semibold text-gray-900 dark:text-white",children:r.quantity?r.quantity.toLocaleString():"-"})]}),r.rMultiple&&(0,a.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm rounded-xl p-3 border border-gray-200/30 dark:border-gray-700/30 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"R-MULTIPLE"}),(0,a.jsxs)("div",{className:"text-sm font-mono font-semibold ".concat(r.rMultiple>0?"text-green-600 dark:text-green-400":r.rMultiple<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:[r.rMultiple.toFixed(2),"R"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Entry Date:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:m(r.entryDate)})]}),r.status===i.d1.CLOSED&&r.exitDate&&(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Exit Date:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:m(r.exitDate)})]})]}),(r.ictConcept||r.session)&&(0,a.jsx)("div",{className:"mb-6 pt-4 border-t border-gray-200/30 dark:border-gray-700/30",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[r.ictConcept&&(0,a.jsx)("span",{className:"inline-block px-3 py-1.5 text-xs font-medium bg-purple-100/80 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-xl backdrop-blur-sm",children:r.ictConcept}),r.session&&(0,a.jsx)("span",{className:"inline-block px-3 py-1.5 text-xs font-medium bg-blue-100/80 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-xl backdrop-blur-sm",children:r.session})]})}),r.notes&&(0,a.jsx)("div",{className:"mb-6 pt-4 border-t border-gray-200/30 dark:border-gray-700/30",children:(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:r.notes})}),r.imageUrl&&(0,a.jsxs)("div",{className:"mb-6 pt-4 border-t border-gray-200/30 dark:border-gray-700/30",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wide",children:"Chart Preview"}),(0,a.jsxs)("div",{className:"relative rounded-xl overflow-hidden bg-gray-100/80 dark:bg-gray-800/40 backdrop-blur-sm border border-gray-200/30 dark:border-gray-700/30",children:[(0,a.jsx)("img",{src:r.imageUrl,alt:"".concat(r.symbol," trade chart"),className:"w-full h-32 object-cover hover:scale-105 transition-transform duration-300"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 pt-4 border-t border-gray-200/30 dark:border-gray-700/30",children:[(0,a.jsxs)(g(),{href:"/journal/view/".concat(r.id),className:"flex-1 flex items-center justify-center space-x-2 py-2.5 px-4 bg-gray-100/80 dark:bg-gray-800/80 hover:bg-blue-500 dark:hover:bg-blue-500 text-gray-600 dark:text-gray-400 hover:text-white rounded-xl transition-all duration-200 hover:scale-105 backdrop-blur-sm font-medium",children:[(0,a.jsx)(c.Ny1,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"View"})]}),(0,a.jsxs)(g(),{href:"/journal/edit/".concat(r.id),className:"flex-1 flex items-center justify-center space-x-2 py-2.5 px-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl transition-all duration-200 hover:scale-105 shadow-lg font-medium",children:[(0,a.jsx)(c.uO9,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Edit"})]})]})]})}var h=t(98794),y=t(23068);let p=["symbol","direction","status","entryDate","entryPrice","exitDate","exitPrice","quantity","profitOrLoss","commission","rMultiple","session","ictConcept","notes"];function v(e){var r;return{symbol:e.symbol,direction:e.direction,status:e.status,entryDate:e.entryDate?(0,x.GP)((0,h.H)(e.entryDate),"yyyy-MM-dd HH:mm:ss"):"",entryPrice:e.entryPrice||"",exitDate:e.exitDate?(0,x.GP)((0,h.H)(e.exitDate),"yyyy-MM-dd HH:mm:ss"):"",exitPrice:e.exitPrice||"",quantity:e.quantity||"",profitOrLoss:e.profitOrLoss||"",commission:e.commission||"",rMultiple:e.rMultiple||"",session:e.session||"",ictConcept:e.ictConcept||"",setupDetails:e.setupDetails||"",mistakesMade:e.mistakesMade||"",lessonsLearned:e.lessonsLearned||"",notes:e.notes||"",tags:(null==(r=e.tags)?void 0:r.map(e=>e.name).join(", "))||"",assetType:e.assetType,isStarred:e.isStarred?"Yes":"No",stopLoss:e.stopLoss||"",takeProfit:e.takeProfit||""}}function f(e,r){return[r.join(","),...e.map(e=>{let t=v(e);return r.map(e=>{let r=t[e]||"";return"string"==typeof r&&(r.includes(",")||r.includes('"'))?'"'.concat(r.replace(/"/g,'""'),'"'):r}).join(",")})].join("\n")}var k=t(54239);function j(e){let{isOpen:r,onClose:t,trades:l,accountName:d}=e,[n,o]=(0,s.useState)("csv"),[m,g]=(0,s.useState)(!1),[u,b]=(0,s.useState)({}),[j,N]=(0,s.useState)(!1),w=async()=>{N(!0);try{let r={format:n,includeOpenTrades:m,dateRange:u.from||u.to?u:void 0};var e=function(e,r){var t,a,s,l,d,n;let o,c=(t=e,a=r,o=[...t],((null==(s=a.dateRange)?void 0:s.from)||(null==(l=a.dateRange)?void 0:l.to))&&(o=o.filter(e=>{if(!e.entryDate)return!1;try{var r,t;let s=(0,h.H)(e.entryDate);if(!(0,y.f)(s)||(null==(r=a.dateRange)?void 0:r.from)&&s<a.dateRange.from||(null==(t=a.dateRange)?void 0:t.to)&&s>a.dateRange.to)return!1;return!0}catch(e){return!1}})),a.includeOpenTrades||(o=o.filter(e=>e.status===i.d1.CLOSED)),o),m=r.columns||p,g=(0,x.GP)(new Date,"yyyy-MM-dd_HH-mm-ss");switch(r.format){case"csv":{let e=f(c,m);return{filename:"trades_export_".concat(g,".csv"),data:e,mimeType:"text/csv"}}case"json":{let e=(d=c,n=m,JSON.stringify(d.map(e=>{let r=v(e),t={};return n.forEach(e=>{void 0!==r[e]&&(t[e]=r[e])}),t}),null,2));return{filename:"trades_export_".concat(g,".json"),data:e,mimeType:"application/json"}}case"excel":{let e=f(c,m);return{filename:"trades_export_".concat(g,".xlsx"),data:e,mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}default:throw Error("Unsupported export format: ".concat(r.format))}}(l,r);let a=new Blob([e.data],{type:e.mimeType}),s=URL.createObjectURL(a),d=document.createElement("a");d.href=s,d.download=e.filename,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(s),t()}catch(e){console.error("Export failed:",e),alert("Export failed. Please try again.")}finally{N(!1)}},C=l.filter(e=>{if(!m&&e.status!==i.d1.CLOSED)return!1;if(u.from||u.to){if(!e.entryDate)return!1;try{let r=new Date(e.entryDate);if(u.from&&r<u.from||u.to&&r>u.to)return!1}catch(e){return!1}}return!0}).length;return r?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-[var(--color-light-primary)] dark:bg-dark-secondary rounded-xl shadow-xl max-w-md w-full p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[var(--color-text-dark-primary)] dark:text-text-light-primary",children:"Export Trades"}),(0,a.jsx)("button",{onClick:t,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md transition-colors",children:(0,a.jsx)(c.QCr,{className:"h-4 w-4"})})]}),d&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Exporting data for: ",(0,a.jsx)("span",{className:"font-medium",children:d})]})}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary mb-2",children:"Export Format"}),(0,a.jsxs)("select",{value:n,onChange:e=>o(e.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-[var(--color-light-secondary)] dark:bg-dark-tertiary focus:ring-2 focus:ring-accent-blue focus:border-accent-blue",children:[(0,a.jsx)("option",{value:"csv",children:"CSV (Comma Separated Values)"}),(0,a.jsx)("option",{value:"excel",children:"Excel (XLSX)"}),(0,a.jsx)("option",{value:"json",children:"JSON (JavaScript Object Notation)"})]})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:m,onChange:e=>g(e.target.checked),className:"h-4 w-4 rounded border-gray-300 text-accent-blue focus:ring-accent-blue"}),(0,a.jsx)("span",{className:"text-sm text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:"Include open trades"})]})}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary mb-2",children:"Date Range (Optional)"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"From:"}),(0,a.jsx)(k.Ay,{selected:u.from,onChange:e=>b(r=>({...r,from:e||void 0})),selectsStart:!0,startDate:u.from,endDate:u.to,isClearable:!0,placeholderText:"Start date",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-[var(--color-light-secondary)] dark:bg-dark-tertiary text-sm",dateFormat:"yyyy-MM-dd"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"To:"}),(0,a.jsx)(k.Ay,{selected:u.to,onChange:e=>b(r=>({...r,to:e||void 0})),selectsEnd:!0,startDate:u.from,endDate:u.to,minDate:u.from,isClearable:!0,placeholderText:"End date",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-[var(--color-light-secondary)] dark:bg-dark-tertiary text-sm",dateFormat:"yyyy-MM-dd"})]})]})]}),(0,a.jsx)("div",{className:"mb-6 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:[(0,a.jsx)("span",{className:"font-medium",children:C})," trades will be exported",u.from||u.to?" for the selected date range":""]})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm rounded-md bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-[var(--color-text-dark-primary)] dark:text-text-light-primary transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:w,disabled:j||0===C,className:"px-4 py-2 text-sm rounded-md bg-accent-blue hover:bg-accent-blue-darker text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Exporting..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.WCW,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Export"})]})})]})]})}):null}function N(e){let{selectedTrades:r,onClearSelection:t,onBulkDelete:l,onBulkUpdateStatus:d,onBulkToggleStar:n,isLoading:o=!1}=e,[x,m]=(0,s.useState)(!1),[g,u]=(0,s.useState)(!1);if(0===r.length)return null;let b=r.map(e=>e.id),h=r.every(e=>e.isStarred),y=e=>{d(b,e),m(!1),t()};return(0,a.jsx)("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-40",children:(0,a.jsxs)("div",{className:"bg-[var(--color-light-primary)] dark:bg-dark-secondary shadow-lg rounded-lg border border-[var(--color-light-border)] dark:border-dark-border p-4 min-w-[400px]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-[var(--color-text-dark-primary)] dark:text-text-light-primary",children:[r.length," trade",1!==r.length?"s":""," selected"]}),(0,a.jsx)("button",{onClick:t,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md transition-colors",title:"Clear selection",children:(0,a.jsx)(c.QCr,{className:"h-3 w-3 text-gray-500"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>{n(b,!h),t()},disabled:o,className:"px-3 py-2 text-sm rounded-md bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/20 dark:hover:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 transition-colors disabled:opacity-50 flex items-center space-x-1",title:h?"Remove stars":"Add stars",children:[h?(0,a.jsx)(c.wei,{className:"h-4 w-4"}):(0,a.jsx)(c.gt3,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:h?"Unstar":"Star"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>m(!x),disabled:o,className:"px-3 py-2 text-sm rounded-md bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 transition-colors disabled:opacity-50 flex items-center space-x-1",children:[(0,a.jsx)(c.uO9,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Status"})]}),x&&(0,a.jsx)("div",{className:"absolute bottom-full mb-2 left-0 bg-[var(--color-light-primary)] dark:bg-dark-secondary border border-[var(--color-light-border)] dark:border-dark-border rounded-md shadow-lg min-w-[120px]",children:Object.values(i.d1).map(e=>(0,a.jsx)("button",{onClick:()=>y(e),className:"w-full text-left px-3 py-2 text-sm hover:bg-[var(--color-light-hover)] dark:hover:bg-dark-hover transition-colors first:rounded-t-md last:rounded-b-md",children:e},e))})]}),(0,a.jsx)("button",{onClick:()=>{g?(l(b),u(!1),t()):(u(!0),setTimeout(()=>u(!1),3e3))},disabled:o,className:"px-3 py-2 text-sm rounded-md transition-colors disabled:opacity-50 flex items-center space-x-1 ".concat(g?"bg-red-600 hover:bg-red-700 text-white":"bg-red-100 hover:bg-red-200 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-700 dark:text-red-300"),title:g?"Click again to confirm deletion":"Delete selected trades",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.CMH,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Confirm"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.qbC,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Delete"})]})})]})]}),g&&(0,a.jsx)("div",{className:"mt-3 p-2 bg-red-50 dark:bg-red-900/20 rounded-md",children:(0,a.jsxs)("p",{className:"text-xs text-red-700 dark:text-red-300",children:['Click "Confirm" to permanently delete ',r.length," trade",1!==r.length?"s":"",". This action cannot be undone."]})})]})})}function w(e){var r,t,l,d,n,o;let{isOpen:x,onToggle:m,filters:g,onFiltersChange:u,onClearFilters:b}=e,[h,y]=(0,s.useState)(new Set(["basic"])),p=e=>{let r=new Set(h);r.has(e)?r.delete(e):r.add(e),y(r)},v=e=>{u({...g,...e})},f=Object.values(g).some(e=>Array.isArray(e)?e.length>0:"object"==typeof e&&null!==e?Object.values(e).some(e=>null!=e):null!=e);return x?(0,a.jsxs)("div",{className:"bg-[var(--color-light-primary)] dark:bg-dark-secondary border border-[var(--color-light-border)] dark:border-dark-border rounded-lg p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[var(--color-text-dark-primary)] dark:text-text-light-primary",children:"Advanced Filters"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[f&&(0,a.jsx)("button",{onClick:b,className:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Clear All"}),(0,a.jsx)("button",{onClick:m,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md transition-colors",children:(0,a.jsx)(c.QCr,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>p("basic"),className:"flex items-center justify-between w-full text-left",children:[(0,a.jsx)("span",{className:"font-medium text-[var(--color-text-dark-primary)] dark:text-text-light-primary",children:"Basic Filters"}),h.has("basic")?(0,a.jsx)(c.Ucs,{className:"h-4 w-4"}):(0,a.jsx)(c.Vr3,{className:"h-4 w-4"})]}),h.has("basic")&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pl-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary mb-2",children:"Status"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.values(i.d1).map(e=>{var r;return(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:(null==(r=g.status)?void 0:r.includes(e))||!1,onChange:r=>{let t=g.status||[];r.target.checked?v({status:[...t,e]}):v({status:t.filter(r=>r!==e)})},className:"h-4 w-4 rounded border-gray-300 text-accent-blue focus:ring-accent-blue"}),(0,a.jsx)("span",{className:"ml-2 text-sm",children:e})]},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary mb-2",children:"Direction"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.values(i.w_).map(e=>{var r;return(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:(null==(r=g.direction)?void 0:r.includes(e))||!1,onChange:r=>{let t=g.direction||[];r.target.checked?v({direction:[...t,e]}):v({direction:t.filter(r=>r!==e)})},className:"h-4 w-4 rounded border-gray-300 text-accent-blue focus:ring-accent-blue"}),(0,a.jsx)("span",{className:"ml-2 text-sm",children:e})]},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary mb-2",children:"Asset Type"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.values(i.PW).map(e=>{var r;return(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:(null==(r=g.assetType)?void 0:r.includes(e))||!1,onChange:r=>{let t=g.assetType||[];r.target.checked?v({assetType:[...t,e]}):v({assetType:t.filter(r=>r!==e)})},className:"h-4 w-4 rounded border-gray-300 text-accent-blue focus:ring-accent-blue"}),(0,a.jsx)("span",{className:"ml-2 text-sm",children:e})]},e)})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>p("dates"),className:"flex items-center justify-between w-full text-left",children:[(0,a.jsx)("span",{className:"font-medium text-[var(--color-text-dark-primary)] dark:text-text-light-primary",children:"Date Range"}),h.has("dates")?(0,a.jsx)(c.Ucs,{className:"h-4 w-4"}):(0,a.jsx)(c.Vr3,{className:"h-4 w-4"})]}),h.has("dates")&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary mb-2",children:"From Date"}),(0,a.jsx)(k.Ay,{selected:null==(r=g.dateRange)?void 0:r.from,onChange:e=>v({dateRange:{...g.dateRange,from:e||void 0}}),isClearable:!0,placeholderText:"Select start date",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-[var(--color-light-secondary)] dark:bg-dark-tertiary",dateFormat:"yyyy-MM-dd"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary mb-2",children:"To Date"}),(0,a.jsx)(k.Ay,{selected:null==(t=g.dateRange)?void 0:t.to,onChange:e=>v({dateRange:{...g.dateRange,to:e||void 0}}),isClearable:!0,placeholderText:"Select end date",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-[var(--color-light-secondary)] dark:bg-dark-tertiary",dateFormat:"yyyy-MM-dd"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>p("performance"),className:"flex items-center justify-between w-full text-left",children:[(0,a.jsx)("span",{className:"font-medium text-[var(--color-text-dark-primary)] dark:text-text-light-primary",children:"Performance"}),h.has("performance")?(0,a.jsx)(c.Ucs,{className:"h-4 w-4"}):(0,a.jsx)(c.Vr3,{className:"h-4 w-4"})]}),h.has("performance")&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary mb-2",children:"Profit/Loss Range"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"number",placeholder:"Min",value:(null==(l=g.profitRange)?void 0:l.min)||"",onChange:e=>v({profitRange:{...g.profitRange,min:e.target.value?Number(e.target.value):void 0}}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-[var(--color-light-secondary)] dark:bg-dark-tertiary"}),(0,a.jsx)("input",{type:"number",placeholder:"Max",value:(null==(d=g.profitRange)?void 0:d.max)||"",onChange:e=>v({profitRange:{...g.profitRange,max:e.target.value?Number(e.target.value):void 0}}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-[var(--color-light-secondary)] dark:bg-dark-tertiary"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary mb-2",children:"R-Multiple Range"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"number",step:"0.1",placeholder:"Min",value:(null==(n=g.rMultipleRange)?void 0:n.min)||"",onChange:e=>v({rMultipleRange:{...g.rMultipleRange,min:e.target.value?Number(e.target.value):void 0}}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-[var(--color-light-secondary)] dark:bg-dark-tertiary"}),(0,a.jsx)("input",{type:"number",step:"0.1",placeholder:"Max",value:(null==(o=g.rMultipleRange)?void 0:o.max)||"",onChange:e=>v({rMultipleRange:{...g.rMultipleRange,max:e.target.value?Number(e.target.value):void 0}}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-[var(--color-light-secondary)] dark:bg-dark-tertiary"})]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:g.isStarred||!1,onChange:e=>v({isStarred:e.target.checked||void 0}),className:"h-4 w-4 rounded border-gray-300 text-accent-blue focus:ring-accent-blue"}),(0,a.jsx)("span",{className:"ml-2 text-sm",children:"Show only starred trades"})]})})]})]})]}):(0,a.jsxs)("button",{onClick:m,className:"flex items-center space-x-2 px-4 py-2 rounded-md border transition-colors ".concat(f?"bg-accent-blue text-white border-accent-blue":"bg-[var(--color-light-primary)] dark:bg-dark-secondary border-[var(--color-light-border)] dark:border-dark-border hover:bg-[var(--color-light-hover)] dark:hover:bg-dark-hover"),children:[(0,a.jsx)(c.YsJ,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Filters"}),f&&(0,a.jsx)("span",{className:"bg-white text-accent-blue rounded-full px-2 py-1 text-xs font-medium",children:Object.values(g).filter(e=>Array.isArray(e)?e.length>0:"object"==typeof e&&null!==e?Object.values(e).some(e=>null!=e):null!=e).length})]})}t(35279);var C=t(78374);function R(){let e=(0,l.wA)(),{trades:r,isLoading:t,error:i,total:x,page:m,limit:u}=(0,l.d4)(e=>e.trades),{isAuthenticated:h}=(0,l.d4)(e=>e.auth),y=(0,l.d4)(n.i7),p=(0,l.d4)(o.kI),[v,f]=(0,s.useState)(""),[k,R]=(0,s.useState)([]),[S,M]=(0,s.useState)(!1),[D,T]=(0,s.useState)(!1),[O,L]=(0,s.useState)({}),[E,P]=(0,s.useState)(m);(0,C.h)({enabled:!0,onConnect:()=>{},onDisconnect:()=>{},onError:e=>console.error("WebSocket error:",e)}),(0,s.useEffect)(()=>{if(h){let r=y||p;e((0,d.Cm)({accountId:r||void 0,page:E,limit:u}))}},[e,h,y,p,E,u]);let A=(0,s.useMemo)(()=>{var e,t,a,s,l,d;let n=[...r];return v&&(n=n.filter(e=>{var r,t;return e.symbol.toLowerCase().includes(v.toLowerCase())||(null==(r=e.notes)?void 0:r.toLowerCase().includes(v.toLowerCase()))||(null==(t=e.setupDetails)?void 0:t.toLowerCase().includes(v.toLowerCase()))})),O.status&&O.status.length>0&&(n=n.filter(e=>O.status.includes(e.status))),O.direction&&O.direction.length>0&&(n=n.filter(e=>O.direction.includes(e.direction))),O.assetType&&O.assetType.length>0&&(n=n.filter(e=>O.assetType.includes(e.assetType))),O.isStarred&&(n=n.filter(e=>e.isStarred)),((null==(e=O.dateRange)?void 0:e.from)||(null==(t=O.dateRange)?void 0:t.to))&&(n=n.filter(e=>{var r,t;if(!e.entryDate)return!1;let a=new Date(e.entryDate);return(null==(r=O.dateRange)||!r.from||!(a<O.dateRange.from))&&(null==(t=O.dateRange)||!t.to||!(a>O.dateRange.to))})),((null==(a=O.profitRange)?void 0:a.min)!==void 0||(null==(s=O.profitRange)?void 0:s.max)!==void 0)&&(n=n.filter(e=>{var r,t;let a=e.profitOrLoss||0;return((null==(r=O.profitRange)?void 0:r.min)===void 0||!(a<O.profitRange.min))&&((null==(t=O.profitRange)?void 0:t.max)===void 0||!(a>O.profitRange.max))})),((null==(l=O.rMultipleRange)?void 0:l.min)!==void 0||(null==(d=O.rMultipleRange)?void 0:d.max)!==void 0)&&(n=n.filter(e=>{var r,t;let a=e.rMultiple||0;return((null==(r=O.rMultipleRange)?void 0:r.min)===void 0||!(a<O.rMultipleRange.min))&&((null==(t=O.rMultipleRange)?void 0:t.max)===void 0||!(a>O.rMultipleRange.max))})),n},[r,v,O]),F=(e,r)=>{r?R(r=>[...r,e]):R(r=>r.filter(r=>r.id!==e.id))},_=()=>{L({}),f("")};return t?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("div",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Loading trades..."})]})}):i?(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-red-500 to-red-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(c.YYR,{className:"w-10 h-10 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Error Loading Trades"}),(0,a.jsx)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:i}),(0,a.jsx)("button",{onClick:()=>{let r=y||p;e((0,d.Cm)({accountId:r||void 0,page:E,limit:u}))},className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-200 hover:scale-105 shadow-lg",children:"Try Again"})]})}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl shadow-lg",children:(0,a.jsx)(c.YYR,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:"All Trades"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage and analyze your trading positions"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>M(!0),className:"flex items-center space-x-2 px-4 py-3 bg-gray-100/80 dark:bg-gray-800/80 hover:bg-green-500 dark:hover:bg-green-500 text-gray-600 dark:text-gray-400 hover:text-white rounded-xl transition-all duration-200 hover:scale-105 backdrop-blur-sm shadow-lg",children:[(0,a.jsx)(c.WCW,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Export"})]}),(0,a.jsxs)(g(),{href:"/journal/new",className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,a.jsx)(c.OiG,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add Trade"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(c.KSO,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search trades by symbol, notes, or setup details...",value:v,onChange:e=>f(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/60 dark:bg-gray-800/40 backdrop-blur-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>T(!D),className:"flex items-center space-x-2 px-4 py-3 rounded-xl font-medium transition-all duration-200 ".concat(D?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"bg-gray-100/80 dark:bg-gray-800/80 text-gray-600 dark:text-gray-400 hover:bg-gray-200/80 dark:hover:bg-gray-700/80 hover:text-gray-900 dark:hover:text-white"),children:[(0,a.jsx)(c.YsJ,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Filters"})]}),A.length>0&&(0,a.jsx)("button",{onClick:()=>{k.length===A.length?R([]):R([...A])},className:"px-4 py-3 text-sm font-medium border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/60 dark:bg-gray-800/40 hover:bg-white/80 dark:hover:bg-gray-800/60 transition-all duration-200 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white backdrop-blur-sm",children:k.length===A.length?"Deselect All":"Select All"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400 mt-4 pt-4 border-t border-gray-200/30 dark:border-gray-700/30",children:[(0,a.jsxs)("span",{children:["Showing ",A.length," of ",r.length," trades",k.length>0&&" (".concat(k.length," selected)")]}),(v||Object.keys(O).some(e=>{let r=O[e];return Array.isArray(r)?r.length>0:"object"==typeof r&&null!==r?Object.values(r).some(e=>null!=e):null!=r}))&&(0,a.jsx)("button",{onClick:_,className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors font-medium hover:underline",children:"Clear all filters"})]})]}),D&&(0,a.jsx)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:(0,a.jsx)(w,{isOpen:D,onToggle:()=>T(!D),filters:O,onFiltersChange:L,onClearFilters:_})}),0===A.length?(0,a.jsx)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-gray-500 to-gray-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(c.YYR,{className:"w-10 h-10 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:0===r.length?"No trades found":"No trades match your filters"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:0===r.length?"Create your first trade to start tracking your trading performance":"Try adjusting your search criteria or clearing the current filters"}),0===r.length&&(0,a.jsxs)(g(),{href:"/journal/new",className:"inline-flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,a.jsx)(c.OiG,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Create your first trade"})]})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:A.map(e=>(0,a.jsx)(b,{trade:e,isSelected:k.some(r=>r.id===e.id),onSelect:r=>F(e,r),showCheckbox:!0},e.id))}),(0,a.jsx)(N,{selectedTrades:k,onClearSelection:()=>R([]),onBulkDelete:e=>{},onBulkUpdateStatus:(e,r)=>{},onBulkToggleStar:(e,r)=>{},isLoading:t}),(0,a.jsx)(j,{isOpen:S,onClose:()=>M(!1),trades:A,accountName:y?"Selected Account":"All Accounts"}),(0,a.jsx)("div",{className:"flex justify-center mt-8",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>P(e=>Math.max(e-1,1)),disabled:1===E,className:"px-4 py-2 bg-gray-200 rounded-md disabled:opacity-50",children:"Previous"}),(0,a.jsxs)("span",{children:["Page ",E," of ",Math.ceil(x/u)]}),(0,a.jsx)("button",{onClick:()=>P(e=>Math.min(e+1,Math.ceil(x/u))),disabled:E>=Math.ceil(x/u),className:"px-4 py-2 bg-gray-200 rounded-md disabled:opacity-50",children:"Next"})]})})]})}},78374:(e,r,t)=>{"use strict";t.d(r,{h:()=>n});var a=t(12115),s=t(34540),l=t(14298),d=t(23352);let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{enabled:r=!1,onConnect:t,onDisconnect:n,onError:o}=e,i=(0,s.wA)(),c=(0,a.useRef)(null),x=(0,a.useRef)(null),m=(0,a.useCallback)(()=>{var e;if(!r)return void console.log("WebSocket disabled - skipping connection");if(null==(e=c.current)?void 0:e.connected)return;let a="https://tradetaper-backend-481634875325.us-central1.run.app".replace(/^http/,"ws");console.log("Attempting WebSocket connection to:","".concat(a,"/trades")),c.current=(0,l.io)("".concat(a,"/trades"),{withCredentials:!0,transports:["websocket","polling"],timeout:2e4,forceNew:!0});let s=c.current;s.on("connect",()=>{console.log("✅ Connected to trades WebSocket"),null==t||t(),x.current&&(clearTimeout(x.current),x.current=null)}),s.on("disconnect",e=>{console.log("❌ Disconnected from trades WebSocket:",e),null==n||n(),r&&(x.current=setTimeout(()=>{console.log("\uD83D\uDD04 Attempting to reconnect to WebSocket..."),m()},3e3))}),s.on("connect_error",e=>{console.error("❌ WebSocket connection error:",e),null==o||o(e)}),s.on("connection",e=>{console.log("\uD83D\uDCE1 WebSocket connection established:",e.message)}),s.on("trade:created",e=>{console.log("\uD83D\uDCC8 New trade created:",e),i((0,d.kQ)(e))}),s.on("trade:updated",e=>{console.log("\uD83D\uDCCA Trade updated:",e),i((0,d.P)(e))}),s.on("trade:deleted",e=>{console.log("\uD83D\uDDD1️ Trade deleted:",e.id),i((0,d.dq)(e.id))}),s.on("trades:bulk",e=>{console.log("\uD83D\uDCE6 Bulk operation: ".concat(e.operation," (").concat(e.count," trades)")),"import"===e.operation&&e.trades&&i((0,d.IJ)(e.trades))})},[i,r,t,n,o]),g=(0,a.useCallback)(()=>{x.current&&(clearTimeout(x.current),x.current=null),c.current&&(c.current.disconnect(),c.current=null)},[]),u=(0,a.useCallback)(()=>{var e;return(null==(e=c.current)?void 0:e.connected)||!1},[]);return(0,a.useEffect)(()=>(r?m():g(),()=>{g()}),[r,m,g]),{connect:m,disconnect:g,isConnected:u,socket:c.current}}}},e=>{var r=r=>e(e.s=r);e.O(0,[5302,6711,5579,2545,3464,1990,4540,6874,3568,1005,6492,1543,9477,4298,3830,3956,8441,1684,7358],()=>r(8497)),_N_E=e.O()}]);