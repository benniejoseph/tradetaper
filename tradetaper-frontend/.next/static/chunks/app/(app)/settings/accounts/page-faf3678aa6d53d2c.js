(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1602],{10004:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(95155),s=r(12115),n=r(34540),c=r(70392),o=r(29911);let l={name:"",balance:"",currency:"USD",description:"",target:""};function d(){let e=(0,n.wA)(),t=(0,n.d4)(c.G6),r=(0,n.d4)(c.jA),d=(0,n.d4)(c.tW),i=(0,n.d4)(c.i7),[u,x]=(0,s.useState)(l),[m,g]=(0,s.useState)(null),[h,p]=(0,s.useState)(!1),[y,b]=(0,s.useState)(null);(0,s.useEffect)(()=>{e((0,c.Tq)())},[e]);let f=e=>{let{name:t,value:r}=e.target;x(e=>({...e,[t]:r}))},v=()=>{g(null),x(l),p(!0)},w=e=>{var t;g(e.id),x({id:e.id,name:e.name,balance:e.balance.toString(),currency:e.currency,description:e.description||"",target:(null==(t=e.target)?void 0:t.toString())||""}),p(!0)},j=()=>{g(null),p(!1),x(l)},k=async t=>{t.preventDefault();let r=parseFloat(u.balance);if(isNaN(r)||""===u.balance.trim())return void alert("Please enter a valid balance.");if(!u.name.trim())return void alert("Account name cannot be empty.");try{var a,s;m&&u.id?await e((0,c.RS)({id:u.id,name:u.name.trim(),balance:r,currency:u.currency,description:(null==(a=u.description)?void 0:a.trim())||void 0,target:u.target?parseFloat(u.target):void 0})).unwrap():await e((0,c._m)({name:u.name.trim(),balance:r,currency:u.currency,description:(null==(s=u.description)?void 0:s.trim())||void 0,target:u.target?parseFloat(u.target):void 0})).unwrap(),j()}catch(e){console.error("Failed to save account:",e),alert("Failed to save account. Please try again.")}},N=async t=>{if(t)try{await e((0,c.BF)(t)).unwrap(),b(null)}catch(e){console.error("Failed to delete account:",e),alert("Failed to delete account. Please try again.")}};return d?(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsx)("div",{className:"text-center py-16 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-red-200/50 dark:border-red-700/50 shadow-lg",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-red-500 to-red-600 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(o.BS8,{className:"w-10 h-10 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Accounts Service Setup Required"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:d.includes("404")||d.includes("Not Found")?"The accounts feature is being deployed. Please check back in a few minutes.":d}),(0,a.jsx)("button",{onClick:()=>e((0,c.Tq)()),className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:(0,a.jsx)("span",{children:"Retry"})})]})]})})}):(0,a.jsxs)("div",{className:"space-y-8",children:[h&&(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50/50 to-green-50/50 dark:from-blue-900/20 dark:to-green-900/20 backdrop-blur-xl rounded-2xl border border-blue-200/50 dark:border-blue-700/50 p-6 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-green-500/20 rounded-xl",children:m?(0,a.jsx)(o.uO9,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}):(0,a.jsx)(o.OiG,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:m?"Edit Account":"Add New Account"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:m?"Update your account information":"Create a new trading account"})]})]}),(0,a.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Account Name"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.ymh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",name:"name",value:u.name,onChange:f,className:"w-full pl-10 pr-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter account name",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Initial Balance"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Tsk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",name:"balance",value:u.balance,onChange:f,className:"w-full pl-10 pr-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"0.00",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Currency"}),(0,a.jsx)("input",{type:"text",name:"currency",value:u.currency||"USD",onChange:f,className:"w-full px-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"USD",maxLength:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Tsk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*",name:"target",value:u.target||"",onChange:f,className:"w-full pl-10 pr-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Target amount"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (Optional)"}),(0,a.jsx)("textarea",{name:"description",value:u.description||"",onChange:f,rows:3,className:"w-full px-4 py-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none",placeholder:"Account description..."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsxs)("button",{type:"button",onClick:j,disabled:r,className:"flex items-center space-x-2 bg-gray-100/80 dark:bg-gray-800/80 hover:bg-gray-500 dark:hover:bg-gray-500 text-gray-600 dark:text-gray-400 hover:text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(o.QCr,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Cancel"})]}),(0,a.jsxs)("button",{type:"submit",disabled:r,className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[r?(0,a.jsx)(o.hW,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(o.dIn,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:m?"Save Changes":"Add Account"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-500/20 to-blue-500/20 rounded-xl",children:(0,a.jsx)(o.YXz,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Your Accounts"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.length," account",1!==t.length?"s":""," configured"]})]})]}),!h&&(0,a.jsxs)("button",{onClick:v,disabled:r,className:"flex items-center space-x-2 bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(o.OiG,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Add Account"})]})]}),r&&0===t.length?(0,a.jsx)("div",{className:"text-center py-16 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(o.hW,{className:"w-10 h-10 text-white animate-spin"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Loading Accounts..."}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Please wait while we fetch your accounts."})]})]})}):0!==t.length||h?(0,a.jsx)("div",{className:"grid gap-6",children:t.map(e=>(0,a.jsxs)("div",{className:"group relative bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border ".concat(e.id===i?"border-green-300 dark:border-green-600 shadow-lg shadow-green-500/20":"border-gray-200/50 dark:border-gray-700/50"," p-6 transition-all duration-300 hover:shadow-2xl hover:-translate-y-1"),children:[e.id===i&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-green-500 to-blue-500 text-white p-2 rounded-full shadow-lg",children:(0,a.jsx)(o.Hu1,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl ".concat(e.id===i?"bg-gradient-to-r from-green-500/20 to-blue-500/20":"bg-gradient-to-r from-gray-500/20 to-gray-600/20"),children:(0,a.jsx)(o.ymh,{className:"w-6 h-6 ".concat(e.id===i?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400")})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"text-xl font-semibold ".concat(e.id===i?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"),children:e.name}),e.id===i&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded-lg",children:[(0,a.jsx)(o.CMH,{className:"w-3 h-3 text-green-600 dark:text-green-400"}),(0,a.jsx)("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:"Active"})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4 mt-1",children:(0,a.jsxs)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e.currency," ",Number(e.balance).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:e.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>w(e),disabled:r,className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-500/20 rounded-xl transition-all duration-200 hover:scale-110 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(o.uO9,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>b(e.id),disabled:r,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-500/20 rounded-xl transition-all duration-200 hover:scale-110 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(o.qbC,{className:"w-4 h-4"})})]})]})]},e.id))}):(0,a.jsx)("div",{className:"text-center py-16 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(o.ymh,{className:"w-10 h-10 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No Accounts Yet"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Get started by adding your first trading account to track your performance."}),(0,a.jsxs)("button",{onClick:v,className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,a.jsx)(o.OiG,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Add Your First Account"})]})]})]})})]}),y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl p-6 rounded-2xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 space-y-6 max-w-sm w-full",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(o.BS8,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Delete Account"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Are you sure you want to delete this account? This action cannot be undone."})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>b(null),disabled:r,className:"flex-1 py-2.5 px-4 bg-gray-100/80 dark:bg-gray-800/80 hover:bg-gray-500 dark:hover:bg-gray-500 text-gray-600 dark:text-gray-400 hover:text-white rounded-xl font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>N(y),disabled:r,className:"flex-1 py-2.5 px-4 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Deleting...":"Delete"})]})]})})]})}var i=r(47650),u=r(96787),x=r(80722);let m=[{name:"MetaQuotes-Demo",description:"MetaQuotes Demo Server"},{name:"ICMarketsSC-Demo",description:"IC Markets SC Demo"},{name:"ICMarketsSC-Live",description:"IC Markets SC Live"},{name:"Deriv-Demo",description:"Deriv Demo"},{name:"Deriv-Live",description:"Deriv Live"},{name:"XM-Demo",description:"XM Demo"},{name:"XM-Real",description:"XM Real"},{name:"Exness-Demo",description:"Exness Demo"},{name:"Exness-Live",description:"Exness Live"}],g=e=>{var t,r,n;let{account:c,servers:l=[],loadingServers:d,onSubmit:i,onCancel:u,isSubmitting:g}=e,[h,p]=(0,s.useState)("connect"),[y,b]=(0,s.useState)({name:(null==c?void 0:c.accountName)||"",server:(null==c?void 0:c.server)||"",login:(null==c?void 0:c.login)||"",password:"",isActive:null==(n=null==c?void 0:c.isActive)||n}),[f,v]=(0,s.useState)(null),[w,j]=(0,s.useState)(null),[k,N]=(0,s.useState)(!1),[A,C]=(0,s.useState)(0),[S,M]=(0,s.useState)(null),[T,L]=(0,s.useState)(!1),[I,D]=(0,s.useState)(!1),[F,O]=(0,s.useState)([]),[P,E]=(0,s.useState)(""),[z,U]=(0,s.useState)({}),Y=(0,s.useRef)(null),B=(0,s.useRef)(null),R=l.length>0?l:m;(0,s.useEffect)(()=>{O(R.filter(e=>e.name.toLowerCase().includes(P.toLowerCase())||e.description.toLowerCase().includes(P.toLowerCase())))},[P,R]),(0,s.useEffect)(()=>{let e=e=>{Y.current&&!Y.current.contains(e.target)&&D(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let q=(e,t)=>{b(r=>({...r,[e]:t})),z[e]&&U(t=>({...t,[e]:void 0}))},W=e=>{b(t=>({...t,server:e})),D(!1),E("")},H=()=>{let e={};return y.name.trim()||(e.name="Name is required"),y.server.trim()||(e.server="Server is required"),y.login.trim()||(e.login="Login is required"),c||y.password.trim()||(e.password="Password is required for new accounts"),U(e),0===Object.keys(e).length},_=async()=>{try{return(await x.Y0.post("/mt5-accounts/manual",{accountName:y.name||"Manual Upload Account",server:"Manual-Upload",login:y.login||"manual",isRealAccount:!1})).data.id}catch(e){throw Error("Failed to create account: ".concat(e instanceof Error?e.message:"Unknown error"))}},V=async()=>{if(f){N(!0),C(0),j(null);try{let e=S;e||(e=await _(),M(e));let t=new FormData;t.append("file",f);let r=setInterval(()=>{C(e=>Math.min(e+10,90))},200),a=await x.Y0.post("/mt5-accounts/".concat(e,"/upload-trade-history"),t,{headers:{"Content-Type":"multipart/form-data"}});clearInterval(r),C(100);let s=a.data;j(s)}catch(e){j({success:!1,message:"Upload failed: ".concat(e instanceof Error?e.message:"Unknown error"),tradesImported:0})}finally{N(!1),C(0)}}},X=e=>{let t=e.name.toLowerCase();return[".html",".htm",".xlsx",".xls"].some(e=>t.endsWith(e))?e.size>0xa00000?void j({success:!1,message:"File size too large. Maximum size is 10MB.",tradesImported:0}):void(v(e),j(null)):void j({success:!1,message:"Invalid file type. Please upload HTML or Excel files only.",tradesImported:0})};return(0,a.jsxs)("div",{className:"w-full space-y-6",children:[(0,a.jsxs)("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>p("connect"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-md font-medium transition-all ".concat("connect"===h?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:[(0,a.jsx)(o.O2x,{className:"w-4 h-4"}),"Connect Account"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>p("upload"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-md font-medium transition-all ".concat("upload"===h?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:[(0,a.jsx)(o.HVe,{className:"w-4 h-4"}),"Upload Files"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border-2 transition-all ".concat("connect"===h?"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(o.O2x,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Live Connection"})]}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time trade synchronization with automatic updates"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border-2 transition-all ".concat("upload"===h?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(o.HVe,{className:"w-4 h-4 text-green-600"}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Manual Upload"})]}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload trade history files for manual synchronization"})]})]}),"connect"===h&&(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),H()&&(c&&!y.password?i({name:y.name,server:y.server,login:y.login,isActive:y.isActive}):i(y))},className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Account Name *"}),(0,a.jsx)("input",{id:"name",type:"text",value:y.name,onChange:e=>q("name",e.target.value),className:"w-full px-4 py-3 rounded-lg border ".concat(z.name?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"," bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-opacity-50 transition-colors"),placeholder:"My Trading Account"}),z.name&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:z.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"server",className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:"MT5 Server *"}),(0,a.jsxs)("div",{className:"relative",ref:Y,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>D(!I),className:"w-full px-4 py-3 text-left rounded-lg border ".concat(z.server?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"," bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-opacity-50 transition-colors flex items-center justify-between"),children:[(0,a.jsx)("span",{className:y.server?"text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400",children:y.server||"Select MT5 Server"}),I?(0,a.jsx)(o.Ucs,{className:"h-4 w-4"}):(0,a.jsx)(o.Vr3,{className:"h-4 w-4"})]}),I&&(0,a.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:(0,a.jsx)("input",{type:"text",placeholder:"Search servers...",value:P,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:border-blue-500"})}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-48",children:d?(0,a.jsx)("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400",children:"Loading servers..."}):F.length>0?F.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>W(e.name),className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-900 dark:text-white border-b border-gray-100 dark:border-gray-600 last:border-b-0 transition-colors",children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description})]},e.name)):(0,a.jsx)("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400",children:"No servers found"})})]})]}),z.server&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:z.server})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"login",className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Login (Account Number) *"}),(0,a.jsx)("input",{id:"login",type:"text",value:y.login,onChange:e=>q("login",e.target.value),className:"w-full px-4 py-3 rounded-lg border ".concat(z.login?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"," bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-opacity-50 transition-colors"),placeholder:"123456789"}),z.login&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:z.login})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:["Password ",!c&&"*"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:"password",type:T?"text":"password",value:y.password,onChange:e=>q("password",e.target.value),className:"w-full px-4 py-3 pr-12 rounded-lg border ".concat(z.password?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"," bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-opacity-50 transition-colors"),placeholder:c?"Leave blank to keep current password":"Your MT5 password"}),(0,a.jsx)("button",{type:"button",onClick:()=>{L(!T)},className:"absolute inset-y-0 right-0 flex items-center pr-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:T?(0,a.jsx)(o.mx3,{className:"h-5 w-5"}):(0,a.jsx)(o.Ny1,{className:"h-5 w-5"})})]}),z.password&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:z.password})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{id:"isActive",type:"checkbox",checked:y.isActive,onChange:e=>q("isActive",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-900 dark:text-white",children:"Active account"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("button",{type:"button",onClick:u,className:"w-full sm:w-auto px-8 py-3 rounded-lg text-base font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"w-full sm:w-auto px-8 py-3 rounded-lg text-base font-semibold text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 shadow-lg transition-all ".concat(g?"opacity-50 cursor-not-allowed":"transform hover:scale-105"),children:g?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c?"Updating Account...":"Connecting Account..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.O2x,{className:"mr-2 inline"}),c?"Update Connection":"Connect Account"]})})]})]}),"upload"===h&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"upload-name",className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Account Name"}),(0,a.jsx)("input",{id:"upload-name",type:"text",value:y.name,onChange:e=>q("name",e.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-blue-500 focus:ring-blue-500 focus:ring-2 focus:ring-opacity-50 transition-colors",placeholder:"My Manual Account"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(o.HVe,{className:"w-4 h-4 text-green-600"}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Upload Trade History"})]}),(0,a.jsx)("div",{onDrop:e=>{e.preventDefault();let t=Array.from(e.dataTransfer.files);t.length>0&&X(t[0])},onDragOver:e=>{e.preventDefault()},className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-gray-400 dark:hover:border-gray-500 transition-colors cursor-pointer",onClick:()=>{var e;return null==(e=B.current)?void 0:e.click()},children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsx)(o.t69,{className:"w-8 h-8 text-orange-500"}),(0,a.jsx)(o.ist,{className:"w-8 h-8 text-green-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Drop your trade history file here"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"or click to browse and select a file"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 space-y-1",children:[(0,a.jsx)("p",{children:"Supported formats: HTML (.html, .htm), Excel (.xlsx, .xls)"}),(0,a.jsx)("p",{children:"Maximum file size: 10MB"})]})]})}),(0,a.jsx)("input",{ref:B,type:"file",accept:".html,.htm,.xlsx,.xls",onChange:e=>{var t;return(null==(t=e.target.files)?void 0:t[0])&&X(e.target.files[0])},className:"hidden"}),f&&(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[f.name.toLowerCase().includes(".html")?(0,a.jsx)(o.t69,{className:"w-6 h-6 text-orange-500"}):(0,a.jsx)(o.ist,{className:"w-6 h-6 text-green-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:f.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(f.size)})]})]}),(0,a.jsx)("button",{onClick:()=>v(null),className:"text-gray-500 hover:text-red-500 transition-colors",children:(0,a.jsx)(o.BS8,{className:"w-4 h-4"})})]})}),k&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"text-gray-900 dark:text-white",children:"Uploading and parsing trade history..."})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(A,"%")}})}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[A,"% complete"]})]}),w&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border ".concat(w.success?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[w.success?(0,a.jsx)(o.A7C,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)(o.BS8,{className:"w-4 h-4 text-red-600"}),(0,a.jsx)("p",{className:"font-medium ".concat(w.success?"text-green-800 dark:text-green-200":"text-red-800 dark:text-red-200"),children:w.message})]}),w.success&&w.trades&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-green-800 dark:text-green-200",children:"Import Summary"}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200 text-sm rounded",children:[w.tradesImported," trades imported"]})]}),w.trades.length>0&&(0,a.jsxs)("div",{className:"text-sm text-green-700 dark:text-green-300",children:[(0,a.jsxs)("p",{children:["• Symbols: ",[...new Set(w.trades.map(e=>e.symbol))].join(", ")]}),(0,a.jsxs)("p",{children:["• Total P&L: $",w.trades.reduce((e,t)=>e+t.profit,0).toFixed(2)]}),(0,a.jsxs)("p",{children:["• Date range: ",null==(t=w.trades[0])?void 0:t.openTime," to ",null==(r=w.trades[w.trades.length-1])?void 0:r.closeTime]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("button",{type:"button",onClick:u,className:"w-full sm:w-auto px-8 py-3 rounded-lg text-base font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all",children:"Cancel"}),(null==w?void 0:w.success)?(0,a.jsxs)("button",{type:"button",onClick:()=>window.location.reload(),className:"w-full sm:w-auto px-8 py-3 rounded-lg text-base font-semibold text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 shadow-lg transition-all transform hover:scale-105",children:[(0,a.jsx)(o.A7C,{className:"mr-2 inline"}),"View Imported Trades"]}):(0,a.jsx)("button",{type:"button",onClick:V,disabled:!f||k,className:"w-full sm:w-auto px-8 py-3 rounded-lg text-base font-semibold text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 shadow-lg transition-all ".concat(!f||k?"opacity-50 cursor-not-allowed":"transform hover:scale-105"),children:k?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.HVe,{className:"mr-2 inline"}),"Upload & Import Trades"]})})]})]})]})]})};var h=r(74229),p=r(13568);let y=()=>{let e=(0,n.wA)(),t=(0,n.d4)(u.bw),r=(0,n.d4)(u.ho),c=(0,n.d4)(u.nS),l=e=>{if(null==e)return"N/A";let t=Number(e);return isNaN(t)?"N/A":"$".concat(t.toFixed(2))},[d,x]=(0,s.useState)(!1),[m,y]=(0,s.useState)(!1),[b,f]=(0,s.useState)(null),[v,w]=(0,s.useState)(null),[j,k]=(0,s.useState)(null),[N,A]=(0,s.useState)(null),[C,S]=(0,s.useState)(null),[M,T]=(0,s.useState)([]),[L,I]=(0,s.useState)(!1),[D,F]=(0,s.useState)(!1);(0,s.useEffect)(()=>{F(!0)},[]);let O=(e,t)=>{"success"===t?p.Ay.success(e):p.Ay.error(e)};(0,s.useEffect)(()=>{e((0,u.FW)())},[e]),(0,s.useEffect)(()=>{(async()=>{console.log("Starting to fetch MT5 servers..."),I(!0);try{let e=await h.y.getServers();T(e)}catch(e){console.error("Failed to fetch MT5 servers:",e),O("Failed to load MetaTrader 5 servers. Using default servers instead.","error")}finally{I(!1)}})()},[]),(0,s.useEffect)(()=>{console.log("MT5 Servers state updated:",{servers:M,count:M.length,loadingServers:L})},[M,L]);let P=e=>{f(e),y(!0)},E=()=>{x(!1)},z=()=>{y(!1),f(null)},U=async t=>{if(v===t)try{await e((0,u.t_)(t)).unwrap(),w(null),O("The MT5 account has been successfully deleted.","success")}catch(e){O("Failed to delete the MT5 account. Please try again.","error")}else w(t),setTimeout(()=>w(null),3e3)},Y=async t=>{k(t);try{await e((0,u.T$)(t)).unwrap(),O("The MT5 account has been successfully synced.","success")}catch(e){O("Failed to sync the MT5 account. Please check credentials and try again.","error")}finally{k(null)}},B=async t=>{console.log("Form submitted with data:",t);try{if(b){let r={accountName:t.name,server:t.server,login:t.login,...t.password?{password:t.password}:{},isActive:t.isActive};console.log("Update payload:",r),await e((0,u.Xg)({id:b.id,data:r})).unwrap(),z(),O("The MT5 account has been successfully updated.","success")}else{let r={accountName:t.name,server:t.server,login:t.login,password:t.password,isActive:t.isActive};console.log("Create payload:",r),console.log("Payload types:",{accountName:typeof r.accountName,server:typeof r.server,login:typeof r.login,password:typeof r.password,isActive:typeof r.isActive}),await e((0,u.S1)(r)).unwrap(),E(),O("The MT5 account has been successfully added.","success")}}catch(e){console.error("Error submitting form:",e),O("Failed to ".concat(b?"update":"add"," the MT5 account. Please try again."),"error")}},R=e=>{let{isOpen:t,onClose:r,title:s,children:n}=e;if(!t||!D)return null;let c=(0,a.jsx)("div",{className:"fixed inset-0 z-[9999] bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"relative bg-[var(--color-light-primary)] dark:bg-dark-secondary w-full max-w-4xl max-h-[95vh] overflow-hidden rounded-xl shadow-2xl",children:[(0,a.jsxs)("div",{className:"bg-[var(--color-light-primary)] dark:bg-dark-secondary border-b border-[var(--color-light-border)] dark:border-gray-700 px-6 py-4 flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-[var(--color-text-dark-primary)] dark:text-text-light-primary",children:s}),(0,a.jsx)("button",{onClick:r,className:"text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary hover:text-[var(--color-text-dark-primary)] dark:hover:text-text-light-primary transition-colors p-2 rounded-full hover:bg-[var(--color-light-hover)] dark:hover:bg-dark-primary",children:(0,a.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-[calc(95vh-80px)]",children:(0,a.jsx)("div",{className:"px-6 py-6",children:n})})]})});return(0,i.createPortal)(c,document.body)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-[var(--color-text-dark-primary)] dark:text-text-light-primary",children:"MetaTrader 5 Accounts"}),(0,a.jsxs)("button",{onClick:()=>{console.log("Opening add account modal"),x(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 flex items-center transition-colors",children:[(0,a.jsx)(o.OiG,{className:"mr-2"}),"Add MT5 Account"]})]}),c&&(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:["Error: ",c]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-[var(--color-light-border)] dark:divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-[var(--color-light-secondary)] dark:bg-dark-primary",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary uppercase tracking-wider",children:"Server"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary uppercase tracking-wider",children:"Login"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary uppercase tracking-wider",children:"Balance"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary uppercase tracking-wider",children:(0,a.jsxs)("div",{className:"flex items-center",children:["Active",(0,a.jsxs)("div",{className:"relative ml-1 group",children:[(0,a.jsx)(o.__w,{className:"h-4 w-4 text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary cursor-help"}),(0,a.jsx)("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block w-64 p-2 bg-gray-800 dark:bg-gray-900 text-white text-xs rounded shadow-lg z-10",children:"When active, this account will be automatically synced with MetaTrader 5. Inactive accounts will not sync data but will remain in your account list."})]})]})}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary uppercase tracking-wider",children:"Last Synced"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-[var(--color-light-primary)] dark:bg-dark-secondary divide-y divide-[var(--color-light-border)] dark:divide-gray-700",children:r?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center",children:(0,a.jsxs)("div",{className:"flex justify-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading accounts..."]})})}):0===t.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:"No MetaTrader 5 accounts found. Add an account to get started."})}):t.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-[var(--color-text-dark-primary)] dark:text-text-light-primary",children:e.accountName}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:e.server}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:e.login}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:l(e.balance)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.isActive?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-300"),children:e.isActive?"Yes":"No"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:e.lastSynced?function(e){if(!e)return"Never";let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}(e.lastSynced):"Never"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>P(e),className:"text-indigo-600 hover:text-indigo-900",children:(0,a.jsx)(o.uO9,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>Y(e.id),className:"text-blue-600 hover:text-blue-900 ".concat(j===e.id?"animate-spin":""),disabled:j===e.id,children:(0,a.jsx)(o.DIg,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>U(e.id),className:"".concat(v===e.id?"text-red-600":"text-gray-600"," hover:text-red-900"),children:(0,a.jsx)(o.qbC,{className:"h-4 w-4"})})]})})]},e.id))})]})}),(0,a.jsx)(R,{isOpen:d,onClose:E,title:"Add MetaTrader 5 Account",children:(0,a.jsx)(g,{servers:M,loadingServers:L,onSubmit:B,onCancel:E,isSubmitting:r})}),(0,a.jsx)(R,{isOpen:m,onClose:z,title:"Edit MetaTrader 5 Account",children:b&&(0,a.jsx)(g,{account:b,servers:M,loadingServers:L,onSubmit:B,onCancel:z,isSubmitting:r})})]})};function b(){let e=[{id:"manual",label:"Manual Accounts",icon:(0,a.jsx)(o.YXz,{className:"w-5 h-5"})},{id:"mt5",label:"MetaTrader 5",icon:(0,a.jsx)(o.vwk,{className:"w-5 h-5"})}],[t,r]=(0,s.useState)("manual");return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:"Trading Accounts"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your trading accounts and connections"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{className:"p-3 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-blue-500 dark:hover:bg-blue-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105",children:(0,a.jsx)(o.NBi,{className:"w-4 h-4"})}),(0,a.jsx)("button",{className:"p-3 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-purple-500 dark:hover:bg-purple-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105",children:(0,a.jsx)(o.C8d,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-t-2xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("div",{className:"flex overflow-x-auto",children:e.map(e=>(0,a.jsxs)("button",{onClick:()=>r(e.id),className:"inline-flex items-center px-6 py-4 text-sm font-medium border-b-2 whitespace-nowrap focus:outline-none ".concat(t===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"),children:[(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})}),(0,a.jsxs)("div",{className:"p-8",children:["manual"===t&&(0,a.jsx)(d,{}),"mt5"===t&&(0,a.jsx)(y,{})]})]})]})}},13892:(e,t,r)=>{Promise.resolve().then(r.bind(r,10004))},70392:(e,t,r)=>{"use strict";r.d(t,{_m:()=>o,Ay:()=>k,BF:()=>d,Tq:()=>c,tW:()=>j,jA:()=>w,G6:()=>b,xB:()=>v,i7:()=>f,Rc:()=>x,RS:()=>l});var a=r(51990),s=r(80722);let n={getAccounts:async()=>(await s.Y0.get("/accounts")).data,getAccount:async e=>(await s.Y0.get("/accounts/".concat(e))).data,createAccount:async e=>(await s.Y0.post("/accounts",e)).data,updateAccount:async(e,t)=>(await s.Y0.put("/accounts/".concat(e),t)).data,async deleteAccount(e){await s.Y0.delete("/accounts/".concat(e))}},c=(0,a.zD)("accounts/fetchAccounts",async()=>await n.getAccounts()),o=(0,a.zD)("accounts/createAccount",async e=>await n.createAccount(e)),l=(0,a.zD)("accounts/updateAccount",async e=>{let{id:t,...r}=e;return await n.updateAccount(t,r)}),d=(0,a.zD)("accounts/deleteAccount",async e=>(await n.deleteAccount(e),e)),i=(0,a.Z0)({name:"accounts",initialState:{accounts:[],selectedAccountId:null,isLoading:!1,error:null},reducers:{setAccounts:(e,t)=>{e.accounts=t.payload,e.selectedAccountId&&!e.accounts.find(t=>t.id===e.selectedAccountId)&&(e.selectedAccountId=null)},setSelectedAccount:(e,t)=>{null===t.payload?e.selectedAccountId=null:e.accounts.find(e=>e.id===t.payload)?e.selectedAccountId=t.payload:console.warn("Attempted to select non-existent account ID: ".concat(t.payload))},addAccount:(e,t)=>{e.accounts.push(t.payload),e.selectedAccountId||(e.selectedAccountId=t.payload.id)},updateAccount:(e,t)=>{let r=e.accounts.findIndex(e=>e.id===t.payload.id);-1!==r?e.accounts[r]={...e.accounts[r],...t.payload}:console.warn("Attempted to update non-existent account ID: ".concat(t.payload.id))},deleteAccount:(e,t)=>{let r=t.payload;e.accounts=e.accounts.filter(e=>e.id!==r),e.selectedAccountId===r&&(e.selectedAccountId=null)},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload}},extraReducers:e=>{e.addCase(c.pending,e=>{e.isLoading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{e.isLoading=!1,e.accounts=t.payload,e.selectedAccountId&&!t.payload.find(t=>t.id===e.selectedAccountId)&&(e.selectedAccountId=null)}).addCase(c.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to fetch accounts"}).addCase(o.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.isLoading=!1,e.accounts.push(t.payload),e.selectedAccountId||(e.selectedAccountId=t.payload.id)}).addCase(o.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to create account"}).addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.isLoading=!1;let r=e.accounts.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.accounts[r]=t.payload)}).addCase(l.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to update account"}).addCase(d.pending,e=>{e.isLoading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.isLoading=!1,e.accounts=e.accounts.filter(e=>e.id!==t.payload),e.selectedAccountId===t.payload&&(e.selectedAccountId=null)}).addCase(d.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to delete account"})}}),{setAccounts:u,setSelectedAccount:x,addAccount:m,updateAccount:g,deleteAccount:h,setLoading:p,setError:y}=i.actions,b=e=>e.accounts.accounts,f=e=>e.accounts.selectedAccountId,v=e=>{let t=e.accounts.selectedAccountId;return e.accounts.accounts.find(e=>e.id===t)||null},w=e=>e.accounts.isLoading,j=e=>e.accounts.error,k=i.reducer},74229:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var a=r(80722);let s="/mt5-accounts",n={getAccounts:async()=>(await a.Y0.get(s)).data,getAccount:async e=>(await a.Y0.get("".concat(s,"/").concat(e))).data,async getServers(){try{return(await a.Y0.get("".concat(s,"/servers"))).data}catch(e){return console.error("Failed to fetch MT5 servers:",e),[{name:"demo.mt5.com",description:"MetaTrader 5 Demo Server"},{name:"icmarkets-demo",description:"IC Markets Demo Server"},{name:"fxpro-mt5demo",description:"FxPro Demo Server"},{name:"pepperstone-demo",description:"Pepperstone Demo Server"},{name:"xm-demo",description:"XM Demo Server"}]}},createAccount:async e=>(await a.Y0.post(s,e)).data,updateAccount:async(e,t)=>(await a.Y0.patch("".concat(s,"/").concat(e),t)).data,async deleteAccount(e){await a.Y0.delete("".concat(s,"/").concat(e))},syncAccount:async e=>(await a.Y0.post("".concat(s,"/").concat(e,"/sync"))).data,importTrades:async(e,t,r)=>(await a.Y0.post("".concat(s,"/").concat(e,"/import-trades"),{fromDate:t.toISOString(),toDate:r.toISOString()})).data,validateConnection:async e=>(await a.Y0.post("".concat(s,"/").concat(e,"/validate"))).data}},74436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>i});var a=r(12115),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=a.createContext&&a.createContext(s),c=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var a,s,n;a=e,s=t,n=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function i(e){return t=>a.createElement(u,o({attr:d({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,d({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:s,size:n,title:l}=e,i=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,c),u=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,i,{className:r,style:d(d({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),l&&a.createElement("title",null,l),e.children)};return void 0!==n?a.createElement(n.Consumer,null,e=>t(e)):t(s)}},80722:(e,t,r)=>{"use strict";r.d(t,{Y0:()=>c,uE:()=>n,wv:()=>o});var a=r(23464);let s="https://tradetaper-backend-481634875325.us-central1.run.app/api/v1";console.log("\uD83D\uDD27 API Configuration:",{env:"production",apiUrl:s,envVar:"https://tradetaper-backend-481634875325.us-central1.run.app/api/v1",timestamp:new Date().toISOString()});let n=a.A.create({baseURL:s,headers:{"Content-Type":"application/json"}}),c=a.A.create({baseURL:s,headers:{"Content-Type":"application/json"}});function o(e){c.interceptors.request.use(t=>{let r=e().auth.token;return r&&(t.headers.Authorization="Bearer ".concat(r)),console.log("\uD83D\uDE80 Making authenticated API request to:",t.baseURL+t.url),t},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>{var t,r,a;return console.error("❌ API Request failed:",{url:null==(t=e.config)?void 0:t.url,baseURL:null==(r=e.config)?void 0:r.baseURL,status:null==(a=e.response)?void 0:a.status,message:e.message}),e.response&&401===e.response.status&&console.log("Unauthorized from interceptor..."),Promise.reject(e)}),console.log("[API.TS] Auth interceptors configured.")}},96787:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>f,FW:()=>c,S1:()=>o,T$:()=>i,Tq:()=>p,Xg:()=>l,bw:()=>g,ho:()=>y,kI:()=>h,nS:()=>b,t_:()=>d,vh:()=>x});var a=r(51990),s=r(74229),n=r(13568);let c=(0,a.zD)("mt5Accounts/fetchAccounts",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.y.getAccounts()}catch(e){return r(e.message||"Failed to fetch MT5 accounts")}}),o=(0,a.zD)("mt5Accounts/createAccount",async(e,t)=>{let{rejectWithValue:r}=t;try{let t=await s.y.createAccount(e);return n.Ay.success("MT5 account created successfully"),t}catch(e){return n.Ay.error(e.message||"Failed to create MT5 account"),r(e.message||"Failed to create MT5 account")}}),l=(0,a.zD)("mt5Accounts/updateAccount",async(e,t)=>{let{id:r,data:a}=e,{rejectWithValue:c}=t;try{let e=await s.y.updateAccount(r,a);return n.Ay.success("MT5 account updated successfully"),e}catch(e){return n.Ay.error(e.message||"Failed to update MT5 account"),c(e.message||"Failed to update MT5 account")}}),d=(0,a.zD)("mt5Accounts/deleteAccount",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.y.deleteAccount(e),n.Ay.success("MT5 account deleted successfully"),e}catch(e){return n.Ay.error(e.message||"Failed to delete MT5 account"),r(e.message||"Failed to delete MT5 account")}}),i=(0,a.zD)("mt5Accounts/syncAccount",async(e,t)=>{let{rejectWithValue:r}=t;try{let t=await s.y.syncAccount(e);return n.Ay.success("MT5 account synced successfully"),t}catch(e){return n.Ay.error(e.message||"Failed to sync MT5 account"),r(e.message||"Failed to sync MT5 account")}}),u=(0,a.Z0)({name:"mt5Accounts",initialState:{accounts:[],selectedAccountId:null,isLoading:!1,error:null},reducers:{setSelectedMT5Account:(e,t)=>{e.selectedAccountId=t.payload},clearMT5Accounts:e=>{e.accounts=[],e.selectedAccountId=null}},extraReducers:e=>{e.addCase(c.pending,e=>{e.isLoading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{e.isLoading=!1,e.accounts=t.payload,e.error=null}).addCase(c.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(o.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.isLoading=!1,e.accounts.push(t.payload),e.selectedAccountId=t.payload.id,e.error=null}).addCase(o.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.isLoading=!1;let r=e.accounts.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.accounts[r]=t.payload),e.error=null}).addCase(l.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(d.pending,e=>{e.isLoading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.isLoading=!1,e.accounts=e.accounts.filter(e=>e.id!==t.payload),e.selectedAccountId===t.payload&&(e.selectedAccountId=null),e.error=null}).addCase(d.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.isLoading=!1;let r=e.accounts.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.accounts[r]=t.payload),e.error=null}).addCase(i.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}}),{setSelectedMT5Account:x,clearMT5Accounts:m}=u.actions,g=e=>e.mt5Accounts.accounts,h=e=>e.mt5Accounts.selectedAccountId,p=e=>{let t=e.mt5Accounts.selectedAccountId;return t?e.mt5Accounts.accounts.find(e=>e.id===t):null},y=e=>e.mt5Accounts.isLoading,b=e=>e.mt5Accounts.error,f=u.reducer}},e=>{var t=t=>e(e.s=t);e.O(0,[6711,3464,4540,1990,3568,8441,1684,7358],()=>t(13892)),_N_E=e.O()}]);