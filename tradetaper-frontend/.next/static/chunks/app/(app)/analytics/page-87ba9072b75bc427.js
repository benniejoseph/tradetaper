(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2296],{7098:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var r=a(95155),s=a(12115),d=a(34540),l=a(23352),o=a(70392),n=a(53231),c=a(32944),i=a(84423),x=a(72794),g=a(80079),u=a(37223),m=a(32620),h=a(48882),p=a(70542),y=a(3898),b=a(29911),f=a(37049);let v=e=>{let{dailyPnlData:t,onDateClick:a}=e,{theme:d}=(0,f.D)(),[l,o]=(0,s.useState)(new Date),v=(0,s.useMemo)(()=>{let e=(0,n.w)(l),t=(0,c.p)(l),a=(0,i.k)(e,{weekStartsOn:0}),r=(0,x.$)(t,{weekStartsOn:0});return(0,g.k)({start:a,end:r})},[l]),k=e=>{let t="text-dark-primary",a="text-text-light-primary";return e>200?"bg-accent-green/80 hover:bg-accent-green/100 ".concat(t):e>50?"bg-accent-green/60 hover:bg-accent-green/80 ".concat(t):e>0?"bg-accent-green/40 hover:bg-accent-green/60 ".concat(t):e<-200?"bg-accent-red/80 hover:bg-accent-red/100 ".concat(a):e<-50?"bg-accent-red/60 hover:bg-accent-red/80 ".concat(a):e<0?"bg-accent-red/40 hover:bg-accent-red/60 ".concat(a):"bg-[var(--color-light-hover)] dark:bg-dark-primary hover:bg-[var(--color-light-border)] dark:hover:bg-dark-secondary"},j="p-2 rounded-full transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-accent-green group",N="bg-[var(--color-light-hover)] hover:bg-accent-green-darker dark:bg-dark-primary dark:hover:bg-accent-green-darker",w="text-[var(--color-text-dark-secondary)] group-hover:text-dark-primary dark:text-text-light-secondary dark:group-hover:text-dark-primary";return(0,r.jsxs)("div",{className:"bg-[var(--color-light-primary)] dark:bg-dark-secondary p-4 md:p-6 rounded-lg shadow-xl text-[var(--color-text-dark-primary)] dark:text-text-light-primary",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("button",{onClick:()=>o((0,u.a)(l,1)),className:"".concat(j," ").concat(N),"aria-label":"Previous month",children:(0,r.jsx)(b._Jj,{className:"h-5 w-5 ".concat(w," transition-colors")})}),(0,r.jsx)("h2",{className:"text-xl md:text-2xl font-semibold text-[var(--color-text-dark-primary)] dark:text-text-light-primary",children:(0,m.GP)(l,"MMMM yyyy")}),(0,r.jsx)("button",{onClick:()=>o((0,h.P)(l,1)),className:"".concat(j," ").concat(N),"aria-label":"Next month",children:(0,r.jsx)(b.X6T,{className:"h-5 w-5 ".concat(w," transition-colors")})})]}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1 text-center text-xs text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,r.jsx)("div",{children:e},e))}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1",children:v.map(e=>{let s=(0,m.GP)(e,"yyyy-MM-dd"),d=t[s],o=(0,p.t)(e,l),n=d?d.pnl:0,c=o?d&&n>0?"text-dark-primary font-semibold":"text-[var(--color-text-dark-primary)] dark:text-text-light-primary font-medium":"text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary font-medium opacity-60";(0,y.r)(e,new Date)&&o&&(c="text-accent-green ring-1 ring-accent-green rounded-full px-1.5 py-0.5 font-semibold");let i=n>0?"text-dark-primary":n<0?"text-text-light-primary":"text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",x=n>0?"text-dark-primary opacity-80":n<0?"text-text-light-primary opacity-80":"text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary";return(0,r.jsxs)("div",{onClick:()=>a&&d&&a(e),className:"p-2 h-20 md:h-24 rounded border transition-colors\n                          ".concat(o?"border-[var(--color-light-border)] dark:border-gray-700":"border-[var(--color-light-secondary)] dark:border-dark-primary opacity-50","\n                          ").concat(d?k(n):o?"bg-[var(--color-light-primary)] hover:bg-[var(--color-light-hover)] dark:bg-dark-primary dark:hover:bg-dark-secondary":"bg-[var(--color-light-primary)] dark:bg-dark-primary opacity-30","\n                          ").concat(d&&a?"cursor-pointer":"","\n                          flex flex-col justify-between items-center"),children:[(0,r.jsx)("span",{className:"text-sm ".concat(c),children:(0,m.GP)(e,"d")}),o&&d&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs font-semibold ".concat(i),children:d.pnl.toFixed(2)}),(0,r.jsxs)("p",{className:"text-xxs ".concat(x),children:[d.tradeCount," trade",d.tradeCount>1?"s":""]})]})]},s)})})]})},k=e=>{let{direction:t}=e;return"asc"===t?(0,r.jsx)(b.XhJ,{className:"inline ml-1 text-accent-green"}):"desc"===t?(0,r.jsx)(b.GOR,{className:"inline ml-1 text-accent-green"}):(0,r.jsx)(b.MjW,{className:"inline ml-1 text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary opacity-70"})},j=e=>{let{title:t,data:a,groupingKeyHeader:d="Group"}=e,[l,o]=(0,s.useState)(null),n=(0,s.useMemo)(()=>{if(!a)return[];let e=[...a];return null!==l&&e.sort((e,t)=>{let a=e[l.key],r=t[l.key];return"number"==typeof a&&"number"==typeof r?"asc"===l.direction?a-r:r-a:"string"==typeof a&&"string"==typeof r?"asc"===l.direction?a.localeCompare(r):r.localeCompare(a):0}),e},[a,l]),c=e=>{let t="asc";l&&l.key===e&&"asc"===l.direction&&(t="desc"),o({key:e,direction:t})},i=e=>l&&l.key===e?l.direction:null;if(!a||0===a.length)return(0,r.jsxs)("p",{className:"text-center py-4 text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary",children:["No data to display for ",t.toLowerCase(),"."]});let x="text-[var(--color-text-dark-secondary)] dark:text-text-light-secondary";return(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)("div",{className:"overflow-x-auto rounded-lg shadow-lg dark:shadow-card-modern bg-[var(--color-light-primary)] dark:bg-dark-secondary border border-[var(--color-light-border)] dark:border-gray-700",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-[var(--color-light-border)] dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-[var(--color-light-secondary)] dark:bg-dark-primary",children:(0,r.jsx)("tr",{children:[{key:"tag",label:d},{key:"totalNetPnl",label:"Net P&L",isNumeric:!0},{key:"closedTrades",label:"Trades",isNumeric:!0},{key:"winRate",label:"Win Rate",isNumeric:!0},{key:"averageWin",label:"Avg Win",isNumeric:!0},{key:"averageLoss",label:"Avg Loss",isNumeric:!0},{key:"profitFactor",label:"Profit Factor",isNumeric:!0},{key:"expectancy",label:"Expectancy",isNumeric:!0},{key:"maxDrawdown",label:"Max Drawdown",isNumeric:!0}].map(e=>(0,r.jsxs)("th",{scope:"col",className:"".concat("px-4 py-3 text-xs font-medium text-[var(--color-text-dark-primary)] dark:text-text-light-primary uppercase tracking-wider cursor-pointer hover:bg-[var(--color-light-hover)] dark:hover:bg-gray-700 transition-colors"," ").concat(e.isNumeric?"text-right":"text-left"),onClick:()=>c(e.key),children:[e.label,(0,r.jsx)(k,{direction:i(e.key)})]},e.key))})}),(0,r.jsx)("tbody",{className:"divide-y divide-[var(--color-light-border)] dark:divide-gray-700",children:n.map((e,t)=>(0,r.jsxs)("tr",{className:"".concat(t%2==0?"bg-[var(--color-light-primary)] dark:bg-dark-secondary":"bg-[var(--color-light-secondary)] dark:bg-dark-primary"," ").concat("hover:bg-[var(--color-light-hover)] dark:hover:bg-gray-700 transition-colors"),children:[(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium ".concat("text-[var(--color-text-dark-primary)] dark:text-text-light-primary"),children:e.tag}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right ".concat(e.totalNetPnl>=0?"text-accent-green":"text-accent-red"),children:e.totalNetPnl.toFixed(2)}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right ".concat(x),children:e.closedTrades}),(0,r.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right ".concat(x),children:[e.winRate.toFixed(2),"%"]}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-accent-green text-right",children:e.averageWin.toFixed(2)}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-accent-red text-right",children:e.averageLoss.toFixed(2)}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right ".concat(x),children:e.profitFactor.toFixed(2)}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right ".concat(e.expectancy>=0?"text-accent-green":"text-accent-red"),children:e.expectancy.toFixed(2)}),(0,r.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-accent-red text-right",children:[e.maxDrawdown.toFixed(2),"%"]})]},e.tag))})]})})})};var N=a(83540),w=a(3401),T=a(94754),D=a(96025),C=a(16238),L=a(94517),P=a(24026),F=a(83394),A=a(54811);let S=e=>{let{data:t,title:a,dataKeyX:d="tag",dataKeyBar:l="totalNetPnl",barName:o="Net P&L",barColorPositive:n="var(--color-accent-green)",barColorNegative:c="var(--color-accent-red)",metricOptions:i,initialMetricValue:x}=e,g=x&&i.find(e=>e.value===x)?x:i.length>0?i[0].value:void 0,[u,m]=(0,s.useState)(g),h=(0,s.useMemo)(()=>i.find(e=>e.value===u),[u,i]);if(!t||0===t.length)return(0,r.jsxs)("p",{className:"text-text-light-secondary text-center py-4",children:["No data to display for ",a.toLowerCase()," chart."]});if(0===i.length||!u||!h)return(0,r.jsx)("p",{className:"text-text-light-secondary text-center py-4",children:"Chart metric options not configured."});let p=t.filter(e=>"number"==typeof e[l]);o=h.label;let y="maxDrawdown"!==h.value&&"averageLoss"!==h.value&&"losingTrades"!==h.value&&"lossRate"!==h.value,b=a?"".concat(a.toLowerCase().replace(/\s+/g,"-"),"-metricSelect"):"metric-select";return(0,r.jsxs)("div",{className:"w-full",children:[" ",(0,r.jsx)("div",{className:"flex flex-col sm:flex-row justify-end items-center mb-4 sm:mb-2",children:i.length>1&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[(0,r.jsx)("label",{htmlFor:b,className:"text-sm text-text-light-primary font-medium",children:"Metric:"}),(0,r.jsx)("select",{id:b,value:u,onChange:e=>m(e.target.value),className:"w-full sm:w-auto bg-dark-primary border border-gray-700 text-text-light-primary text-sm rounded-md p-2  focus:ring-2 focus:ring-accent-green focus:border-accent-green transition-colors duration-150 ease-in-out  shadow-sm hover:border-accent-green",children:i.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]})}),p.length>0?(0,r.jsx)(N.u,{width:"100%",height:350,children:(0,r.jsxs)(w.E,{data:p,margin:{top:5,right:20,left:-20,bottom:45},children:[" ",(0,r.jsx)(T.d,{strokeDasharray:"3 3",stroke:"var(--color-gray-700)"}),(0,r.jsx)(D.W,{dataKey:"tag",stroke:"var(--color-text-light-secondary)",angle:-45,textAnchor:"end",height:80,interval:0}),(0,r.jsx)(C.h,{stroke:"var(--color-text-light-secondary)",dx:-10}),(0,r.jsx)(L.m,{contentStyle:{backgroundColor:"var(--color-dark-secondary)",border:"1px solid var(--color-gray-700)",borderRadius:"0.375rem"},labelStyle:{color:"var(--color-text-light-primary)",marginBottom:"4px",fontWeight:"600"},itemStyle:{color:"var(--color-text-light-secondary)"},formatter:e=>h.isCurrency?e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):h.isPercentage?"".concat(e.toFixed(2),"%"):e.toFixed(2)}),(0,r.jsx)(P.s,{wrapperStyle:{color:"var(--color-text-light-secondary)",paddingTop:"10px"}}),(0,r.jsx)(F.y,{dataKey:u,name:o,radius:[4,4,0,0],children:p.map((e,t)=>(0,r.jsx)(A.f,{fill:e[u]>=0?y?n:c:y?c:n},"cell-".concat(t)))})]})}):(0,r.jsx)("p",{className:"text-text-light-secondary text-center py-10",children:"Not enough data for the selected metric to display chart."})]})};var M=a(77283),I=a(84336),E=a(34e3);let O=["var(--color-accent-green)","#05AFF2","#F2B705","#F25C05","#7005F2","var(--color-accent-green-darker)","#038FC7","#D9A404","#8C3F5B","#4A9D8C"],R=(e,t)=>{let a=Math.PI/180,{cx:s,cy:d,midAngle:l,innerRadius:o,outerRadius:n,startAngle:c,endAngle:i,fill:x,payload:g,percent:u,value:m}=e,h=Math.sin(-a*l),p=Math.cos(-a*l),y=s+(n+10)*p,b=d+(n+10)*h,f=s+(n+30)*p,v=d+(n+30)*h,k=f+(p>=0?1:-1)*22,j=p>=0?"start":"end";return(0,r.jsxs)("g",{children:[(0,r.jsx)("text",{x:s,y:d,dy:8,textAnchor:"middle",fill:"var(--color-text-light-primary)",fontWeight:"bold",children:g.name}),(0,r.jsx)(M.h,{cx:s,cy:d,innerRadius:o,outerRadius:n,startAngle:c,endAngle:i,fill:x}),(0,r.jsx)(M.h,{cx:s,cy:d,startAngle:c,endAngle:i,innerRadius:n+6,outerRadius:n+10,fill:x}),(0,r.jsx)("path",{d:"M".concat(y,",").concat(b,"L").concat(f,",").concat(v,"L").concat(k,",").concat(v),stroke:x,fill:"none"}),(0,r.jsx)("circle",{cx:k,cy:v,r:2,fill:x,stroke:"none"}),(0,r.jsx)("text",{x:k+(p>=0?1:-1)*12,y:v,textAnchor:j,fill:"var(--color-text-light-secondary)",children:"".concat(t(m))})," ",(0,r.jsx)("text",{x:k+(p>=0?1:-1)*12,y:v,dy:18,textAnchor:j,fill:"var(--color-text-light-secondary)",opacity:.8,children:"(Rate: ".concat((100*u).toFixed(2),"%)")})]})},W=e=>{let{data:t,title:a,dataKeyForValue:d,dataKeyForName:l="tag",valueFormatter:o=e=>e.toString()}=e,[n,c]=(0,s.useState)(void 0),i=(0,s.useCallback)((e,t)=>{c(t)},[]),x=(0,s.useCallback)(()=>{c(void 0)},[]),g=t.map(e=>({name:String(e[l]),value:Math.abs(Number(e[d]))})).filter(e=>e.value>0);return g&&0!==g.length?(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(N.u,{width:"100%",height:400,children:(0,r.jsxs)(I.r,{children:[(0,r.jsx)(E.F,{activeIndex:n,activeShape:e=>R(e,o),data:g,cx:"50%",cy:"50%",labelLine:!1,outerRadius:120,innerRadius:70,fill:"var(--color-accent-green)",dataKey:"value",onMouseEnter:i,onMouseLeave:x,children:g.map((e,t)=>(0,r.jsx)(A.f,{fill:O[t%O.length]},"cell-".concat(t)))}),(0,r.jsx)(L.m,{formatter:(e,t,a)=>{var r;let s=o(e),d=a.payload&&"number"==typeof a.payload.percent?"(".concat((100*a.payload.percent).toFixed(1),"%)"):"";return[s,(null==(r=a.payload)?void 0:r.name)||t,d]},contentStyle:{backgroundColor:"var(--color-dark-secondary)",border:"1px solid var(--color-gray-700)",borderRadius:"0.375rem"},labelStyle:{color:"var(--color-text-light-primary)",fontWeight:"600"},itemStyle:{color:"var(--color-text-light-secondary)"}}),(0,r.jsx)(P.s,{layout:"horizontal",verticalAlign:"bottom",align:"center",wrapperStyle:{color:"var(--color-text-light-secondary)",paddingTop:"20px"}})]})})}):(0,r.jsx)("div",{className:"w-full text-center py-10",children:(0,r.jsxs)("p",{className:"text-text-light-secondary",children:["No positive data to display for ",a?a.toLowerCase():"this chart","."]})})};var U=a(76233),V=a(6874),Y=a.n(V);let z=[{value:"totalNetPnl",label:"Net P&L",isCurrency:!0},{value:"closedTrades",label:"Number of Trades"},{value:"winRate",label:"Win Rate",isPercentage:!0},{value:"averageWin",label:"Average Win",isCurrency:!0},{value:"averageLoss",label:"Average Loss",isCurrency:!0},{value:"expectancy",label:"Expectancy",isCurrency:!0},{value:"maxDrawdown",label:"Max Drawdown",isPercentage:!0}],K=[{value:"closedTrades",label:"Number of Trades"}];function B(){var e;let t=(0,d.wA)(),{trades:a,isLoading:n,error:c,analyticsFilters:i}=(0,d.d4)(e=>e.trades),{isAuthenticated:x}=(0,d.d4)(e=>e.auth),g=(0,d.d4)(o.i7);"".concat("block w-full rounded-lg shadow-sm p-2.5 transition-colors duration-150 ease-in-out border"," ").concat("bg-[var(--color-light-secondary)] border-[var(--color-light-border)] text-[var(--color-text-dark-primary)] dark:bg-dark-primary dark:border-gray-700 dark:text-text-light-primary"," ").concat("focus:ring-2 focus:ring-accent-green focus:border-accent-green focus:outline-none"),(0,s.useEffect)(()=>{x&&t((0,l.Cm)(g||void 0))},[t,x,g]);let u=e=>{t((0,l.cV)({[e.target.name]:e.target.value}))},m=(0,s.useMemo)(()=>i.analyticsDateFrom||i.analyticsDateTo?a.filter(e=>{let t=e.exitDate||e.entryDate;if(!t)return!1;let a=new Date(t),r=!0;if(i.analyticsDateFrom&&(r=r&&a>=new Date(i.analyticsDateFrom)),i.analyticsDateTo){let e=new Date(i.analyticsDateTo);e.setHours(23,59,59,999),r=r&&a<=e}return r}):a,[a,i]),h=(0,s.useMemo)(()=>m.length>0?(0,U.yG)(m):null,[m]),p=(0,s.useMemo)(()=>m.length>0?(0,U.pD)(m):{},[m]),y=(0,s.useMemo)(()=>m.length>0?(0,U.cu)(m):[],[m]),f=(0,s.useMemo)(()=>m.length>0?(0,U.TR)(m):[],[m]),k=(0,s.useMemo)(()=>m.length>0?(0,U.tL)(m):[],[m]),N=(0,s.useMemo)(()=>m.length>0?(0,U.Q0)(m):[],[m]),w=(0,s.useMemo)(()=>m.length>0?(0,U.f6)(m):[],[m]),T=(0,s.useMemo)(()=>m.length>0?(0,U.T9)(m,12).map(e=>({tag:e.name,closedTrades:e.count,totalTrades:e.count,openTrades:0,winningTrades:0,losingTrades:0,breakevenTrades:0,totalNetPnl:0,totalCommissions:0,winRate:0,lossRate:0,averageWin:0,averageLoss:0,profitFactor:0,expectancy:0,maxDrawdown:0,currentBalance:0,averageRR:0,largestWin:0,largestLoss:0})):[],[m]);return n&&0===a.length?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Loading analytics data..."})]})}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:"Trade Analytics"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Deep insights into your trading performance and patterns"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(Y(),{href:"/dashboard",className:"flex items-center space-x-2 bg-gray-100/80 dark:bg-gray-800/80 hover:bg-blue-500 dark:hover:bg-blue-500 text-gray-600 dark:text-gray-400 hover:text-white px-4 py-2.5 rounded-xl transition-all duration-200 hover:scale-105",children:[(0,r.jsx)(b.QVr,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Dashboard"})]}),(0,r.jsx)("button",{className:"p-3 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-green-500 dark:hover:bg-green-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105",children:(0,r.jsx)(b.WCW,{className:"w-4 h-4"})}),(0,r.jsx)("button",{className:"p-3 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-purple-500 dark:hover:bg-purple-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105",children:(0,r.jsx)(b.eb3,{className:"w-4 h-4"})}),(0,r.jsx)("button",{className:"p-3 rounded-xl bg-gray-100/80 dark:bg-gray-800/80 hover:bg-orange-500 dark:hover:bg-orange-500 text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-200 hover:scale-105",children:(0,r.jsx)(b.Pcn,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-green-500/20 rounded-xl",children:(0,r.jsx)(b.bfZ,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Date Range Filter"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Filter analytics by trade exit/entry date"})]})]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[m.length," trade",1!==m.length?"s":""," selected"]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Date"}),(0,r.jsx)("input",{type:"date",name:"analyticsDateFrom",value:i.analyticsDateFrom||"",onChange:u,className:"w-full p-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"To Date"}),(0,r.jsx)("input",{type:"date",name:"analyticsDateTo",value:i.analyticsDateTo||"",onChange:u,className:"w-full p-3 border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsxs)("button",{onClick:()=>{t((0,l.tJ)())},className:"w-full flex items-center justify-center space-x-2 bg-gray-100/80 dark:bg-gray-800/80 hover:bg-red-500 dark:hover:bg-red-500 text-gray-600 dark:text-gray-400 hover:text-white py-3 px-4 rounded-xl transition-all duration-200 hover:scale-105",children:[(0,r.jsx)(b.EEI,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Reset"})]})})]})]}),c&&(0,r.jsx)("div",{className:"text-center py-16 bg-red-50 dark:bg-red-900/20 rounded-2xl border border-red-200 dark:border-red-800",children:(0,r.jsxs)("p",{className:"text-red-600 dark:text-red-400",children:["Error fetching trades: ",c]})}),h&&(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-xl",children:(0,r.jsx)(b.SBv,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Performance Summary"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Key metrics for filtered trades"})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[h.closedTrades," closed trades"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-br from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-xl border border-green-200/50 dark:border-green-700/50",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)(b.Tsk,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),(0,r.jsx)("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:"Net P&L"})]}),(0,r.jsxs)("p",{className:"text-lg font-bold ".concat(h.totalNetPnl>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[h.totalNetPnl>=0?"+":"","$",h.totalNetPnl.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl border border-blue-200/50 dark:border-blue-700/50",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)(b.gdQ,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),(0,r.jsx)("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:"Win Rate"})]}),(0,r.jsxs)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[h.winRate.toFixed(1),"%"]})]}),(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border border-purple-200/50 dark:border-purple-700/50",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)(b.v$b,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),(0,r.jsx)("span",{className:"text-xs font-medium text-purple-600 dark:text-purple-400",children:"Trades"})]}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:h.closedTrades}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Total: ",h.totalTrades]})]}),(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-xl border border-orange-200/50 dark:border-orange-700/50",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)(b.uCC,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),(0,r.jsx)("span",{className:"text-xs font-medium text-orange-600 dark:text-orange-400",children:"Profit Factor"})]}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(null==(e=h.profitFactor)?void 0:e.toFixed(2))||"N/A"})]}),(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-br from-gray-50 to-slate-50 dark:from-gray-800/50 dark:to-slate-800/50 rounded-xl border border-gray-200/50 dark:border-gray-700/50",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)(b.Tsk,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Expectancy"})]}),(0,r.jsxs)("p",{className:"text-lg font-bold ".concat(h.expectancy>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[h.expectancy>=0?"+":"","$",h.expectancy.toFixed(2)]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-xl",children:(0,r.jsx)(b.gvq,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Daily P&L Calendar"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Visual representation of daily profit and loss"})]})]}),(0,r.jsx)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:(0,r.jsx)(v,{dailyPnlData:p})})]}),(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-green-500/20 to-teal-500/20 rounded-xl",children:(0,r.jsx)(b.v$b,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"P&L Distribution"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Number of trades per P&L bracket"})]})]}),(0,r.jsx)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:(0,r.jsx)(S,{title:"",data:T,metricOptions:K,initialMetricValue:"closedTrades"})})]}),(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-xl",children:(0,r.jsx)(b.BuZ,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Strategy & Tag Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Performance breakdown by trading strategies"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,r.jsx)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:(0,r.jsx)(S,{title:"Strategy Performance Metrics",data:y,metricOptions:z,initialMetricValue:"totalNetPnl"})}),(0,r.jsxs)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 text-center",children:"Trade Count Distribution"}),(0,r.jsx)(W,{title:"Trade Count Distribution by Strategy/Tag",data:y,dataKeyForValue:"closedTrades",valueFormatter:e=>"".concat(e," trade").concat(1!==e?"s":"")})]})]}),(0,r.jsx)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:(0,r.jsx)(j,{title:"Strategy/Tag Detailed Stats",data:y,groupingKeyHeader:"Strategy/Tag"})})]}),(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-orange-500/20 to-red-500/20 rounded-xl",children:(0,r.jsx)(b.f35,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Asset Type Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Performance breakdown by asset categories"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,r.jsx)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:(0,r.jsx)(S,{title:"Asset Type Performance Metrics",data:f,metricOptions:z,initialMetricValue:"totalNetPnl"})}),(0,r.jsxs)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 text-center",children:"Trade Count Distribution"}),(0,r.jsx)(W,{title:"Trade Count Distribution by Asset Type",data:f,dataKeyForValue:"closedTrades",valueFormatter:e=>"".concat(e," trade").concat(1!==e?"s":"")})]})]}),(0,r.jsx)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:(0,r.jsx)(j,{title:"Asset Type Detailed Stats",data:f,groupingKeyHeader:"Asset Type"})})]}),(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-teal-500/20 to-cyan-500/20 rounded-xl",children:(0,r.jsx)(b.YYR,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Symbol Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Top 10 symbols by trade count"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,r.jsx)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:(0,r.jsx)(S,{title:"Symbol Performance Metrics",data:k,metricOptions:z,initialMetricValue:"totalNetPnl"})}),(0,r.jsxs)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 text-center",children:"Trade Count Distribution"}),(0,r.jsx)(W,{title:"Trade Count Distribution by Symbol",data:k,dataKeyForValue:"closedTrades",valueFormatter:e=>"".concat(e," trade").concat(1!==e?"s":"")})]})]}),(0,r.jsx)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:(0,r.jsx)(j,{title:"Symbol Detailed Stats",data:k,groupingKeyHeader:"Symbol"})})]}),(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-indigo-500/20 to-purple-500/20 rounded-xl",children:(0,r.jsx)(b.bfZ,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Day of Week Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Performance patterns by weekday"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,r.jsx)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:(0,r.jsx)(S,{title:"Day of Week Performance Metrics",data:N,metricOptions:z,initialMetricValue:"totalNetPnl"})}),(0,r.jsxs)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 text-center",children:"Trade Count Distribution"}),(0,r.jsx)(W,{title:"Trade Count by Day of Week",data:N,dataKeyForValue:"closedTrades",valueFormatter:e=>"".concat(e," trade").concat(1!==e?"s":"")})]})]}),(0,r.jsx)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:(0,r.jsx)(j,{title:"Day of Week Detailed Stats",data:N,groupingKeyHeader:"Day of Week"})})]}),(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-pink-500/20 to-rose-500/20 rounded-xl",children:(0,r.jsx)(b.w_X,{className:"w-5 h-5 text-pink-600 dark:text-pink-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Trade Duration Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Performance by how long trades were held"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,r.jsx)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:(0,r.jsx)(S,{title:"Trade Duration Performance Metrics",data:w,metricOptions:z,initialMetricValue:"totalNetPnl"})}),(0,r.jsxs)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 text-center",children:"Trade Count by Duration"}),(0,r.jsx)(W,{title:"Trade Count by Duration Bracket",data:w,dataKeyForValue:"closedTrades",valueFormatter:e=>"".concat(e," trade").concat(1!==e?"s":"")})]})]}),(0,r.jsx)("div",{className:"bg-gray-50/50 dark:bg-gray-800/50 rounded-xl p-4",children:(0,r.jsx)(j,{title:"Trade Duration Detailed Stats",data:w,groupingKeyHeader:"Duration Bracket"})})]}),0===m.length&&!n&&(0,r.jsx)("div",{className:"text-center py-16 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center mx-auto",children:(0,r.jsx)(b.v$b,{className:"w-10 h-10 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:a.length>0?"No trades match the current filters":"No trades to analyze"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:a.length>0?"Try adjusting your date filters to see more data.":"Start trading and logging trades to see analytics here."})]}),0===a.length&&(0,r.jsx)(Y(),{href:"/journal/new",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:(0,r.jsx)("span",{children:"Log Your First Trade"})})]})})]})}},23352:(e,t,a)=>{"use strict";a.d(t,{$L:()=>i,Ay:()=>w,Cm:()=>n,Gz:()=>x,IJ:()=>N,P:()=>k,PE:()=>c,YY:()=>h,cV:()=>b,dq:()=>j,kQ:()=>v,s5:()=>g,tJ:()=>f});var r=a(51990),s=a(80722);let d={trades:[],isLoading:!1,error:null,currentTrade:null,filters:{},analyticsFilters:{analyticsDateFrom:"",analyticsDateTo:""}};function l(e){return{id:e.id,userId:e.userId,assetType:e.assetType,symbol:e.symbol,direction:e.side,status:e.status,entryDate:e.openTime,entryPrice:parseFloat(e.openPrice),exitDate:e.closeTime,exitPrice:e.closePrice?parseFloat(e.closePrice):void 0,quantity:parseFloat(e.quantity),stopLoss:e.stopLoss?parseFloat(e.stopLoss):void 0,takeProfit:e.takeProfit?parseFloat(e.takeProfit):void 0,commission:e.commission?parseFloat(e.commission):void 0,notes:e.notes,profitOrLoss:e.profitOrLoss?parseFloat(e.profitOrLoss):void 0,rMultiple:e.rMultiple?parseFloat(e.rMultiple):void 0,ictConcept:e.ictConcept,session:e.session,setupDetails:e.setupDetails,mistakesMade:e.mistakesMade,lessonsLearned:e.lessonsLearned,imageUrl:e.imageUrl,tags:e.tags||[],createdAt:e.createdAt,updatedAt:e.updatedAt,accountId:e.accountId,isStarred:e.isStarred||!1}}function o(e){let t=e=>{if(e)try{if(e.includes("T")&&(e.includes("Z")||e.includes("+")||e.includes("-")))return e;return new Date(e).toISOString()}catch(t){console.error("Error formatting date for API:",e,t);return}};return{assetType:e.assetType,symbol:e.symbol,side:e.direction,status:e.status,openTime:t(e.entryDate),openPrice:e.entryPrice,closeTime:t(e.exitDate),closePrice:e.exitPrice,quantity:e.quantity,stopLoss:e.stopLoss,takeProfit:e.takeProfit,commission:e.commission,notes:e.notes,ictConcept:e.ictConcept,session:e.session,setupDetails:e.setupDetails,mistakesMade:e.mistakesMade,lessonsLearned:e.lessonsLearned,imageUrl:e.imageUrl,tagNames:e.tagNames,accountId:e.accountId,isStarred:e.isStarred}}let n=(0,r.zD)("trades/fetchTrades",async(e,t)=>{let{rejectWithValue:a}=t;try{let t="/trades";e&&(t+="?accountId=".concat(e));let a=await s.Y0.get(t);console.log("Raw fetchTrades from API (accountId: ".concat(e||"all","):"),a.data);let r=a.data.map(l);return console.log("Transformed trades for frontend:",r),r}catch(e){var r,d;return a((null==(d=e.response)||null==(r=d.data)?void 0:r.message)||e.message||"Failed to fetch trades")}}),c=(0,r.zD)("trades/fetchTradeById",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=await s.Y0.get("/trades/".concat(e));console.log("Raw fetchTradeById from API:",t.data);let a=l(t.data);return console.log("Transformed trade for frontend:",a),a}catch(e){var r,d;return a((null==(d=e.response)||null==(r=d.data)?void 0:r.message)||e.message||"Failed to fetch trade")}}),i=(0,r.zD)("trades/createTrade",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=o(e);console.log("Frontend payload:",e),console.log("Transformed API payload:",t);let a=await s.Y0.post("/trades",t);console.log("Raw createTrade from API:",a.data);let r=l(a.data);return console.log("Transformed created trade for frontend:",r),r}catch(e){var r,d;return a((null==(d=e.response)||null==(r=d.data)?void 0:r.message)||e.message||"Failed to create trade")}}),x=(0,r.zD)("trades/updateTrade",async(e,t)=>{let{id:a,payload:r}=e,{rejectWithValue:d}=t;try{let e=o(r);console.log("Frontend updateTrade payload:",r),console.log("Transformed updateTrade API payload:",e);let t=await s.Y0.patch("/trades/".concat(a),e);console.log("Raw updateTrade from API:",t.data);let d=l(t.data);return console.log("Transformed updated trade for frontend:",d),d}catch(e){var n,c;return d((null==(c=e.response)||null==(n=c.data)?void 0:n.message)||e.message||"Failed to update trade")}}),g=(0,r.zD)("trades/deleteTrade",async(e,t)=>{let{rejectWithValue:a}=t;try{return await s.Y0.delete("/trades/".concat(e)),e}catch(e){var r,d;return a((null==(d=e.response)||null==(r=d.data)?void 0:r.message)||e.message||"Failed to delete trade")}}),u=(0,r.Z0)({name:"trades",initialState:d,reducers:{clearTradesError(e){e.error=null},setCurrentTrade(e,t){e.currentTrade=t.payload},setTradeFilters(e,t){e.filters={...e.filters,...t.payload}},resetTradeFilters(e){e.filters=d.filters},setAnalyticsDateFilters(e,t){e.analyticsFilters={...e.analyticsFilters,...t.payload}},resetAnalyticsDateFilters(e){e.analyticsFilters=d.analyticsFilters},addTrade(e,t){-1===e.trades.findIndex(e=>e.id===t.payload.id)&&e.trades.unshift(t.payload)},updateTradeRealtime(e,t){var a;let r=e.trades.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.trades[r]=t.payload),(null==(a=e.currentTrade)?void 0:a.id)===t.payload.id&&(e.currentTrade=t.payload)},removeTrade(e,t){var a;e.trades=e.trades.filter(e=>e.id!==t.payload),(null==(a=e.currentTrade)?void 0:a.id)===t.payload&&(e.currentTrade=null)},setTrades(e,t){e.trades=t.payload}},extraReducers:e=>{e.addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{e.isLoading=!1,e.trades=t.payload}).addCase(n.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(c.pending,e=>{e.isLoading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{e.isLoading=!1,e.currentTrade=t.payload}).addCase(c.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.isLoading=!1,e.trades.unshift(t.payload)}).addCase(i.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(x.pending,e=>{e.isLoading=!0,e.error=null}).addCase(x.fulfilled,(e,t)=>{var a;e.isLoading=!1;let r=e.trades.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.trades[r]=t.payload),(null==(a=e.currentTrade)?void 0:a.id)===t.payload.id&&(e.currentTrade=t.payload)}).addCase(x.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(g.pending,e=>{e.isLoading=!0,e.error=null}).addCase(g.fulfilled,(e,t)=>{var a;e.isLoading=!1,e.trades=e.trades.filter(e=>e.id!==t.payload),(null==(a=e.currentTrade)?void 0:a.id)===t.payload&&(e.currentTrade=null)}).addCase(g.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}}),{clearTradesError:m,setCurrentTrade:h,setTradeFilters:p,resetTradeFilters:y,setAnalyticsDateFilters:b,resetAnalyticsDateFilters:f,addTrade:v,updateTradeRealtime:k,removeTrade:j,setTrades:N}=u.actions,w=u.reducer},37049:(e,t,a)=>{"use strict";a.d(t,{D:()=>o,ThemeProvider:()=>l});var r=a(95155),s=a(12115);let d=(0,s.createContext)(void 0),l=e=>{let{children:t}=e,[a,l]=(0,s.useState)("dark");return(0,s.useEffect)(()=>{let e=localStorage.getItem("tradetaper-theme");e?l(e):l(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[]),(0,s.useEffect)(()=>{"dark"===a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("tradetaper-theme",a)},[a]),(0,r.jsx)(d.Provider,{value:{theme:a,setTheme:e=>{l(e)},toggleTheme:()=>{l(e=>"light"===e?"dark":"light")}},children:t})},o=()=>{let e=(0,s.useContext)(d);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},56051:(e,t,a)=>{"use strict";a.d(t,{PW:()=>r,d1:()=>d,w_:()=>s});var r=function(e){return e.STOCK="Stock",e.CRYPTO="Crypto",e.FOREX="Forex",e.COMMODITIES="Commodities",e.FUTURES="Futures",e.OPTIONS="Options",e}({}),s=function(e){return e.LONG="Long",e.SHORT="Short",e}({}),d=function(e){return e.OPEN="Open",e.CLOSED="Closed",e.PENDING="Pending",e.CANCELLED="Cancelled",e}({})},70392:(e,t,a)=>{"use strict";a.d(t,{_m:()=>o,Ay:()=>N,BF:()=>c,Tq:()=>l,tW:()=>j,jA:()=>k,G6:()=>b,xB:()=>v,i7:()=>f,Rc:()=>g,RS:()=>n});var r=a(51990),s=a(80722);let d={getAccounts:async()=>(await s.Y0.get("/accounts")).data,getAccount:async e=>(await s.Y0.get("/accounts/".concat(e))).data,createAccount:async e=>(await s.Y0.post("/accounts",e)).data,updateAccount:async(e,t)=>(await s.Y0.put("/accounts/".concat(e),t)).data,async deleteAccount(e){await s.Y0.delete("/accounts/".concat(e))}},l=(0,r.zD)("accounts/fetchAccounts",async()=>await d.getAccounts()),o=(0,r.zD)("accounts/createAccount",async e=>await d.createAccount(e)),n=(0,r.zD)("accounts/updateAccount",async e=>{let{id:t,...a}=e;return await d.updateAccount(t,a)}),c=(0,r.zD)("accounts/deleteAccount",async e=>(await d.deleteAccount(e),e)),i=(0,r.Z0)({name:"accounts",initialState:{accounts:[],selectedAccountId:null,isLoading:!1,error:null},reducers:{setAccounts:(e,t)=>{e.accounts=t.payload,e.selectedAccountId&&!e.accounts.find(t=>t.id===e.selectedAccountId)&&(e.selectedAccountId=null)},setSelectedAccount:(e,t)=>{null===t.payload?e.selectedAccountId=null:e.accounts.find(e=>e.id===t.payload)?e.selectedAccountId=t.payload:console.warn("Attempted to select non-existent account ID: ".concat(t.payload))},addAccount:(e,t)=>{e.accounts.push(t.payload),e.selectedAccountId||(e.selectedAccountId=t.payload.id)},updateAccount:(e,t)=>{let a=e.accounts.findIndex(e=>e.id===t.payload.id);-1!==a?e.accounts[a]={...e.accounts[a],...t.payload}:console.warn("Attempted to update non-existent account ID: ".concat(t.payload.id))},deleteAccount:(e,t)=>{let a=t.payload;e.accounts=e.accounts.filter(e=>e.id!==a),e.selectedAccountId===a&&(e.selectedAccountId=null)},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload}},extraReducers:e=>{e.addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.isLoading=!1,e.accounts=t.payload,e.selectedAccountId&&!t.payload.find(t=>t.id===e.selectedAccountId)&&(e.selectedAccountId=null)}).addCase(l.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to fetch accounts"}).addCase(o.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.isLoading=!1,e.accounts.push(t.payload),e.selectedAccountId||(e.selectedAccountId=t.payload.id)}).addCase(o.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to create account"}).addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{e.isLoading=!1;let a=e.accounts.findIndex(e=>e.id===t.payload.id);-1!==a&&(e.accounts[a]=t.payload)}).addCase(n.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to update account"}).addCase(c.pending,e=>{e.isLoading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{e.isLoading=!1,e.accounts=e.accounts.filter(e=>e.id!==t.payload),e.selectedAccountId===t.payload&&(e.selectedAccountId=null)}).addCase(c.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to delete account"})}}),{setAccounts:x,setSelectedAccount:g,addAccount:u,updateAccount:m,deleteAccount:h,setLoading:p,setError:y}=i.actions,b=e=>e.accounts.accounts,f=e=>e.accounts.selectedAccountId,v=e=>{let t=e.accounts.selectedAccountId;return e.accounts.accounts.find(e=>e.id===t)||null},k=e=>e.accounts.isLoading,j=e=>e.accounts.error,N=i.reducer},76233:(e,t,a)=>{"use strict";a.d(t,{Fj:()=>x,Q0:()=>p,T9:()=>f,TR:()=>u,cu:()=>g,f6:()=>b,pD:()=>i,tL:()=>m,yG:()=>n});var r=a(56051),s=a(32620),d=a(66848),l=a(3898),o=a(50007);function n(e){let t=e.filter(e=>e.status===r.d1.CLOSED&&void 0!==e.profitOrLoss&&e.exitDate).sort((e,t)=>new Date(e.exitDate).getTime()-new Date(t.exitDate).getTime()),a=0,s=0,d=0,l=0,o=0,n=0,c=0,i=[],x=0,g=0,u=0,m=0;t.forEach(e=>{let t=e.profitOrLoss;i.push(t),a+=t,s+=e.commission||0,t>0?(d++,n+=t,t>u&&(u=t)):t<0?(l++,c+=t,t<m&&(m=t)):o++,void 0!==e.rMultiple&&null!==e.rMultiple&&(x+=e.rMultiple,g++)});let h=d+l+o,p=h>0?d/h:0,y=h>0?l/h:0,b=d>0?n/d:0,f=l>0?c/l:0,v=p*b-y*Math.abs(f),k=function(e){if(0===e.length)return 0;let t=0,a=0,r=0;for(let s of e){(r+=s)>a&&(a=r);let e=a>0?(a-r)/a:0;e>t&&(t=e)}return 100*t}(i),j=g>0?x/g:0,N=a;return{totalTrades:e.length,openTrades:e.filter(e=>e.status===r.d1.OPEN||e.status===r.d1.PENDING).length,closedTrades:t.length,winningTrades:d,losingTrades:l,breakevenTrades:o,totalNetPnl:a,totalCommissions:s,winRate:100*p,lossRate:100*y,averageWin:b,averageLoss:f,profitFactor:0!==c?Math.abs(n/c):n>0?1/0:0,expectancy:v,maxDrawdown:k,currentBalance:N,averageRR:j,largestWin:u,largestLoss:m}}function c(e,t){return{tag:t,...n(e)}}function i(e){let t={};return e.forEach(e=>{if(e.status===r.d1.CLOSED&&void 0!==e.profitOrLoss&&e.exitDate){let a=(0,s.GP)(new Date(e.exitDate),"yyyy-MM-dd");t[a]||(t[a]={pnl:0,tradeCount:0}),t[a].pnl+=e.profitOrLoss,t[a].tradeCount++}}),t}function x(e){let t=e.filter(e=>e.status===r.d1.CLOSED&&void 0!==e.profitOrLoss&&e.exitDate).sort((e,t)=>new Date(e.exitDate).getTime()-new Date(t.exitDate).getTime()),a=0,s=t.map(e=>(a+=e.profitOrLoss,{date:e.exitDate,value:a}));if(s.length>0){let e=new Date(s[0].date);return[{date:new Date(e.setDate(e.getDate()-1)).toISOString(),value:0},...s]}return[{date:new Date().toISOString(),value:0}]}function g(e){let t={};return e.forEach(e=>{if(e.tags&&e.tags.length>0)e.tags.forEach(a=>{let r=a.name||"Unnamed Tag";t[r]||(t[r]=[]),t[r].push(e)});else{let a="Uncategorized";t[a]||(t[a]=[]),t[a].push(e)}}),Object.entries(t).map(e=>{let[t,a]=e;return c(a,t)}).sort((e,t)=>t.totalNetPnl-e.totalNetPnl)}function u(e){let t={};return e.forEach(e=>{let a=e.assetType||"Unknown Asset";t[a]||(t[a]=[]),t[a].push(e)}),Object.entries(t).map(e=>{let[t,a]=e;return c(a,t)}).sort((e,t)=>t.totalNetPnl-e.totalNetPnl)}function m(e){let t={};return e.forEach(e=>{var a;let r=(null==(a=e.symbol)?void 0:a.toUpperCase())||"Unknown Symbol";t[r]||(t[r]=[]),t[r].push(e)}),Object.entries(t).map(e=>{let[t,a]=e;return c(a,t)}).sort((e,t)=>t.totalNetPnl-e.totalNetPnl)}let h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function p(e){let t={};return h.forEach(e=>{t[e]=[]}),e.filter(e=>e.status===r.d1.CLOSED&&e.exitDate).forEach(e=>{t[h[(0,d.P)(new Date(e.exitDate))]].push(e)}),h.map(e=>c(t[e],e))}let y=["Intraday (<1 Day)","Short-Term (1-7 Days)","Medium-Term (1-4 Weeks)","Long-Term (1-3 Months)","Very Long-Term (>3 Months)","Unknown Duration"];function b(e){let t={};return y.forEach(e=>{t[e]=[]}),e.filter(e=>e.status===r.d1.CLOSED&&e.entryDate&&e.exitDate).forEach(e=>{let a=function(e){if(e.status!==r.d1.CLOSED||!e.entryDate||!e.exitDate)return"Unknown Duration";let t=new Date(e.entryDate),a=new Date(e.exitDate);if((0,l.r)(t,a))return"Intraday (<1 Day)";let s=(0,o.m)(a,t);return s<=0?"Intraday (<1 Day)":s<=7?"Short-Term (1-7 Days)":s<=28?"Medium-Term (1-4 Weeks)":s<=90?"Long-Term (1-3 Months)":"Very Long-Term (>3 Months)"}(e);t[a]&&t[a].push(e)}),y.map(e=>c(t[e]||[],e)).filter(e=>e.totalTrades>0||"Unknown Duration"===e.tag)}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,s=e.filter(e=>e.status===r.d1.CLOSED&&"number"==typeof e.profitOrLoss);if(0===s.length)return[];let d=s.map(e=>e.profitOrLoss),l=Math.min(...d),o=Math.max(...d);l===o&&(0===o?(l=-1,o=1):(l=o-Math.abs(.1*o||1),o+=Math.abs(.1*o||1))),o-l<1&&o-l>-1&&o-l!=0&&(l=Math.floor(l)-1,o=Math.ceil(o)+1);let n=a||(o-l)/t;if(n<=0)return[{name:"".concat(l.toFixed(2)," to ").concat(o.toFixed(2)),count:s.length,minPnl:l,maxPnl:o}];let c=[];for(let e=0;e<t;e++){let t=l+e*n,a=l+(e+1)*n;c.push({name:"".concat(t.toFixed(0)," to ").concat(a.toFixed(0)),count:0,minPnl:t,maxPnl:a})}return c.length>0&&c[c.length-1].maxPnl<o&&(c[c.length-1].maxPnl=o,c[c.length-1].name="".concat(c[c.length-1].minPnl.toFixed(0)," to ").concat(c[c.length-1].maxPnl.toFixed(0))),d.forEach(e=>{for(let t of c)if(e>=t.minPnl&&(e<t.maxPnl||t===c[c.length-1]&&e<=t.maxPnl)){t.count++;break}}),c.filter(e=>e.count>0)}},80722:(e,t,a)=>{"use strict";a.d(t,{Y0:()=>l,uE:()=>d,wv:()=>o});var r=a(23464);let s="https://tradetaper-backend-481634875325.us-central1.run.app/api/v1";console.log("\uD83D\uDD27 API Configuration:",{env:"production",apiUrl:s,envVar:"https://tradetaper-backend-481634875325.us-central1.run.app/api/v1",timestamp:new Date().toISOString()});let d=r.A.create({baseURL:s,headers:{"Content-Type":"application/json"}}),l=r.A.create({baseURL:s,headers:{"Content-Type":"application/json"}});function o(e){l.interceptors.request.use(t=>{let a=e().auth.token;return a&&(t.headers.Authorization="Bearer ".concat(a)),console.log("\uD83D\uDE80 Making authenticated API request to:",t.baseURL+t.url),t},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{var t,a,r;return console.error(" API Request failed:",{url:null==(t=e.config)?void 0:t.url,baseURL:null==(a=e.config)?void 0:a.baseURL,status:null==(r=e.response)?void 0:r.status,message:e.message}),e.response&&401===e.response.status&&console.log("Unauthorized from interceptor..."),Promise.reject(e)}),console.log("[API.TS] Auth interceptors configured.")}},93464:(e,t,a)=>{Promise.resolve().then(a.bind(a,7098))}},e=>{var t=t=>e(e.s=t);e.O(0,[6711,3464,4540,1990,6874,1005,7849,613,3363,8441,1684,7358],()=>t(93464)),_N_E=e.O()}]);