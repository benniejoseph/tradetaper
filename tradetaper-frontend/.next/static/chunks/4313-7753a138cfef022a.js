"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4313],{43082:(e,a,t)=>{t.d(a,{P:()=>l});let r="https://tradetaper-backend-481634875325.us-central1.run.app/api/v1";class s{async getAuthHeaders(){let e=localStorage.getItem("token");return{"Content-Type":"application/json",...e&&{Authorization:"Bearer ".concat(e)}}}async getStrategies(){let e=await fetch("".concat(r,"/strategies"),{headers:await this.getAuthHeaders()});if(!e.ok)throw Error("Failed to fetch strategies");return e.json()}async getStrategiesWithStats(){let e=await fetch("".concat(r,"/strategies/with-stats"),{headers:await this.getAuthHeaders()});if(!e.ok)throw Error("Failed to fetch strategies with stats");return e.json()}async getStrategy(e){let a=await fetch("".concat(r,"/strategies/").concat(e),{headers:await this.getAuthHeaders()});if(!a.ok)throw Error("Failed to fetch strategy");return a.json()}async getStrategyStats(e){let a=await fetch("".concat(r,"/strategies/").concat(e,"/stats"),{headers:await this.getAuthHeaders()});if(!a.ok)throw Error("Failed to fetch strategy stats");return a.json()}async createStrategy(e){let a=await fetch("".concat(r,"/strategies"),{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(e)});if(!a.ok)throw Error("Failed to create strategy");return a.json()}async updateStrategy(e,a){let t=await fetch("".concat(r,"/strategies/").concat(e),{method:"PATCH",headers:await this.getAuthHeaders(),body:JSON.stringify(a)});if(!t.ok)throw Error("Failed to update strategy");return t.json()}async toggleStrategyActive(e){let a=await fetch("".concat(r,"/strategies/").concat(e,"/toggle-active"),{method:"PATCH",headers:await this.getAuthHeaders()});if(!a.ok)throw Error("Failed to toggle strategy active status");return a.json()}async deleteStrategy(e){if(!(await fetch("".concat(r,"/strategies/").concat(e),{method:"DELETE",headers:await this.getAuthHeaders()})).ok)throw Error("Failed to delete strategy")}}let l=new s},44313:(e,a,t)=>{t.d(a,{A:()=>v});var r=t(95155),s=t(12115),l=t(56051),o=t(43082),i=function(e){return e.LONDON="London",e.NEW_YORK="New York",e.ASIA="Asia",e.LONDON_NY_OVERLAP="London-NY Overlap",e.OTHER="Other",e}({}),n=t(35695),d=t(34540),c=t(23352),u=t(70392),m=t(37049);let g=e=>{let a=[];if(e.symbol&&""!==e.symbol.trim()||a.push({field:"symbol",message:"Symbol is required"}),e.entryDate||a.push({field:"entryDate",message:"Entry date is required"}),(!e.entryPrice||e.entryPrice<=0)&&a.push({field:"entryPrice",message:"Entry price must be greater than 0"}),(!e.quantity||e.quantity<=0)&&a.push({field:"quantity",message:"Quantity must be greater than 0"}),e.exitDate&&e.entryDate){let t=new Date(e.entryDate);new Date(e.exitDate)<t&&a.push({field:"exitDate",message:"Exit date cannot be before entry date"})}return e.exitPrice&&e.entryPrice&&(e.direction===l.w_.LONG&&e.exitPrice<0&&a.push({field:"exitPrice",message:"Exit price must be positive"}),e.direction===l.w_.SHORT&&e.exitPrice<0&&a.push({field:"exitPrice",message:"Exit price must be positive"})),e.stopLoss&&e.entryPrice&&(e.direction===l.w_.LONG&&e.stopLoss>=e.entryPrice&&a.push({field:"stopLoss",message:"Stop loss should be below entry price for long positions"}),e.direction===l.w_.SHORT&&e.stopLoss<=e.entryPrice&&a.push({field:"stopLoss",message:"Stop loss should be above entry price for short positions"})),e.takeProfit&&e.entryPrice&&(e.direction===l.w_.LONG&&e.takeProfit<=e.entryPrice&&a.push({field:"takeProfit",message:"Take profit should be above entry price for long positions"}),e.direction===l.w_.SHORT&&e.takeProfit>=e.entryPrice&&a.push({field:"takeProfit",message:"Take profit should be below entry price for short positions"})),e.commission&&e.commission<0&&a.push({field:"commission",message:"Commission cannot be negative"}),{isValid:0===a.length,errors:a}},h=(e,a)=>{let t=e.find(e=>e.field===a);return null==t?void 0:t.message};var x=t(10950),p=t(29911);let y=(e,a,t)=>a&&Object.values(e).includes(a)?a:t,b=e=>{if(!e)return"";try{let a=new Date(e),t=6e4*a.getTimezoneOffset();return new Date(a.getTime()-t).toISOString().slice(0,16)}catch(e){return""}};function v(e){var a,t,v,f;let{initialData:j,isEditMode:k=!1,onFormSubmitSuccess:N,onCancel:w}=e,S=(0,d.wA)(),P=(0,n.useRouter)(),{isLoading:A,error:C}=(0,d.d4)(e=>e.trades),L=(0,d.d4)(u.i7),D=(0,d.d4)(u.G6),{theme:I}=(0,m.D)(),[F,E]=(0,s.useState)([]),T="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",O="block w-full rounded-xl shadow-sm p-3 transition-all duration-200 border backdrop-blur-sm",M="bg-white/60 dark:bg-gray-800/40 border-gray-200/50 dark:border-gray-700/50 text-gray-900 dark:text-white",R="dark"===I?"#374151":"#e5e7eb",q="dark"===I?"rgba(31, 41, 55, 0.4)":"rgba(255, 255, 255, 0.6)",U="dark"===I?"#ffffff":"#111827",_="dark"===I?"rgba(209, 213, 219, 0.6)":"rgba(107, 114, 128, 0.7)",H="focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none hover:bg-white/80 dark:hover:bg-gray-800/60",G="placeholder:text-gray-500 dark:placeholder:text-gray-400",z="".concat(O," ").concat(M," ").concat(H," ").concat(G),Y="".concat(O," ").concat(M," ").concat(H," appearance-none"),W="".concat(O," ").concat(M," ").concat(H," ").concat(G," min-h-[120px] resize-y"),B="bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl p-8 rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg hover:shadow-xl transition-all duration-200",V="text-2xl font-bold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200/30 dark:border-gray-700/30 flex items-center space-x-3",[J,K]=(0,s.useState)([]),[Q,$]=(0,s.useState)({accountId:(null==j?void 0:j.accountId)||L||void 0,assetType:(null==j?void 0:j.assetType)||l.PW.STOCK,symbol:(null==j?void 0:j.symbol)||"",direction:(null==j?void 0:j.direction)||l.w_.LONG,status:(null==j?void 0:j.status)||l.d1.OPEN,entryDate:b(null==j?void 0:j.entryDate),entryPrice:(null==j?void 0:j.entryPrice)||0,stopLoss:null!=(a=null==j?void 0:j.stopLoss)?a:void 0,takeProfit:null!=(t=null==j?void 0:j.takeProfit)?t:void 0,exitDate:b(null==j?void 0:j.exitDate),exitPrice:null!=(v=null==j?void 0:j.exitPrice)?v:void 0,quantity:(null==j?void 0:j.quantity)||0,commission:(null==j?void 0:j.commission)||0,notes:(null==j?void 0:j.notes)||"",session:y(i,null==j?void 0:j.session,i.NEW_YORK),setupDetails:(null==j?void 0:j.setupDetails)||"",mistakesMade:(null==j?void 0:j.mistakesMade)||"",lessonsLearned:(null==j?void 0:j.lessonsLearned)||"",imageUrl:(null==j?void 0:j.imageUrl)||"",rMultiple:null!=(f=null==j?void 0:j.rMultiple)?f:void 0,isStarred:(null==j?void 0:j.isStarred)||!1,strategyId:(null==j?void 0:j.strategyId)||void 0}),[X,Z]=(0,s.useState)(null),[ee,ea]=(0,s.useState)(null),[et,er]=(0,s.useState)((null==j?void 0:j.imageUrl)||null),[es,el]=(0,s.useState)(!1),[eo,ei]=(0,s.useState)(null),[en,ed]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=parseFloat(Q.entryPrice),a=parseFloat(Q.stopLoss),t=parseFloat(Q.takeProfit);if(!Q.direction||isNaN(e)||isNaN(a)||isNaN(t)||a===e||t===e)$(e=>({...e,rMultiple:void 0}));else{let r,s;if(Q.direction===l.w_.LONG)r=e-a,s=t-e;else{if(Q.direction!==l.w_.SHORT)return void $(e=>({...e,rMultiple:void 0}));r=a-e,s=e-t}if(r>0&&s>0){let e=s/r;$(a=>({...a,rMultiple:parseFloat(e.toFixed(2))}))}else $(e=>({...e,rMultiple:void 0}))}},[Q.entryPrice,Q.stopLoss,Q.takeProfit,Q.direction]),(0,s.useEffect)(()=>{(async()=>{try{let e=await o.P.getStrategies();ed(e)}catch(e){console.error("Error loading strategies:",e)}})()},[]),(0,s.useEffect)(()=>{j&&($(e=>{var a,t,r,s;return{...e,accountId:j.accountId||L||void 0,assetType:j.assetType,symbol:j.symbol,direction:j.direction,status:j.status,entryDate:b(j.entryDate),entryPrice:j.entryPrice,stopLoss:null!=(a=j.stopLoss)?a:void 0,takeProfit:null!=(t=j.takeProfit)?t:void 0,exitDate:b(j.exitDate),exitPrice:null!=(r=j.exitPrice)?r:void 0,quantity:j.quantity,commission:j.commission,notes:j.notes||"",session:y(i,j.session,i.NEW_YORK),setupDetails:j.setupDetails||"",mistakesMade:j.mistakesMade||"",lessonsLearned:j.lessonsLearned||"",imageUrl:j.imageUrl||"",rMultiple:null!=(s=j.rMultiple)?s:void 0,isStarred:j.isStarred||!1,strategyId:j.strategyId||void 0}}),er(j.imageUrl||null),ea(null),j.tags&&j.tags.length>0?K(j.tags.map(e=>({label:e.name,value:e.name,color:e.color}))):K([]))},[j]);let ec=e=>{let{name:a,value:t,type:r}=e.target;if("isStarred"===a&&"checkbox"===r){let a=e.target.checked;$(e=>({...e,isStarred:a}))}else{let e=t;"number"===r&&(e=""===t?void 0:parseFloat(t)),$(t=>({...t,[a]:e}))}},eu=async e=>{e.preventDefault(),ei(null),setUploadError(null),E([]);let a=g({...Q,assetType:Q.assetType,symbol:Q.symbol,direction:Q.direction,entryDate:Q.entryDate,entryPrice:Q.entryPrice,quantity:Q.quantity,tagNames:J.map(e=>e.value),isStarred:Q.isStarred});if(!a.isValid){E(a.errors),ei("Please fix the validation errors below.");return}let t=J.map(e=>e.value),r={...Q,session:Q.session,tagNames:t,imageUrl:finalImageUrl,assetType:Q.assetType,symbol:Q.symbol,direction:Q.direction,entryDate:Q.entryDate,entryPrice:Q.entryPrice,quantity:Q.quantity,isStarred:Q.isStarred};delete r.rMultiple;try{let e;k&&(null==j?void 0:j.id)?(e=await S((0,c.Gz)({id:j.id,payload:r})),c.Gz.fulfilled.match(e)&&(N?N(e.payload.id):P.push("/journal"))):(e=await S((0,c.$L)(r)),c.$L.fulfilled.match(e)&&(N?N(e.payload.id):P.push("/journal"))),"rejected"===e.meta.requestStatus&&ei(e.payload||"Submission failed")}catch(e){ei(e.message||"An unexpected error occurred.")}},em=e=>{let a=h(F,e);return a?(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a}):null},eg="flex items-center justify-center space-x-2 px-6 py-3 font-semibold rounded-xl transition-all duration-200 shadow-lg focus:outline-none focus:ring-2 focus:ring-opacity-70",eh="bg-white/90 dark:bg-gray-800/90 text-gray-900 dark:text-white";return(0,r.jsxs)("div",{className:"w-full space-y-8",children:[eo&&(0,r.jsx)("div",{className:"p-4 bg-red-50/90 dark:bg-red-900/20 border border-red-200/50 dark:border-red-800/50 text-red-700 dark:text-red-400 rounded-xl text-sm backdrop-blur-sm",children:eo}),C&&(0,r.jsxs)("div",{className:"p-4 bg-red-50/90 dark:bg-red-900/20 border border-red-200/50 dark:border-red-800/50 text-red-700 dark:text-red-400 rounded-xl text-sm backdrop-blur-sm",children:["Submission Error: ",C]}),uploadError&&(0,r.jsxs)("div",{className:"p-4 bg-red-50/90 dark:bg-red-900/20 border border-red-200/50 dark:border-red-800/50 text-red-700 dark:text-red-400 rounded-xl text-sm backdrop-blur-sm",children:["Upload Error: ",uploadError]}),(0,r.jsxs)("form",{onSubmit:eu,className:"space-y-8",children:[(0,r.jsxs)("div",{className:B,children:[(0,r.jsxs)("h2",{className:V,children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-green-500/20 rounded-xl",children:(0,r.jsx)(p.Ani,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,r.jsx)("span",{children:"Core Trade Information"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsxs)("label",{htmlFor:"accountId",className:T,children:["Account ",(0,r.jsx)("span",{className:"text-accent-red",children:"*"})]}),D.length>0?(0,r.jsxs)("select",{id:"accountId",name:"accountId",value:Q.accountId||"",onChange:ec,required:!0,className:Y,children:[(0,r.jsx)("option",{value:"",disabled:!0,className:eh,children:"Select an account"}),D.map(e=>(0,r.jsxs)("option",{value:e.id,className:eh,children:[e.name," (Balance: ",e.currency," ",Number(e.balance).toFixed(2),")"]},e.id))]}):(0,r.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl p-4",children:[(0,r.jsxs)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 mb-2",children:[(0,r.jsx)("strong",{children:"No accounts available."})," You need to create a trading account first."]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Go to ",(0,r.jsx)("strong",{children:"Settings â†’ Manage Accounts"})," to add your first trading account."]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"assetType",className:T,children:["Asset Type ",(0,r.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,r.jsx)("select",{id:"assetType",name:"assetType",value:Q.assetType,onChange:ec,required:!0,className:Y,children:Object.values(l.PW).map(e=>(0,r.jsx)("option",{value:e,className:eh,children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"symbol",className:T,children:["Symbol / Pair ",(0,r.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,r.jsx)("input",{type:"text",id:"symbol",name:"symbol",value:Q.symbol,onChange:ec,required:!0,placeholder:"e.g., AAPL, EURUSD, BTCUSDT",className:z}),em("symbol")]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"direction",className:T,children:["Direction ",(0,r.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,r.jsx)("select",{id:"direction",name:"direction",value:Q.direction,onChange:ec,required:!0,className:Y,children:Object.values(l.w_).map(e=>(0,r.jsx)("option",{value:e,className:eh,children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"status",className:T,children:["Status ",(0,r.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,r.jsx)("select",{id:"status",name:"status",value:Q.status,onChange:ec,required:!0,className:Y,children:Object.values(l.d1).map(e=>(0,r.jsx)("option",{value:e,className:eh,children:e},e))})]}),(0,r.jsxs)("div",{className:"md:col-span-2 flex items-center space-x-2 mt-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"isStarred",name:"isStarred",checked:!!Q.isStarred,onChange:ec,className:"h-4 w-4 rounded border-gray-300 text-accent-yellow focus:ring-accent-yellow dark:bg-dark-tertiary dark:border-gray-600"}),(0,r.jsx)("label",{htmlFor:"isStarred",className:T+" mb-0",children:"Mark as Starred"})]})]})]}),(0,r.jsxs)("div",{className:B,children:[(0,r.jsxs)("h2",{className:V,children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-xl",children:(0,r.jsx)(p.Cer,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,r.jsx)("span",{children:"Entry & Exit Details"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"entryDate",className:T,children:["Entry Date & Time ",(0,r.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,r.jsx)("input",{type:"datetime-local",id:"entryDate",name:"entryDate",value:Q.entryDate,onChange:ec,required:!0,className:z}),em("entryDate")]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"entryPrice",className:T,children:["Entry Price ",(0,r.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,r.jsx)("input",{type:"number",id:"entryPrice",name:"entryPrice",value:Q.entryPrice||"",onChange:ec,required:!0,placeholder:"0.00",step:"any",className:z}),em("entryPrice")]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"exitDate",className:T,children:"Exit Date & Time"}),(0,r.jsx)("input",{type:"datetime-local",id:"exitDate",name:"exitDate",value:Q.exitDate||"",onChange:ec,className:z}),em("exitDate")]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"exitPrice",className:T,children:"Exit Price"}),(0,r.jsx)("input",{type:"number",id:"exitPrice",name:"exitPrice",value:Q.exitPrice||"",onChange:ec,placeholder:"0.00",step:"any",className:z}),em("exitPrice")]})]})]}),(0,r.jsxs)("div",{className:B,children:[(0,r.jsxs)("h2",{className:V,children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-red-500/20 to-orange-500/20 rounded-xl",children:(0,r.jsx)(p.Ani,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),(0,r.jsx)("span",{children:"Risk, Reward & Quantity"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"stopLoss",className:T,children:"Stop Loss"}),(0,r.jsx)("input",{type:"number",id:"stopLoss",name:"stopLoss",value:Q.stopLoss||"",onChange:ec,placeholder:"0.00",step:"any",className:z}),em("stopLoss")]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"takeProfit",className:T,children:"Take Profit"}),(0,r.jsx)("input",{type:"number",id:"takeProfit",name:"takeProfit",value:Q.takeProfit||"",onChange:ec,placeholder:"0.00",step:"any",className:z}),em("takeProfit")]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"quantity",className:T,children:["Quantity / Size ",(0,r.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,r.jsx)("input",{type:"number",id:"quantity",name:"quantity",value:Q.quantity||"",onChange:ec,required:!0,placeholder:"e.g., 100, 0.01",step:"any",className:z}),em("quantity")]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"commission",className:T,children:"Commission"}),(0,r.jsx)("input",{type:"number",id:"commission",name:"commission",value:Q.commission||"",onChange:ec,placeholder:"0.00",step:"any",className:z}),em("commission")]}),void 0!==Q.rMultiple&&(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsxs)("p",{className:"text-sm font-medium ".concat(void 0===Q.rMultiple||null===Q.rMultiple?"text-gray-600 dark:text-gray-400":Q.rMultiple>=2?"text-green-600 dark:text-green-400":Q.rMultiple>=1?"text-yellow-600 dark:text-yellow-400":Q.rMultiple>0?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400"),children:["Calculated R:R: ",Q.rMultiple.toFixed(2),"R"]})})]})]}),(0,r.jsxs)("div",{className:B,children:[(0,r.jsxs)("h2",{className:V,children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-500/20 to-indigo-500/20 rounded-xl",children:(0,r.jsx)(p.Ani,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,r.jsx)("span",{children:"Strategy & Analysis"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"strategyId",className:T,children:"Trading Strategy"}),(0,r.jsxs)("select",{id:"strategyId",name:"strategyId",value:Q.strategyId||"",onChange:ec,className:Y,children:[(0,r.jsx)("option",{value:"",className:eh,children:"No strategy selected"}),en.filter(e=>e.isActive).map(e=>(0,r.jsx)("option",{value:e.id,className:eh,children:e.name},e.id))]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Link this trade to a specific trading strategy for performance tracking"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"session",className:T,children:"Trading Session"}),(0,r.jsx)("select",{id:"session",name:"session",value:Q.session,onChange:ec,className:Y,children:Object.values(i).map(e=>(0,r.jsx)("option",{value:e,className:eh,children:e},e))}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Market session when this trade was executed"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"tags",className:T,children:"Tags"}),(0,r.jsx)(x.A,{isMulti:!0,name:"tags",options:[],value:J,onChange:e=>{K(e)},placeholder:"Type to add tags (e.g., Scalp, Breakout, Reversal)",classNamePrefix:"react-select",styles:{control:(e,a)=>({...e,backgroundColor:q,borderColor:a.isFocused?"var(--color-accent-green)":R,boxShadow:a.isFocused?"0 0 0 2px var(--color-accent-green-transparent)":"none",borderRadius:"0.5rem",minHeight:"42px",transition:"border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out","&:hover":{borderColor:a.isFocused?"var(--color-accent-green)":R}}),valueContainer:e=>({...e,padding:"2px 8px"}),input:e=>({...e,color:U,margin:"0px",padding:"0px"}),placeholder:e=>({...e,color:_}),singleValue:e=>({...e,color:U}),multiValue:e=>({...e,backgroundColor:"dark"===I?"var(--color-dark-tertiary)":"var(--color-light-tertiary)",borderRadius:"0.25rem"}),multiValueLabel:e=>({...e,color:U,fontSize:"0.875rem"}),multiValueRemove:e=>({...e,color:"dark"===I?"var(--text-text-light-secondary)":"var(--color-text-dark-secondary)","&:hover":{backgroundColor:"dark"===I?"var(--color-accent-red-darker)":"var(--color-accent-red)",color:"white"}}),menu:e=>({...e,backgroundColor:q,borderColor:R,borderWidth:"1px",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06)",zIndex:9999}),menuPortal:e=>({...e,zIndex:9999}),option:(e,a)=>({...e,backgroundColor:a.isSelected?"var(--color-accent-blue)":a.isFocused?"dark"===I?"var(--color-dark-hover)":"var(--color-light-hover)":"transparent",color:a.isSelected?"white":U,fontSize:"0.875rem","&:active":{backgroundColor:"var(--color-accent-blue-darker)"}}),indicatorSeparator:()=>({display:"none"}),dropdownIndicator:e=>({...e,color:"dark"===I?"var(--text-text-light-secondary)":"var(--color-text-dark-secondary)","&:hover":{color:"dark"===I?"white":"black"}}),clearIndicator:e=>({...e,color:"dark"===I?"var(--text-text-light-secondary)":"var(--color-text-dark-secondary)","&:hover":{color:"dark"===I?"white":"black"}})},theme:e=>({...e,borderRadius:5,colors:{...e.colors,primary:"var(--color-accent-blue)",primary75:"var(--color-accent-blue-lighter)",primary50:"var(--color-accent-blue-lightest)",primary25:"var(--color-light-hover)",danger:"var(--color-accent-red)",dangerLight:"var(--color-accent-red-lighter)",neutral0:q,neutral5:"dark"===I?"var(--color-dark-tertiary)":"var(--color-light-tertiary)",neutral10:"dark"===I?"var(--color-dark-border)":"var(--color-light-border)",neutral20:R,neutral30:R,neutral40:"dark"===I?"var(--text-text-light-secondary)":"var(--color-text-dark-secondary)",neutral50:_,neutral60:"dark"===I?"var(--text-text-light-primary)":"var(--color-text-dark-primary)",neutral80:U,neutral90:U}})}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Add custom tags to categorize and filter your trades"})]})]})]}),(0,r.jsxs)("div",{className:B,children:[(0,r.jsxs)("h2",{className:V,children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-yellow-500/20 to-amber-500/20 rounded-xl",children:(0,r.jsx)(p.dIn,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),(0,r.jsx)("span",{children:"Reflection & Journaling"})]}),(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"setupDetails",className:T,children:"Setup Details"}),(0,r.jsx)("textarea",{id:"setupDetails",name:"setupDetails",value:Q.setupDetails||"",onChange:ec,placeholder:"Describe your trade setup, confluence factors, etc.",className:W})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"mistakesMade",className:T,children:"Mistakes Made"}),(0,r.jsx)("textarea",{id:"mistakesMade",name:"mistakesMade",value:Q.mistakesMade||"",onChange:ec,placeholder:"Any deviations from your plan or execution errors?",className:W})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"lessonsLearned",className:T,children:"Lessons Learned"}),(0,r.jsx)("textarea",{id:"lessonsLearned",name:"lessonsLearned",value:Q.lessonsLearned||"",onChange:ec,placeholder:"What can you take away from this trade?",className:W})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"notes",className:T,children:"General Notes"}),(0,r.jsx)("textarea",{id:"notes",name:"notes",value:Q.notes||"",onChange:ec,placeholder:"Any other observations or comments...",className:W})]})]})]}),(0,r.jsxs)("div",{className:B,children:[(0,r.jsxs)("h2",{className:V,children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-indigo-500/20 to-cyan-500/20 rounded-xl",children:(0,r.jsx)(p.HVe,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),(0,r.jsx)("span",{children:"Chart Snapshot"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,r.jsxs)("label",{htmlFor:"file-upload",className:"w-full max-w-md flex flex-col items-center px-6 py-8 rounded-xl shadow-lg tracking-wide uppercase border-2 border-dashed cursor-pointer transition-all duration-200 backdrop-blur-sm\n                                ".concat(ee||et?"border-blue-500 bg-blue-50/80 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 bg-gray-50/80 dark:bg-gray-800/40"," \n                                text-gray-700 dark:text-gray-300 \n                                hover:bg-gray-100/80 dark:hover:bg-gray-700/40 \n                                hover:border-blue-400 dark:hover:border-blue-500"),children:[(0,r.jsx)(p.HVe,{className:"text-4xl mb-3 ".concat(ee||et?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400")}),(0,r.jsx)("span",{className:"text-sm font-medium leading-normal",children:ee?ee.name:et?"Change Chart":"Upload Chart"}),(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"PNG, JPG, GIF up to 10MB"}),(0,r.jsx)("input",{id:"file-upload",name:"imageUrl",type:"file",className:"hidden",onChange:e=>{if(setUploadError(null),e.target.files&&e.target.files[0]){let a=e.target.files[0];if(a.size>5242880)return void setUploadError("File is too large (max 5MB).");if(!["image/png","image/jpeg","image/jpg","image/gif","image/webp"].includes(a.type))return void setUploadError("Invalid file type. Please select an image (PNG, JPG, GIF, WEBP).");ea(a),er(URL.createObjectURL(a)),$(e=>({...e,imageUrl:""}))}else ea(null),er((null==j?void 0:j.imageUrl)||null)},accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp"})]}),et&&(0,r.jsxs)("div",{className:"relative group max-w-md w-full",children:[(0,r.jsx)("img",{src:et,alt:"Selected chart preview",className:"w-full h-auto rounded-2xl shadow-lg object-contain max-h-96 border border-gray-200/50 dark:border-gray-700/50"}),(0,r.jsx)("button",{type:"button",onClick:()=>{ea(null),er((null==j?void 0:j.imageUrl)||null),$(e=>({...e,imageUrl:(null==j?void 0:j.imageUrl)||""}))},className:"absolute top-3 right-3 p-2 bg-black/50 backdrop-blur-sm rounded-full text-white hover:bg-red-500 hover:bg-opacity-90 transition-all duration-200 opacity-0 group-hover:opacity-100 shadow-lg","aria-label":"Remove image",children:(0,r.jsx)(p._Hm,{className:"h-5 w-5"})})]})]})]}),(0,r.jsx)("div",{className:B,children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end items-center gap-4 pt-6 border-t border-gray-200/30 dark:border-gray-700/30",children:[w&&(0,r.jsx)("button",{type:"button",onClick:w,className:"".concat(eg," ").concat("bg-gray-100/80 dark:bg-gray-800/80 hover:bg-gray-500 dark:hover:bg-gray-500 text-gray-600 dark:text-gray-400 hover:text-white focus:ring-gray-500 hover:scale-105 backdrop-blur-sm"),children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:A||es,className:"".concat(eg," ").concat("bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white focus:ring-blue-500 hover:scale-105 hover:shadow-xl"," disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:scale-100"),children:A||es?"Saving...":k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.dIn,{className:"mr-2"})," Update Trade"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Cer,{className:"mr-2"})," Log Trade"]})})]})})]})]})}},56051:(e,a,t)=>{t.d(a,{PW:()=>r,d1:()=>l,w_:()=>s});var r=function(e){return e.STOCK="Stock",e.CRYPTO="Crypto",e.FOREX="Forex",e.COMMODITIES="Commodities",e.FUTURES="Futures",e.OPTIONS="Options",e}({}),s=function(e){return e.LONG="Long",e.SHORT="Short",e}({}),l=function(e){return e.OPEN="Open",e.CLOSED="Closed",e.PENDING="Pending",e.CANCELLED="Cancelled",e}({})},70392:(e,a,t)=>{t.d(a,{_m:()=>i,Ay:()=>N,BF:()=>d,Tq:()=>o,tW:()=>k,jA:()=>j,G6:()=>b,xB:()=>f,i7:()=>v,Rc:()=>m,RS:()=>n});var r=t(51990),s=t(80722);let l={getAccounts:async()=>(await s.Y0.get("/accounts")).data,getAccount:async e=>(await s.Y0.get("/accounts/".concat(e))).data,createAccount:async e=>(await s.Y0.post("/accounts",e)).data,updateAccount:async(e,a)=>(await s.Y0.put("/accounts/".concat(e),a)).data,async deleteAccount(e){await s.Y0.delete("/accounts/".concat(e))}},o=(0,r.zD)("accounts/fetchAccounts",async()=>await l.getAccounts()),i=(0,r.zD)("accounts/createAccount",async e=>await l.createAccount(e)),n=(0,r.zD)("accounts/updateAccount",async e=>{let{id:a,...t}=e;return await l.updateAccount(a,t)}),d=(0,r.zD)("accounts/deleteAccount",async e=>(await l.deleteAccount(e),e)),c=(0,r.Z0)({name:"accounts",initialState:{accounts:[],selectedAccountId:null,isLoading:!1,error:null},reducers:{setAccounts:(e,a)=>{e.accounts=a.payload,e.selectedAccountId&&!e.accounts.find(a=>a.id===e.selectedAccountId)&&(e.selectedAccountId=null)},setSelectedAccount:(e,a)=>{null===a.payload?e.selectedAccountId=null:e.accounts.find(e=>e.id===a.payload)?e.selectedAccountId=a.payload:console.warn("Attempted to select non-existent account ID: ".concat(a.payload))},addAccount:(e,a)=>{e.accounts.push(a.payload),e.selectedAccountId||(e.selectedAccountId=a.payload.id)},updateAccount:(e,a)=>{let t=e.accounts.findIndex(e=>e.id===a.payload.id);-1!==t?e.accounts[t]={...e.accounts[t],...a.payload}:console.warn("Attempted to update non-existent account ID: ".concat(a.payload.id))},deleteAccount:(e,a)=>{let t=a.payload;e.accounts=e.accounts.filter(e=>e.id!==t),e.selectedAccountId===t&&(e.selectedAccountId=null)},setLoading:(e,a)=>{e.isLoading=a.payload},setError:(e,a)=>{e.error=a.payload}},extraReducers:e=>{e.addCase(o.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o.fulfilled,(e,a)=>{e.isLoading=!1,e.accounts=a.payload,e.selectedAccountId&&!a.payload.find(a=>a.id===e.selectedAccountId)&&(e.selectedAccountId=null)}).addCase(o.rejected,(e,a)=>{e.isLoading=!1,e.error=a.error.message||"Failed to fetch accounts"}).addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.isLoading=!1,e.accounts.push(a.payload),e.selectedAccountId||(e.selectedAccountId=a.payload.id)}).addCase(i.rejected,(e,a)=>{e.isLoading=!1,e.error=a.error.message||"Failed to create account"}).addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.isLoading=!1;let t=e.accounts.findIndex(e=>e.id===a.payload.id);-1!==t&&(e.accounts[t]=a.payload)}).addCase(n.rejected,(e,a)=>{e.isLoading=!1,e.error=a.error.message||"Failed to update account"}).addCase(d.pending,e=>{e.isLoading=!0,e.error=null}).addCase(d.fulfilled,(e,a)=>{e.isLoading=!1,e.accounts=e.accounts.filter(e=>e.id!==a.payload),e.selectedAccountId===a.payload&&(e.selectedAccountId=null)}).addCase(d.rejected,(e,a)=>{e.isLoading=!1,e.error=a.error.message||"Failed to delete account"})}}),{setAccounts:u,setSelectedAccount:m,addAccount:g,updateAccount:h,deleteAccount:x,setLoading:p,setError:y}=c.actions,b=e=>e.accounts.accounts,v=e=>e.accounts.selectedAccountId,f=e=>{let a=e.accounts.selectedAccountId;return e.accounts.accounts.find(e=>e.id===a)||null},j=e=>e.accounts.isLoading,k=e=>e.accounts.error,N=c.reducer}}]);