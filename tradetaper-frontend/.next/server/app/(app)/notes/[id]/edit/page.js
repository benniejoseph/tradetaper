(()=>{var e={};e.id=710,e.ids=[710],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6140:(e,t,r)=>{Promise.resolve().then(r.bind(r,98862))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},49081:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=r(65239),s=r(48088),n=r(88170),o=r.n(n),l=r(30893),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let d={children:["",{children:["(app)",{children:["notes",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,76884)),"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/notes/[id]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,70718)),"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/notes/[id]/edit/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(app)/notes/[id]/edit/page",pathname:"/notes/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},76884:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/notes/[id]/edit/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/notes/[id]/edit/page.tsx","default")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95072:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});var a=r(64298);class s{static async createNote(e){return(await a.Y0.post("/notes",e)).data}static async getNotes(e={}){let t=new URLSearchParams;Object.entries(e).forEach(([e,r])=>{null!=r&&(Array.isArray(r)?r.forEach(r=>t.append(e,r.toString())):t.append(e,r.toString()))});let r=`/notes?${t.toString()}`;console.log("\uD83D\uDD0D NotesService.getNotes Debug:",{params:e,searchParams:t.toString(),fullUrl:r,timestamp:new Date().toISOString()});let s=await a.Y0.get(r);return console.log("\uD83D\uDCE5 NotesService.getNotes Response:",{status:s.status,dataType:typeof s.data,notesCount:s.data?.notes?.length||0,total:s.data?.total||0,url:r}),s.data}static async getNote(e){return(await a.Y0.get(`/notes/${e}`)).data}static async updateNote(e,t){return(await a.Y0.patch(`/notes/${e}`,t)).data}static async deleteNote(e){await a.Y0.delete(`/notes/${e}`)}static async togglePin(e){return(await a.Y0.patch(`/notes/${e}/toggle-pin`)).data}static async getStats(){return(await a.Y0.get("/notes/stats")).data}static async getTags(){return(await a.Y0.get("/notes/tags")).data}static async getCalendarNotes(e,t){return(await a.Y0.get(`/notes/calendar/${e}/${t}`)).data}static async uploadMedia(e,t){let r=new FormData;return r.append("file",e),t&&r.append("noteId",t),(await a.Y0.post("/notes/media/upload",r,{headers:{"Content-Type":"multipart/form-data"}})).data}static async speechToText(e){let t=new FormData;return t.append("audio",e,"recording.webm"),(await a.Y0.post("/notes/speech-to-text",t,{headers:{"Content-Type":"multipart/form-data"}})).data}static async searchNotes(e,t={}){return this.getNotes({...t,search:e})}static async getRecentNotes(e=10){return(await this.getNotes({sortBy:"updatedAt",sortOrder:"DESC",limit:e})).notes}static async getPinnedNotes(){return(await this.getNotes({pinnedOnly:!0,sortBy:"updatedAt",sortOrder:"DESC"})).notes}static async getNotesWithMedia(e=20){return this.getNotes({hasMedia:!0,sortBy:"updatedAt",sortOrder:"DESC",limit:e})}static async getNotesByTag(e,t=20){return this.getNotes({tags:[e],sortBy:"updatedAt",sortOrder:"DESC",limit:t})}static async getNotesByAccount(e){return this.getNotes({accountId:e,sortBy:"updatedAt",sortOrder:"DESC"})}static async getNotesByTrade(e){return this.getNotes({tradeId:e,sortBy:"createdAt",sortOrder:"ASC"})}static async exportNotes(e,t={}){let r=new URLSearchParams;return Object.entries(t).forEach(([e,t])=>{null!=t&&(Array.isArray(t)?t.forEach(t=>r.append(e,t.toString())):r.append(e,t.toString()))}),r.append("format",e),(await a.Y0.get(`/notes/export?${r.toString()}`,{responseType:"blob"})).data}static async duplicateNote(e){return(await a.Y0.post(`/notes/${e}/duplicate`)).data}static async getTemplates(){return(await a.Y0.get("/notes/templates")).data}static async createFromTemplate(e,t){return(await a.Y0.post(`/notes/templates/${e}/create`,{title:t})).data}static async getNotesForDate(e){return(await a.Y0.get(`/notes/calendar/date/${e}`)).data}static async getCalendarStats(e,t){return(await a.Y0.get(`/notes/calendar/${e}/${t}/stats`)).data}static async getMediaUrl(e){return(await a.Y0.get(`/notes/media/${e}/url`)).data.url}static async deleteMedia(e){await a.Y0.delete(`/notes/media/${e}`)}static async generateEmbedData(e){return(await a.Y0.post("/notes/media/embed",{url:e})).data}static async enhanceText(e,t){return(await a.Y0.post("/notes/ai/enhance-text",{text:e,task:t})).data}static async generateNoteSuggestions(e){return(await a.Y0.post("/notes/ai/generate-suggestions",{content:e})).data}static async exportNote(e,t){return(await a.Y0.get(`/notes/${e}/export/${t}`,{responseType:"blob"})).data}static async bulkDelete(e){await a.Y0.post("/notes/bulk/delete",{noteIds:e})}static async bulkUpdateTags(e,t){await a.Y0.post("/notes/bulk/tags",{noteIds:e,tags:t})}static async bulkUpdateVisibility(e,t){await a.Y0.post("/notes/bulk/visibility",{noteIds:e,visibility:t})}}},96412:(e,t,r)=>{Promise.resolve().then(r.bind(r,76884))},98862:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(60687),s=r(43210),n=r(16189),o=r(69587),l=r(19026),i=r(37052),d=r(95072),c=r(37590);let u=({icon:e,label:t,description:r,onClick:s})=>(0,a.jsxs)("button",{onClick:s,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:e}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:t}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:r})]})]}),p=({block:e,onUpdate:t,onAddBlock:r,onDelete:s,onImageUpload:n,convertVideoUrl:l,uploading:i})=>{let d=(e,r)=>{t({[e]:r})};switch(e.type){case"text":return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("textarea",{value:e.content?.text||"",onChange:e=>d("text",e.target.value),placeholder:"Type something...",className:"w-full bg-transparent border-none outline-none resize-none min-h-[1.5rem] text-gray-800 dark:text-gray-200 placeholder-gray-400",rows:1,style:{height:"auto"},onInput:e=>{let t=e.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"}}),(0,a.jsx)(g,{onAddBlock:r,onDelete:s})]});case"heading":return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("input",{type:"text",value:e.content?.text||"",onChange:e=>d("text",e.target.value),placeholder:"Heading",className:"w-full bg-transparent border-none outline-none text-2xl font-bold text-gray-800 dark:text-gray-200 placeholder-gray-400"}),(0,a.jsx)(g,{onAddBlock:r,onDelete:s})]});case"quote":return(0,a.jsxs)("div",{className:"group relative border-l-4 border-gray-300 dark:border-gray-600 pl-4",children:[(0,a.jsx)("textarea",{value:e.content?.text||"",onChange:e=>d("text",e.target.value),placeholder:"Quote...",className:"w-full bg-transparent border-none outline-none resize-none italic text-gray-600 dark:text-gray-400 placeholder-gray-400",rows:1}),(0,a.jsx)("input",{type:"text",value:e.content?.author||"",onChange:e=>d("author",e.target.value),placeholder:"Author (optional)",className:"w-full bg-transparent border-none outline-none text-sm text-gray-500 dark:text-gray-500 placeholder-gray-400 mt-1"}),(0,a.jsx)(g,{onAddBlock:r,onDelete:s})]});case"list":return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,a.jsx)("button",{onClick:()=>d("ordered",!e.content?.ordered),className:"text-sm px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded",children:e.content?.ordered?"Numbered":"Bulleted"})}),(0,a.jsx)("div",{className:"space-y-1",children:(e.content?.items||[""]).map((t,r)=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-gray-400 pt-1",children:e.content?.ordered?`${r+1}.`:"â€¢"}),(0,a.jsx)("input",{type:"text",value:t,onChange:t=>{let a=[...e.content?.items||[""]];a[r]=t.target.value,d("items",a)},onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();let t=[...e.content?.items||[""]];t.splice(r+1,0,""),d("items",t)}else if("Backspace"===a.key&&!t&&(e.content?.items?.length||0)>1){a.preventDefault();let t=[...e.content?.items||[""]];t.splice(r,1),d("items",t)}},placeholder:"List item...",className:"flex-1 bg-transparent border-none outline-none text-gray-800 dark:text-gray-200 placeholder-gray-400"})]},r))}),(0,a.jsx)(g,{onAddBlock:r,onDelete:s})]});case"code":return(0,a.jsxs)("div",{className:"group relative bg-gray-100 dark:bg-gray-800 rounded-lg p-4",children:[(0,a.jsxs)("select",{value:e.content?.language||"javascript",onChange:e=>d("language",e.target.value),className:"mb-2 text-xs bg-transparent border-none outline-none text-gray-500",children:[(0,a.jsx)("option",{value:"javascript",children:"JavaScript"}),(0,a.jsx)("option",{value:"typescript",children:"TypeScript"}),(0,a.jsx)("option",{value:"python",children:"Python"}),(0,a.jsx)("option",{value:"html",children:"HTML"}),(0,a.jsx)("option",{value:"css",children:"CSS"}),(0,a.jsx)("option",{value:"json",children:"JSON"}),(0,a.jsx)("option",{value:"sql",children:"SQL"}),(0,a.jsx)("option",{value:"bash",children:"Bash"})]}),(0,a.jsx)("textarea",{value:e.content?.code||"",onChange:e=>d("code",e.target.value),placeholder:"Enter code...",className:"w-full bg-transparent border-none outline-none resize-none font-mono text-sm text-gray-800 dark:text-gray-200 placeholder-gray-400",rows:3}),(0,a.jsx)(g,{onAddBlock:r,onDelete:s})]});case"image":return(0,a.jsxs)("div",{className:"group relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.dkL,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>0xa00000)return void c.Ay.error("File size must be less than 10MB");n(t)}},disabled:i,className:"hidden",id:`file-upload-${e.id}`}),(0,a.jsx)("label",{htmlFor:`file-upload-${e.id}`,className:`flex items-center justify-center gap-2 w-full px-4 py-3 border-2 border-dashed rounded-lg cursor-pointer transition-all ${i?"border-blue-300 bg-blue-50 dark:bg-blue-900/20 cursor-not-allowed":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.hW,{className:"animate-spin text-blue-500"}),(0,a.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:"Uploading..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.HVe,{className:"text-gray-500"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Click to upload image"})]})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(o.AnD,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)("input",{type:"text",value:e.content?.url||"",onChange:e=>d("url",e.target.value),placeholder:"Or paste image URL...",className:"w-full pl-10 bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsx)("input",{type:"text",value:e.content?.caption||"",onChange:e=>d("caption",e.target.value),placeholder:"Caption (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("input",{type:"text",value:e.content?.alt||"",onChange:e=>d("alt",e.target.value),placeholder:"Alt text (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"})]}),e.content?.url&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("img",{src:e.content.url,alt:e.content.alt||"Image",className:"max-w-full h-auto rounded-lg",onError:e=>{e.target.style.display="none"}}),e.content.caption&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2 italic",children:e.content.caption})]})]}),(0,a.jsx)(g,{onAddBlock:r,onDelete:s})]});case"video":return(0,a.jsxs)("div",{className:"group relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.HiP,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("input",{type:"text",value:e.content?.url||"",onChange:e=>d("url",e.target.value),placeholder:"Video URL (YouTube, Vimeo, etc.)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("input",{type:"text",value:e.content?.caption||"",onChange:e=>d("caption",e.target.value),placeholder:"Caption (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"})]}),e.content?.url&&(0,a.jsxs)("div",{className:"mt-4",children:[l(e.content.url)!==e.content.url?(0,a.jsx)("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:(0,a.jsx)("iframe",{src:l(e.content.url),className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded video"})}):(0,a.jsx)("div",{className:"aspect-video bg-gray-200 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.gSK,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.content.url.includes("youtube.com")||e.content.url.includes("vimeo.com")?"Unsupported video format":"Enter a YouTube or Vimeo URL"})]})}),e.content.caption&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2 italic",children:e.content.caption})]})]}),(0,a.jsx)(g,{onAddBlock:r,onDelete:s})]});case"embed":return(0,a.jsxs)("div",{className:"group relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.AnD,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("input",{type:"text",value:e.content?.url||"",onChange:e=>d("url",e.target.value),placeholder:"URL to embed",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("input",{type:"text",value:e.content?.title||"",onChange:e=>d("title",e.target.value),placeholder:"Title (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("textarea",{value:e.content?.description||"",onChange:e=>d("description",e.target.value),placeholder:"Description (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:2})]}),e.content?.url&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:(0,a.jsxs)("div",{className:"text-left",children:[e.content.title&&(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.content.title}),(0,a.jsx)("p",{className:"text-sm text-blue-500 break-all",children:e.content.url}),e.content.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.content.description})]})})]}),(0,a.jsx)(g,{onAddBlock:r,onDelete:s})]});case"table":return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 dark:border-gray-600",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(e.content?.headers||[]).map((t,r)=>(0,a.jsx)("th",{className:"border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 p-2",children:(0,a.jsx)("input",{type:"text",value:t,onChange:t=>{let a=[...e.content?.headers||[]];a[r]=t.target.value,d("headers",a)},className:"w-full bg-transparent border-none outline-none text-sm font-medium",placeholder:`Header ${r+1}`})},r)),(0,a.jsx)("th",{className:"border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 p-2 w-10",children:(0,a.jsx)("button",{onClick:()=>{let t=[...e.content?.headers||[],""],r=(e.content?.rows||[]).map(e=>[...e,""]);d("headers",t),d("rows",r)},className:"text-blue-500 hover:text-blue-700",children:(0,a.jsx)(o.OiG,{size:12})})})]})}),(0,a.jsxs)("tbody",{children:[(e.content?.rows||[]).map((t,r)=>(0,a.jsxs)("tr",{children:[t.map((t,s)=>(0,a.jsx)("td",{className:"border border-gray-300 dark:border-gray-600 p-2",children:(0,a.jsx)("input",{type:"text",value:t,onChange:t=>{let a=[...e.content?.rows||[]];a[r][s]=t.target.value,d("rows",a)},className:"w-full bg-transparent border-none outline-none text-sm",placeholder:`Cell ${r+1}-${s+1}`})},s)),(0,a.jsx)("td",{className:"border border-gray-300 dark:border-gray-600 p-2 w-10",children:(0,a.jsx)("button",{onClick:()=>{d("rows",(e.content?.rows||[]).filter((e,t)=>t!==r))},className:"text-red-500 hover:text-red-700",children:"\xd7"})})]},r)),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:(e.content?.headers?.length||0)+1,className:"border border-gray-300 dark:border-gray-600 p-2 text-center",children:(0,a.jsxs)("button",{onClick:()=>{let t=Array(e.content?.headers?.length||2).fill("");d("rows",[...e.content?.rows||[],t])},className:"text-blue-500 hover:text-blue-700 text-sm",children:[(0,a.jsx)(o.OiG,{className:"inline mr-1",size:12}),"Add Row"]})})})]})]})}),(0,a.jsx)(g,{onAddBlock:r,onDelete:s})]});case"divider":return(0,a.jsxs)("div",{className:"group relative py-4",children:[(0,a.jsx)("hr",{className:"border-gray-300 dark:border-gray-600"}),(0,a.jsx)(g,{onAddBlock:r,onDelete:s})]});case"callout":let u={info:(0,a.jsx)(o.__w,{className:"text-blue-500"}),warning:(0,a.jsx)(o.BS8,{className:"text-yellow-500"}),success:(0,a.jsx)(o.A7C,{className:"text-green-500"})};return(0,a.jsxs)("div",{className:"group relative bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[u[e.content?.type],(0,a.jsxs)("select",{value:e.content?.type||"info",onChange:e=>d("type",e.target.value),className:"text-sm bg-transparent border-none outline-none",children:[(0,a.jsx)("option",{value:"info",children:"Info"}),(0,a.jsx)("option",{value:"warning",children:"Warning"}),(0,a.jsx)("option",{value:"success",children:"Success"})]})]}),(0,a.jsx)("textarea",{value:e.content?.text||"",onChange:e=>d("text",e.target.value),placeholder:"Callout text...",className:"w-full bg-transparent border-none outline-none resize-none text-gray-800 dark:text-gray-200 placeholder-gray-400",rows:1}),(0,a.jsx)(g,{onAddBlock:r,onDelete:s})]});default:return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsxs)("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-500",children:["Unsupported block type: ",e.type]}),(0,a.jsx)(g,{onAddBlock:r,onDelete:s})]})}},g=({onAddBlock:e,onDelete:t})=>(0,a.jsxs)("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>e("text"),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Add block",children:(0,a.jsx)(o.OiG,{size:12})}),(0,a.jsx)("button",{onClick:t,className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete block",children:"\xd7"})]}),x=()=>{let e=(0,n.useRouter)(),t=(0,n.useParams)(),r=t?.id,[g,x]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0),[b,y]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),[f,N]=(0,s.useState)(""),[k,w]=(0,s.useState)([]),[C,A]=(0,s.useState)([]),[S,D]=(0,s.useState)(""),[T,B]=(0,s.useState)(!1),[P,$]=(0,s.useState)("private"),[Y,q]=(0,s.useState)(!1),[E,U]=(0,s.useState)(!1),[_,z]=(0,s.useState)(null),F=async()=>{if(r)try{h(!0);let e=await d.j.getNote(r);x(e),N(e.title),w(e.content||[]),A(e.tags||[]),$(e.visibility),q(e.isPinned)}catch(t){console.error("Error fetching note:",t),c.Ay.error("Failed to load note"),e.push("/notes")}finally{h(!1)}};(0,s.useEffect)(()=>{r&&F()},[r]);let O=async()=>{if(!f.trim())return void c.Ay.error("Please enter a note title");try{y(!0);let t=await d.j.updateNote(r,{title:f,content:k,tags:C,visibility:P,isPinned:Y});x(t),c.Ay.success("Note saved successfully"),e.push(`/notes/${r}`)}catch(e){console.error("Error saving note:",e),c.Ay.error("Failed to save note")}finally{y(!1)}},L=(e,t)=>{let r=void 0!==t?t+1:k.length,a={id:`block-${Date.now()}-${Math.random()}`,type:e,content:M(e),position:r};w([...k.slice(0,r),a,...k.slice(r).map(e=>({...e,position:e.position+1}))]),U(!1)},M=e=>{switch(e){case"text":case"heading":return{text:""};case"quote":return{text:"",author:""};case"list":return{items:[""],ordered:!1};case"code":return{code:"",language:"javascript"};case"image":return{url:"",caption:"",alt:""};case"video":return{url:"",caption:""};case"embed":return{url:"",title:"",description:""};case"callout":return{text:"",type:"info"};case"table":return{headers:["Column 1","Column 2"],rows:[["",""],["",""]]};default:return{}}},R=(e,t)=>{let r=[...k];r[e]={...r[e],content:{...r[e].content,...t}},w(r)},V=e=>{1!==k.length&&w(k.filter((t,r)=>r!==e))},I=()=>{S.trim()&&!C.includes(S.trim())&&(A([...C,S.trim()]),D(""),B(!1))},Q=e=>{A(C.filter(t=>t!==e))},G=async(e,t)=>{try{j(!0);let{url:a}=await d.j.uploadMedia(e,r);R(t,{url:a}),c.Ay.success("Image uploaded successfully")}catch(e){console.error("Error uploading image:",e),c.Ay.error("Failed to upload image")}finally{j(!1)}},H=e=>{if(e.includes("youtube.com/watch?v=")){let t=e.split("v=")[1]?.split("&")[0];return`https://www.youtube.com/embed/${t}`}if(e.includes("vimeo.com/")&&!e.includes("/embed/")){let t=e.split("vimeo.com/")[1]?.split("/")[0];return`https://player.vimeo.com/video/${t}`}return e};return m?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.hW,{className:"animate-spin text-4xl text-blue-500 mb-4 mx-auto"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"Loading note editor..."})]})}):g?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 dark:from-gray-900 dark:via-blue-900 dark:to-purple-900 p-4",children:[(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsx)(l.Ue,{className:"backdrop-blur-sm bg-white/70 dark:bg-gray-800/70 border border-white/20 shadow-xl",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(i.Qf,{onClick:()=>e.push(`/notes/${r}`),className:"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 dark:bg-gray-700/50 dark:hover:bg-gray-600/50 dark:text-gray-300",children:(0,a.jsx)(o.QVr,{})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Edit Note"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.Qf,{onClick:()=>q(!Y),className:`${Y?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-gray-100/50 text-gray-600 hover:bg-gray-200/50"} dark:bg-gray-700/50 dark:hover:bg-gray-600/50 dark:text-gray-300`,children:Y?(0,a.jsx)(o.gt3,{}):(0,a.jsx)(o.wei,{})}),(0,a.jsx)(i.Qf,{onClick:()=>$("private"===P?"shared":"private"),className:"bg-gray-100/50 hover:bg-gray-200/50 text-gray-600 dark:bg-gray-700/50 dark:hover:bg-gray-600/50 dark:text-gray-300",children:"private"===P?(0,a.jsx)(o.mx3,{}):(0,a.jsx)(o.Ny1,{})}),(0,a.jsxs)(i.Qf,{onClick:O,disabled:b,className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700",children:[b?(0,a.jsx)(o.hW,{className:"animate-spin"}):(0,a.jsx)(o.dIn,{}),b?"Saving...":"Save"]})]})]}),(0,a.jsx)("input",{type:"text",value:f,onChange:e=>N(e.target.value),placeholder:"Note title...",className:"w-full text-4xl font-bold bg-transparent border-none outline-none text-gray-900 dark:text-white placeholder-gray-400 mb-6",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-8",children:[C.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-full",children:["#",e,(0,a.jsx)("button",{onClick:()=>Q(e),className:"ml-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",children:(0,a.jsx)(o.QCr,{className:"w-3 h-3"})})]},t)),T?(0,a.jsx)("input",{type:"text",value:S,onChange:e=>D(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),I()):"Escape"===e.key&&(B(!1),D(""))},onBlur:()=>{S.trim()?I():B(!1)},placeholder:"Add tag...",className:"px-3 py-1 text-sm bg-transparent border border-gray-300 dark:border-gray-600 rounded-full outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,a.jsxs)("button",{onClick:()=>B(!0),className:"inline-flex items-center gap-1 px-3 py-1 text-sm text-gray-500 dark:text-gray-400 border border-dashed border-gray-300 dark:border-gray-600 rounded-full hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:[(0,a.jsx)(o.BuZ,{className:"w-3 h-3"}),"Add tag"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6 p-4 bg-gray-50/50 dark:bg-gray-800/50 rounded-lg",children:[(0,a.jsxs)("button",{onClick:()=>L("image"),className:"flex items-center gap-2 px-3 py-2 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:[(0,a.jsx)(o.dkL,{className:"w-4 h-4"}),"Image"]}),(0,a.jsxs)("button",{onClick:()=>L("video"),className:"flex items-center gap-2 px-3 py-2 text-sm bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:[(0,a.jsx)(o.HiP,{className:"w-4 h-4"}),"Video"]}),(0,a.jsxs)("button",{onClick:()=>L("table"),className:"flex items-center gap-2 px-3 py-2 text-sm bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",children:[(0,a.jsx)(o.ist,{className:"w-4 h-4"}),"Table"]}),(0,a.jsxs)("button",{onClick:()=>L("list"),className:"flex items-center gap-2 px-3 py-2 text-sm bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors",children:[(0,a.jsx)(o.v5n,{className:"w-4 h-4"}),"List"]})]}),(0,a.jsx)("div",{className:"space-y-4 min-h-[200px]",children:k.map((e,t)=>(0,a.jsx)(p,{block:e,index:t,onUpdate:e=>R(t,e),onAddBlock:e=>L(e,t),onDelete:()=>V(t),onImageUpload:e=>G(e,t),convertVideoUrl:H,uploading:v},e.id))}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)("button",{onClick:e=>{let t=e.currentTarget.getBoundingClientRect(),r=window.innerHeight;z({top:(t.bottom+400>r?t.top-400:t.bottom)+window.scrollY,left:t.left}),U(!0)},className:"w-full border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-gray-500 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-all duration-200 flex items-center justify-center gap-2 group",children:[(0,a.jsx)(o.OiG,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Add a block"]})}),(0,a.jsxs)("div",{className:"mt-6 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm text-gray-600 dark:text-gray-400",children:[(0,a.jsx)("strong",{children:"Debug:"})," ",k.length," blocks (",k.map(e=>e.type).join(", "),")"]})]})})}),E&&_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>U(!1)}),(0,a.jsx)("div",{className:"fixed z-50 bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto",style:{top:_.top,left:_.left,width:"280px"},children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)(u,{icon:(0,a.jsx)(o.UEl,{className:"text-blue-500"}),label:"Heading",description:"Big section heading",onClick:()=>L("heading")}),(0,a.jsx)(u,{icon:(0,a.jsx)("div",{className:"w-4 h-4 bg-gray-400 rounded-sm"}),label:"Text",description:"Just start writing with plain text",onClick:()=>L("text")}),(0,a.jsx)(u,{icon:(0,a.jsx)(o.JwJ,{className:"text-gray-500"}),label:"Quote",description:"Capture a quote with attribution",onClick:()=>L("quote")}),(0,a.jsx)(u,{icon:(0,a.jsx)(o.v5n,{className:"text-purple-500"}),label:"Bulleted List",description:"Create a simple bulleted list",onClick:()=>L("list")}),(0,a.jsx)(u,{icon:(0,a.jsx)(o.lfF,{className:"text-purple-500"}),label:"Numbered List",description:"Create a list with numbering",onClick:()=>{let e=k.length;w([...k,{id:`block-${Date.now()}-${Math.random()}`,type:"list",content:{items:[""],ordered:!0},position:e}]),U(!1)}}),(0,a.jsx)(u,{icon:(0,a.jsx)(o.FSj,{className:"text-green-500"}),label:"Code",description:"Capture a code snippet",onClick:()=>L("code")}),(0,a.jsx)(u,{icon:(0,a.jsx)(o.dkL,{className:"text-blue-500"}),label:"Image",description:"Upload or embed with a link",onClick:()=>L("image")}),(0,a.jsx)(u,{icon:(0,a.jsx)(o.HiP,{className:"text-red-500"}),label:"Video",description:"Embed from YouTube, Vimeo, etc.",onClick:()=>L("video")}),(0,a.jsx)(u,{icon:(0,a.jsx)(o.AnD,{className:"text-indigo-500"}),label:"Web Bookmark",description:"Save a link to any page on the web",onClick:()=>L("embed")}),(0,a.jsx)(u,{icon:(0,a.jsx)(o.ist,{className:"text-green-500"}),label:"Table",description:"Add a table with rows and columns",onClick:()=>L("table")}),(0,a.jsx)(u,{icon:(0,a.jsx)(o.__w,{className:"text-blue-500"}),label:"Callout",description:"Make writing stand out",onClick:()=>L("callout")}),(0,a.jsx)(u,{icon:(0,a.jsx)(o.iu5,{className:"text-gray-400"}),label:"Divider",description:"Visually divide blocks",onClick:()=>L("divider")})]})})]})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Note not found"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The note you're looking for doesn't exist or has been deleted."}),(0,a.jsxs)(i.Qf,{onClick:()=>e.push("/notes"),children:[(0,a.jsx)(o.QVr,{className:"mr-2"}),"Back to Notes"]})]})})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[4447,5440,1658,5814,8911,5145,4352,5665,6426,9067],()=>r(49081));module.exports=a})();