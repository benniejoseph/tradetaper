(()=>{var e={};e.id=7405,e.ids=[7405],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},25259:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/notes/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/notes/page.tsx","default")},27910:e=>{"use strict";e.exports=require("stream")},28149:(e,t,r)=>{Promise.resolve().then(r.bind(r,51162))},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29987:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>g,tree:()=>c});var a=r(65239),s=r(48088),n=r(88170),i=r.n(n),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c={children:["",{children:["(app)",{children:["notes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25259)),"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/notes/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,70718)),"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/notes/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(app)/notes/page",pathname:"/notes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},51162:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(60687),s=r(43210),n=r(69587),i=r(16189),o=r(90862),l=r(33787),c=r(97306),d=r(95072),u=r(88920),g=r(93526),p=r(37052),x=r(19026),m=r(37590);let h=({onTranscriptionComplete:e,onClose:t,isOpen:r})=>{console.log("\uD83C\uDFA4 VoiceRecorder rendered with props:",{isOpen:r,onTranscriptionComplete:!!e,onClose:!!t});let[i,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[h,y]=(0,s.useState)([]),[b,f]=(0,s.useState)(null),[N,j]=(0,s.useState)(null),[w,v]=(0,s.useState)(0),[k,C]=(0,s.useState)(0),[S,T]=(0,s.useState)(null),D=(0,s.useRef)(null),A=(0,s.useRef)(null),P=(0,s.useRef)(null),E=(0,s.useRef)(null),$=(0,s.useRef)(),M=(0,s.useRef)();(0,s.useEffect)(()=>(U(),()=>{q()}),[]),(0,s.useEffect)(()=>(i&&!l?M.current=setInterval(()=>{v(e=>e+1)},1e3):M.current&&clearInterval(M.current),()=>{M.current&&clearInterval(M.current)}),[i,l]);let q=()=>{A.current&&A.current.getTracks().forEach(e=>e.stop()),P.current&&P.current.close(),$.current&&cancelAnimationFrame($.current),M.current&&clearInterval(M.current)},U=async()=>{try{let e=await navigator.permissions.query({name:"microphone"});T("granted"===e.state),e.addEventListener("change",()=>{T("granted"===e.state)})}catch(e){console.error("Error checking microphone permission:",e),T(!1)}},Y=async()=>{try{console.log("\uD83C\uDFA4 Requesting microphone permission...");let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});console.log("✅ Microphone permission granted!"),T(!0),e.getTracks().forEach(e=>e.stop()),m.Ay.success("Microphone access granted! You can now start recording.")}catch(e){console.error("❌ Error requesting microphone permission:",e),T(!1),e?.name==="NotAllowedError"?m.Ay.error("Microphone access denied. Please allow microphone access in your browser settings."):e?.name==="NotFoundError"?m.Ay.error("No microphone found. Please connect a microphone and try again."):m.Ay.error("Failed to access microphone. Please check your browser settings.")}},F=async e=>{try{let t=new AudioContext,r=t.createAnalyser(),a=t.createMediaStreamSource(e);r.fftSize=256,a.connect(r),P.current=t,E.current=r;let s=()=>{if(E.current){let e=new Uint8Array(E.current.frequencyBinCount);E.current.getByteFrequencyData(e);let t=e.reduce((e,t)=>e+t,0)/e.length;C(t/255)}i&&($.current=requestAnimationFrame(s))};s()}catch(e){console.error("Error setting up audio context:",e)}},R=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});A.current=e,await F(e);let t=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"}),r=[];t.ondataavailable=e=>{e.data.size>0&&r.push(e.data)},t.onstop=()=>{let e=new Blob(r,{type:"audio/webm"}),t=URL.createObjectURL(e),a={id:Date.now().toString(),blob:e,duration:w,url:t,isTranscribing:!1};f(a),y(e=>[a,...e]),v(0),C(0)},D.current=t,t.start(),o(!0),c(!1),T(!0)}catch(e){console.error("Error starting recording:",e),m.Ay.error("Failed to access microphone"),T(!1)}},O=e=>{if(N===e.id)return void j(null);let t=new Audio(e.url);t.onended=()=>j(null),t.play(),j(e.id)},_=e=>{y(t=>t.filter(t=>t.id!==e)),b?.id===e&&f(null)},z=async e=>{try{y(t=>t.map(t=>t.id===e.id?{...t,isTranscribing:!0,error:void 0}:t));let t=await d.j.speechToText(e.blob);y(r=>r.map(r=>r.id===e.id?{...r,transcript:t.transcript,isTranscribing:!1}:r)),m.Ay.success("Transcription completed!")}catch(t){console.error("Error transcribing recording:",t),y(t=>t.map(t=>t.id===e.id?{...t,isTranscribing:!1,error:"Transcription failed"}:t)),m.Ay.error("Failed to transcribe recording")}},G=r=>{e(r),t()},I=e=>{let t=Math.floor(e/60);return`${t}:${(e%60).toString().padStart(2,"0")}`};return r?(0,a.jsx)(u.N,{children:(0,a.jsx)(g.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:(0,a.jsxs)(g.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Voice Recorder"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:(0,a.jsx)(n.QCr,{})})]}),!1===S&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(n.i0t,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Microphone access is required for voice recording."}),(0,a.jsx)(p.Qf,{onClick:Y,variant:"gradient",className:"bg-gradient-to-r from-blue-500 to-purple-500",children:"Grant Permission"})]}),!1!==S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-center mb-6",children:i?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 h-12",children:[...Array(20)].map((e,t)=>(0,a.jsx)(g.P.div,{className:"w-1 bg-red-500 rounded-full",animate:{height:l?4:4+40*k*(.5*Math.random()+.5)},transition:{duration:.1,repeat:l?0:1/0,repeatType:"reverse"}},t))}),(0,a.jsx)("div",{className:"text-2xl font-mono text-gray-900 dark:text-white",children:I(w)}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,a.jsx)(p.Qf,{onClick:()=>{D.current&&i&&(l?(D.current.resume(),c(!1)):(D.current.pause(),c(!0)))},variant:"ghost",icon:l?(0,a.jsx)(n.gSK,{}):(0,a.jsx)(n.kwt,{}),children:l?"Resume":"Pause"}),(0,a.jsx)(p.Qf,{onClick:()=>{D.current&&i&&(D.current.stop(),o(!1),c(!1),A.current&&A.current.getTracks().forEach(e=>e.stop()),$.current&&cancelAnimationFrame($.current))},variant:"danger",className:"bg-red-500 hover:bg-red-600 text-white",icon:(0,a.jsx)(n.wFo,{}),children:"Stop"})]})]}):(0,a.jsx)(p.Qf,{onClick:R,variant:"gradient",className:"bg-gradient-to-r from-red-500 to-red-600 w-20 h-20 rounded-full",icon:(0,a.jsx)(n.i0t,{className:"w-8 h-8"}),children:"Record"})}),h.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Recordings"}),h.map(e=>(0,a.jsxs)(x.Ue,{variant:"glass",className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>O(e),className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:N===e.id?(0,a.jsx)(n.kwt,{className:"w-4 h-4 text-blue-600"}):(0,a.jsx)(n.gSK,{className:"w-4 h-4 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:I(e.duration)}),e.transcript&&(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 max-w-xs truncate",children:e.transcript})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[!e.transcript&&!e.isTranscribing&&!e.error&&(0,a.jsx)(p.Qf,{onClick:()=>z(e),variant:"ghost",size:"sm",icon:(0,a.jsx)(n.g0N,{}),children:"Transcribe"}),e.isTranscribing&&(0,a.jsx)(n.hW,{className:"animate-spin text-blue-500"}),e.transcript&&(0,a.jsx)(p.Qf,{onClick:()=>G(e.transcript),variant:"gradient",size:"sm",className:"bg-gradient-to-r from-green-500 to-green-600",icon:(0,a.jsx)(n.CMH,{}),children:"Use"}),(0,a.jsx)("button",{onClick:()=>_(e.id),className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:(0,a.jsx)(n.qbC,{className:"w-3 h-3"})})]})]}),e.error&&(0,a.jsx)("div",{className:"mt-2 text-xs text-red-500",children:e.error})]},e.id))]})]})]})})}):null},y=({note:e,onClick:t,onDelete:r})=>(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow cursor-pointer relative group",children:[(0,a.jsxs)("div",{onClick:t,className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:e.title||"Untitled"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm line-clamp-3",children:e.preview})]}),e.isPinned&&(0,a.jsx)(n.gt3,{className:"text-yellow-500 ml-2 flex-shrink-0"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(n.w_X,{}),(0,l.GP)((0,c.H)(e.updatedAt),"MMM dd, yyyy")]}),e.wordCount>0&&(0,a.jsxs)("span",{children:[e.wordCount," words"]}),e.hasMedia&&(0,a.jsx)(n.dkL,{className:"text-blue-500"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.tags.slice(0,2).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-xs",children:e},e)),e.tags.length>2&&(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:["+",e.tags.length-2]})]})]})]}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),r(e.id)},className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-red-500 text-white p-1 rounded-full hover:bg-red-600",title:"Delete note",children:(0,a.jsx)(n.qbC,{className:"w-3 h-3"})})]}),b=({note:e,onClick:t,onDelete:r})=>(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow cursor-pointer relative group",children:[(0,a.jsxs)("div",{onClick:t,className:"flex items-start gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),e.isPinned&&(0,a.jsx)(n.gt3,{className:"text-yellow-500"}),e.hasMedia&&(0,a.jsx)(n.dkL,{className:"text-gray-500"})]}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2 line-clamp-2",children:e.preview}),e.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-2",children:e.tags.map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-full",children:e},e))})]}),(0,a.jsxs)("div",{className:"text-right text-xs text-gray-500 dark:text-gray-400 min-w-[120px]",children:[(0,a.jsx)("div",{children:(0,l.GP)((0,c.H)(e.updatedAt),"MMM d, yyyy")}),(0,a.jsxs)("div",{className:"mt-1",children:[e.wordCount," words • ",e.readingTime," min"]})]})]}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),r(e.id)},className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-red-500 text-white p-1 rounded-full hover:bg-red-600",title:"Delete note",children:(0,a.jsx)(n.qbC,{className:"w-3 h-3"})})]}),f=()=>{let e=(0,i.useRouter)(),[t,r]=(0,s.useState)([]),[c,u]=(0,s.useState)(null),[g,p]=(0,s.useState)(!0),[x,f]=(0,s.useState)(""),[N,j]=(0,s.useState)([]),[w,v]=(0,s.useState)([]),[k,C]=(0,s.useState)("grid"),[S,T]=(0,s.useState)("updatedAt"),[D,A]=(0,s.useState)("DESC"),[P,E]=(0,s.useState)(!1),[$,M]=(0,s.useState)({}),[q,U]=(0,s.useState)(!1),[Y,F]=(0,s.useState)(!1),[R,O]=(0,s.useState)(1),[_,z]=(0,s.useState)(0),[G,I]=(0,s.useState)(!1),B=(0,o.d)(x,300),L=async()=>{try{p(!0);let e={limit:20,offset:(R-1)*20,sortBy:S,sortOrder:D,...B&&{search:B},...N.length>0&&{tags:N},...$.from&&{dateFrom:$.from},...$.to&&{dateTo:$.to},...q&&{pinnedOnly:!0},...Y&&{hasMedia:!0}};console.log("\uD83D\uDD0D Notes Page fetchNotes Debug:",{searchTerm:x,debouncedSearch:B,selectedTags:N,params:e,timestamp:new Date().toISOString()});let t=await d.j.getNotes(e);r(t.notes),z(t.total),console.log("\uD83D\uDCCA Notes fetched successfully:",{notesCount:t.notes.length,total:t.total,hasSearch:!!B,searchTerm:B})}catch(e){console.error("Error fetching notes:",e)}finally{p(!1)}},V=async()=>{try{let[e,t]=await Promise.all([d.j.getStats(),d.j.getTags()]);u(e),v(t)}catch(e){console.error("Error fetching metadata:",e)}};(0,s.useEffect)(()=>{L()},[B,N,S,D,$.from,$.to,q,Y,R]),(0,s.useEffect)(()=>{V()},[]);let Q=e=>{j(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),O(1)},H=()=>{f(""),j([]),M({}),U(!1),F(!1),O(1)},W=async e=>{if(confirm("Are you sure you want to delete this note? This action cannot be undone."))try{await d.j.deleteNote(e),m.Ay.success("Note deleted successfully"),L()}catch(e){console.error("Error deleting note:",e),m.Ay.error("Failed to delete note")}},Z=(0,s.useMemo)(()=>B||N.length>0||$.from||$.to||q||Y,[B,N,$,q,Y]),K=async t=>{try{let r={title:`Voice Note - ${(0,l.GP)(new Date,"MMM d, yyyy HH:mm")}`,content:[{id:"1",type:"text",content:t,position:0}],tags:["voice-note"],visibility:"private"},a=await d.j.createNote(r);m.Ay.success("Voice note created successfully!"),L(),e.push(`/notes/${a.id}`)}catch(e){console.error("Error creating voice note:",e),m.Ay.error("Failed to create voice note")}};return g&&0===t.length?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.hW,{className:"animate-spin text-4xl text-blue-500 mb-4 mx-auto"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"Loading your notes..."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"My Notes"}),c&&(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[c.totalNotes," notes • ",c.totalWords.toLocaleString()," words • ",c.totalReadingTime," min read"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)("button",{onClick:()=>e.push("/notes/new"),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg",children:"New Note"}),(0,a.jsxs)("button",{onClick:()=>{console.log("\uD83C\uDFA4 Voice Note button clicked!"),console.log("\uD83D\uDD27 Current showVoiceRecorder state:",G),I(!0),console.log("✅ setShowVoiceRecorder(true) called")},className:"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2",children:[(0,a.jsx)(n.i0t,{}),"Voice Note"]}),(0,a.jsx)("button",{onClick:async()=>{console.log("\uD83E\uDDEA Testing direct search...");try{let e=await d.j.getNotes({search:"test",limit:5});console.log("\uD83D\uDD0D Direct search test result:",e),alert(`Found ${e.notes.length} notes with search "test"`)}catch(e){console.error("❌ Direct search test failed:",e),alert("Search test failed - check console")}},className:"bg-red-500 text-white px-4 py-2 rounded-lg",children:"\uD83E\uDDEA Test Search"}),(0,a.jsx)("button",{onClick:async()=>{console.log("\uD83D\uDCCB Getting all notes...");try{let e=await d.j.getNotes({limit:100});console.log("\uD83D\uDCDD All notes:",e.notes.map(e=>({id:e.id,title:e.title}))),alert(`Total notes: ${e.total}
Titles: ${e.notes.map(e=>e.title).join(", ")}`)}catch(e){console.error("❌ Failed to get all notes:",e),alert("Failed to get notes - check console")}},className:"bg-green-500 text-white px-4 py-2 rounded-lg text-sm",children:"\uD83D\uDCCB Show All"})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(n.KSO,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search notes...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:x,onChange:e=>{let t=e.target.value;console.log("\uD83D\uDD0D Search input changed:",{oldValue:x,newValue:t,timestamp:new Date().toISOString()}),f(t)},onKeyDown:e=>{"Enter"===e.key&&(console.log("\uD83D\uDE80 Manual search triggered for:",x),L())}})]}),(0,a.jsxs)("div",{className:"flex rounded-lg border border-gray-300 dark:border-gray-600 overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>C("grid"),className:`px-3 py-2 ${"grid"===k?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:(0,a.jsx)(n.QJV,{})}),(0,a.jsx)("button",{onClick:()=>C("list"),className:`px-3 py-2 ${"list"===k?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:(0,a.jsx)(n.svy,{})})]}),(0,a.jsxs)("button",{onClick:()=>E(!P),className:`px-4 py-2 ${P?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"} rounded-lg ${Z?"ring-2 ring-blue-500":""}`,children:["Filters ",Z&&`(${N.length+ +!!q+ +!!Y})`]})]}),P&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 max-h-24 overflow-y-auto",children:w.map(e=>(0,a.jsx)("button",{onClick:()=>Q(e),className:`px-2 py-1 text-xs rounded-full ${N.includes(e)?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Quick Filters"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:q,onChange:e=>U(e.target.checked),className:"mr-2"}),(0,a.jsx)(n.gt3,{className:"mr-1"}),"Pinned only"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:Y,onChange:e=>F(e.target.checked),className:"mr-2"}),(0,a.jsx)(n.dkL,{className:"mr-1"}),"With media"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Sort by"}),(0,a.jsxs)("select",{value:`${S}-${D}`,onChange:e=>{let[t,r]=e.target.value.split("-");T(t),A(r)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800",children:[(0,a.jsx)("option",{value:"updatedAt-DESC",children:"Last modified"}),(0,a.jsx)("option",{value:"createdAt-DESC",children:"Date created (newest)"}),(0,a.jsx)("option",{value:"createdAt-ASC",children:"Date created (oldest)"}),(0,a.jsx)("option",{value:"title-ASC",children:"Title (A-Z)"}),(0,a.jsx)("option",{value:"title-DESC",children:"Title (Z-A)"}),(0,a.jsx)("option",{value:"wordCount-DESC",children:"Word count (high)"}),(0,a.jsx)("option",{value:"wordCount-ASC",children:"Word count (low)"})]})]}),Z&&(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{onClick:H,className:"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg",children:"Clear All"})})]})})]}),0===t.length?(0,a.jsx)("div",{className:"text-center py-16",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto space-y-4",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(n.OiG,{className:"w-10 h-10 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:Z?"No notes match your filters":"No notes yet"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:Z?"Try adjusting your search criteria or clear the filters.":"Start capturing your thoughts and ideas with your first note."}),(0,a.jsx)("button",{onClick:()=>Z?H():e.push("/notes/new"),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg",children:Z?"Clear Filters":"Create First Note"})]})}):(0,a.jsx)("div",{className:`${"grid"===k?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"}`,children:t.map((t,r)=>(0,a.jsx)("div",{children:"grid"===k?(0,a.jsx)(y,{note:t,onClick:()=>e.push(`/notes/${t.id}`),onDelete:W}):(0,a.jsx)(b,{note:t,onClick:()=>e.push(`/notes/${t.id}`),onDelete:W})},t.id))}),_>20&&(0,a.jsx)("div",{className:"flex justify-center mt-8",children:(0,a.jsx)("div",{className:"flex gap-2",children:Array.from({length:Math.ceil(_/20)},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>O(e),className:`px-3 py-2 rounded ${R===e?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:e},e))})}),(0,a.jsx)(h,{isOpen:G,onClose:()=>I(!1),onTranscriptionComplete:K})]})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69941:(e,t,r)=>{Promise.resolve().then(r.bind(r,25259))},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},90862:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var a=r(43210);function s(e,t){let[r,s]=(0,a.useState)(e);return r}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95072:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});var a=r(64298);class s{static async createNote(e){return(await a.Y0.post("/notes",e)).data}static async getNotes(e={}){let t=new URLSearchParams;Object.entries(e).forEach(([e,r])=>{null!=r&&(Array.isArray(r)?r.forEach(r=>t.append(e,r.toString())):t.append(e,r.toString()))});let r=`/notes?${t.toString()}`;console.log("\uD83D\uDD0D NotesService.getNotes Debug:",{params:e,searchParams:t.toString(),fullUrl:r,timestamp:new Date().toISOString()});let s=await a.Y0.get(r);return console.log("\uD83D\uDCE5 NotesService.getNotes Response:",{status:s.status,dataType:typeof s.data,notesCount:s.data?.notes?.length||0,total:s.data?.total||0,url:r}),s.data}static async getNote(e){return(await a.Y0.get(`/notes/${e}`)).data}static async updateNote(e,t){return(await a.Y0.patch(`/notes/${e}`,t)).data}static async deleteNote(e){await a.Y0.delete(`/notes/${e}`)}static async togglePin(e){return(await a.Y0.patch(`/notes/${e}/toggle-pin`)).data}static async getStats(){return(await a.Y0.get("/notes/stats")).data}static async getTags(){return(await a.Y0.get("/notes/tags")).data}static async getCalendarNotes(e,t){return(await a.Y0.get(`/notes/calendar/${e}/${t}`)).data}static async uploadMedia(e,t){let r=new FormData;return r.append("file",e),t&&r.append("noteId",t),(await a.Y0.post("/notes/media/upload",r,{headers:{"Content-Type":"multipart/form-data"}})).data}static async speechToText(e){let t=new FormData;return t.append("audio",e,"recording.webm"),(await a.Y0.post("/notes/speech-to-text",t,{headers:{"Content-Type":"multipart/form-data"}})).data}static async searchNotes(e,t={}){return this.getNotes({...t,search:e})}static async getRecentNotes(e=10){return(await this.getNotes({sortBy:"updatedAt",sortOrder:"DESC",limit:e})).notes}static async getPinnedNotes(){return(await this.getNotes({pinnedOnly:!0,sortBy:"updatedAt",sortOrder:"DESC"})).notes}static async getNotesWithMedia(e=20){return this.getNotes({hasMedia:!0,sortBy:"updatedAt",sortOrder:"DESC",limit:e})}static async getNotesByTag(e,t=20){return this.getNotes({tags:[e],sortBy:"updatedAt",sortOrder:"DESC",limit:t})}static async getNotesByAccount(e){return this.getNotes({accountId:e,sortBy:"updatedAt",sortOrder:"DESC"})}static async getNotesByTrade(e){return this.getNotes({tradeId:e,sortBy:"createdAt",sortOrder:"ASC"})}static async exportNotes(e,t={}){let r=new URLSearchParams;return Object.entries(t).forEach(([e,t])=>{null!=t&&(Array.isArray(t)?t.forEach(t=>r.append(e,t.toString())):r.append(e,t.toString()))}),r.append("format",e),(await a.Y0.get(`/notes/export?${r.toString()}`,{responseType:"blob"})).data}static async duplicateNote(e){return(await a.Y0.post(`/notes/${e}/duplicate`)).data}static async getTemplates(){return(await a.Y0.get("/notes/templates")).data}static async createFromTemplate(e,t){return(await a.Y0.post(`/notes/templates/${e}/create`,{title:t})).data}static async getNotesForDate(e){return(await a.Y0.get(`/notes/calendar/date/${e}`)).data}static async getCalendarStats(e,t){return(await a.Y0.get(`/notes/calendar/${e}/${t}/stats`)).data}static async getMediaUrl(e){return(await a.Y0.get(`/notes/media/${e}/url`)).data.url}static async deleteMedia(e){await a.Y0.delete(`/notes/media/${e}`)}static async generateEmbedData(e){return(await a.Y0.post("/notes/media/embed",{url:e})).data}static async enhanceText(e,t){return(await a.Y0.post("/notes/ai/enhance-text",{text:e,task:t})).data}static async generateNoteSuggestions(e){return(await a.Y0.post("/notes/ai/generate-suggestions",{content:e})).data}static async exportNote(e,t){return(await a.Y0.get(`/notes/${e}/export/${t}`,{responseType:"blob"})).data}static async bulkDelete(e){await a.Y0.post("/notes/bulk/delete",{noteIds:e})}static async bulkUpdateTags(e,t){await a.Y0.post("/notes/bulk/tags",{noteIds:e,tags:t})}static async bulkUpdateVisibility(e,t){await a.Y0.post("/notes/bulk/visibility",{noteIds:e,visibility:t})}}},97306:(e,t,r)=>{"use strict";r.d(t,{H:()=>i});var a=r(58505),s=r(87981),n=r(23711);function i(e,t){let r,i,m=()=>(0,s.w)(t?.in,NaN),h=t?.additionalDigits??2,y=function(e){let t,r={},a=e.split(o.dateTimeDelimiter);if(a.length>2)return r;if(/:/.test(a[0])?t=a[0]:(r.date=a[0],t=a[1],o.timeZoneDelimiter.test(r.date)&&(r.date=e.split(o.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){let e=o.timezone.exec(t);e?(r.time=t.replace(e[1],""),r.timezone=e[1]):r.time=t}return r}(e);if(y.date){let e=function(e,t){let r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(r);if(!a)return{year:NaN,restDateString:""};let s=a[1]?parseInt(a[1]):null,n=a[2]?parseInt(a[2]):null;return{year:null===n?s:100*n,restDateString:e.slice((a[1]||a[2]).length)}}(y.date,h);r=function(e,t){var r,a,s,n,i,o,c,d;if(null===t)return new Date(NaN);let g=e.match(l);if(!g)return new Date(NaN);let m=!!g[4],h=u(g[1]),y=u(g[2])-1,b=u(g[3]),f=u(g[4]),N=u(g[5])-1;if(m){return(r=0,a=f,s=N,a>=1&&a<=53&&s>=0&&s<=6)?function(e,t,r){let a=new Date(0);a.setUTCFullYear(e,0,4);let s=a.getUTCDay()||7;return a.setUTCDate(a.getUTCDate()+((t-1)*7+r+1-s)),a}(t,f,N):new Date(NaN)}{let e=new Date(0);return(n=t,i=y,o=b,i>=0&&i<=11&&o>=1&&o<=(p[i]||(x(n)?29:28))&&(c=t,(d=h)>=1&&d<=(x(c)?366:365)))?(e.setUTCFullYear(t,y,Math.max(h,b)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(+r))return m();let b=+r,f=0;if(y.time&&isNaN(f=function(e){var t,r,s;let n=e.match(c);if(!n)return NaN;let i=g(n[1]),o=g(n[2]),l=g(n[3]);return(t=i,r=o,s=l,24===t?0===r&&0===s:s>=0&&s<60&&r>=0&&r<60&&t>=0&&t<25)?i*a.s0+o*a.Cg+1e3*l:NaN}(y.time)))return m();if(y.timezone){if(isNaN(i=function(e){var t,r;if("Z"===e)return 0;let s=e.match(d);if(!s)return 0;let n="+"===s[1]?-1:1,i=parseInt(s[2]),o=s[3]&&parseInt(s[3])||0;return(t=0,(r=o)>=0&&r<=59)?n*(i*a.s0+o*a.Cg):NaN}(y.timezone)))return m()}else{let e=new Date(b+f),r=(0,n.a)(0,t?.in);return r.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),r}return(0,n.a)(b+f+i,t?.in)}let o={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e){return e?parseInt(e):1}function g(e){return e&&parseFloat(e.replace(",","."))||0}let p=[31,null,31,30,31,30,31,31,30,31,30,31];function x(e){return e%400==0||e%4==0&&e%100!=0}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[4447,5440,1658,5814,8911,5145,3787,4352,5665,6426,9067],()=>r(29987));module.exports=a})();