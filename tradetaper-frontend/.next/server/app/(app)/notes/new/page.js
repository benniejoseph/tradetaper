(()=>{var e={};e.id=6084,e.ids=[6084],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21693:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=r(65239),s=r(48088),n=r(88170),o=r.n(n),l=r(30893),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let d={children:["",{children:["(app)",{children:["notes",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,27098)),"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/notes/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,70718)),"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/notes/new/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(app)/notes/new/page",pathname:"/notes/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},21820:e=>{"use strict";e.exports=require("os")},27098:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/notes/new/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/benniejoseph/Documents/TradeTaper/tradetaper-frontend/src/app/(app)/notes/new/page.tsx","default")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29054:(e,t,r)=>{Promise.resolve().then(r.bind(r,84740))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65846:(e,t,r)=>{Promise.resolve().then(r.bind(r,27098))},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},84740:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(60687),s=r(43210),n=r(16189),o=r(69587),l=r(19026),i=r(37052),d=r(95072),c=r(37590),u=r(90862);function p(e,t){return{id:`block-${Date.now()}-${Math.random()}`,type:e,content:function(e){switch(e){case"text":case"heading":default:return{text:""};case"quote":return{text:"",author:""};case"list":return{items:[""],ordered:!1};case"code":return{code:"",language:"javascript"};case"image":return{url:"",caption:"",alt:""};case"video":return{url:"",caption:""};case"embed":return{url:"",title:"",description:""};case"callout":return{text:"",type:"info",icon:"info"};case"table":return{headers:["Column 1","Column 2"],rows:[["",""],["",""]]};case"divider":return{}}}(e),position:t}}function g(e){switch(e.type){case"text":case"heading":case"quote":case"callout":return e.content.text||"";case"code":return e.content.code||"";default:return""}}let x=({block:e,onUpdate:t,onKeyDown:r,onAddBlock:n,onDelete:l})=>{let[i,u]=(0,s.useState)(!1),p=(e,r)=>{t({[e]:r})};switch(e.type){case"text":return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("textarea",{id:`block-${e.id}`,value:e.content.text||"",onChange:e=>p("text",e.target.value),onKeyDown:r,placeholder:"Type '/' for commands...",className:"w-full bg-transparent border-none outline-none resize-none min-h-[1.5rem] text-gray-800 dark:text-gray-200 placeholder-gray-400",rows:1,style:{height:"auto"},onInput:e=>{let t=e.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"}}),(0,a.jsx)(m,{onAddBlock:n,onDelete:l})]});case"heading":return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("input",{id:`block-${e.id}`,type:"text",value:e.content.text||"",onChange:e=>p("text",e.target.value),onKeyDown:r,placeholder:"Heading",className:"w-full bg-transparent border-none outline-none text-2xl font-bold text-gray-800 dark:text-gray-200 placeholder-gray-400"}),(0,a.jsx)(m,{onAddBlock:n,onDelete:l})]});case"quote":return(0,a.jsxs)("div",{className:"group relative border-l-4 border-gray-300 dark:border-gray-600 pl-4",children:[(0,a.jsx)("textarea",{id:`block-${e.id}`,value:e.content.text||"",onChange:e=>p("text",e.target.value),onKeyDown:r,placeholder:"Quote...",className:"w-full bg-transparent border-none outline-none resize-none italic text-gray-600 dark:text-gray-400 placeholder-gray-400",rows:1}),(0,a.jsx)("input",{type:"text",value:e.content.author||"",onChange:e=>p("author",e.target.value),placeholder:"Author (optional)",className:"w-full bg-transparent border-none outline-none text-sm text-gray-500 dark:text-gray-500 placeholder-gray-400 mt-1"}),(0,a.jsx)(m,{onAddBlock:n,onDelete:l})]});case"list":return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,a.jsx)("button",{onClick:()=>p("ordered",!e.content?.ordered),className:"text-sm px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded",children:e.content?.ordered?"Numbered":"Bulleted"})}),(0,a.jsx)("div",{className:"space-y-1",children:(e.content?.items||[""]).map((t,r)=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-gray-400 pt-1",children:e.content?.ordered?`${r+1}.`:"â€¢"}),(0,a.jsx)("input",{type:"text",value:t,onChange:t=>{let a=[...e.content?.items||[""]];a[r]=t.target.value,p("items",a)},onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();let t=[...e.content?.items||[""]];t.splice(r+1,0,""),p("items",t)}else if("Backspace"===a.key&&!t&&(e.content?.items?.length||0)>1){a.preventDefault();let t=[...e.content?.items||[""]];t.splice(r,1),p("items",t)}},placeholder:"List item...",className:"flex-1 bg-transparent border-none outline-none text-gray-800 dark:text-gray-200 placeholder-gray-400"})]},r))}),(0,a.jsx)(m,{onAddBlock:n,onDelete:l})]});case"code":return(0,a.jsxs)("div",{className:"group relative bg-gray-100 dark:bg-gray-800 rounded-lg p-4",children:[(0,a.jsxs)("select",{value:e.content.language||"javascript",onChange:e=>p("language",e.target.value),className:"mb-2 text-xs bg-transparent border-none outline-none text-gray-500",children:[(0,a.jsx)("option",{value:"javascript",children:"JavaScript"}),(0,a.jsx)("option",{value:"typescript",children:"TypeScript"}),(0,a.jsx)("option",{value:"python",children:"Python"}),(0,a.jsx)("option",{value:"html",children:"HTML"}),(0,a.jsx)("option",{value:"css",children:"CSS"}),(0,a.jsx)("option",{value:"json",children:"JSON"}),(0,a.jsx)("option",{value:"sql",children:"SQL"}),(0,a.jsx)("option",{value:"bash",children:"Bash"})]}),(0,a.jsx)("textarea",{id:`block-${e.id}`,value:e.content.code||"",onChange:e=>p("code",e.target.value),onKeyDown:r,placeholder:"Enter code...",className:"w-full bg-transparent border-none outline-none resize-none font-mono text-sm text-gray-800 dark:text-gray-200 placeholder-gray-400",rows:3}),(0,a.jsx)(m,{onAddBlock:n,onDelete:l})]});case"image":return(0,a.jsxs)("div",{className:"group relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.dkL,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:async t=>{let r=t.target.files?.[0];if(r){if(r.size>0xa00000)return void c.Ay.error("File size must be less than 10MB");p("uploading",!0),c.Ay.loading("Uploading image...",{id:"upload-"+e.id});try{let t=savedNoteId;if(!t&&(note.title||note.content.some(e=>g(e)))){let e=await d.j.createNote({title:note.title||"Untitled note",content:note.content,tags:note.tags,visibility:note.visibility,accountId:note.accountId,tradeId:note.tradeId});t=e.id,setSavedNoteId(e.id)}if(!t)throw Error("Unable to save note for media upload");let a=await d.j.uploadMedia(r,t);p("url",a.url),p("filename",a.filename),p("uploading",!1),c.Ay.success("Image uploaded successfully",{id:"upload-"+e.id})}catch(t){console.error("Failed to upload image:",t),p("uploading",!1),t?.response?.status===400?c.Ay.error("Please save your note first, then try uploading the image",{id:"upload-"+e.id}):c.Ay.error(t?.response?.data?.message||"Failed to upload image. You can paste image URL instead.",{id:"upload-"+e.id})}}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:`file-upload-${e.id}`,disabled:e.content?.uploading}),(0,a.jsx)("label",{htmlFor:`file-upload-${e.id}`,className:`w-full py-2 px-4 rounded-lg cursor-pointer transition-colors inline-block text-center ${e.content?.uploading?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:e.content?.uploading?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(o.hW,{className:"animate-spin"}),"Uploading..."]}):"Upload Image"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"or"}),(0,a.jsx)("input",{type:"text",value:e.content?.url||"",onChange:e=>p("url",e.target.value),placeholder:"Paste image URL...",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500",disabled:e.content?.uploading}),(0,a.jsx)("input",{type:"text",value:e.content?.caption||"",onChange:e=>p("caption",e.target.value),placeholder:"Caption (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("input",{type:"text",value:e.content?.alt||"",onChange:e=>p("alt",e.target.value),placeholder:"Alt text (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"})]}),e.content?.url&&!e.content?.uploading&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("img",{src:e.content.url,alt:e.content.alt||"Image",className:"max-w-full h-auto rounded-lg",onError:e=>{e.target.style.display="none",c.Ay.error("Failed to load image")}}),e.content.caption&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2 italic",children:e.content.caption})]})]}),(0,a.jsx)(m,{onAddBlock:n,onDelete:l})]});case"video":return(0,a.jsxs)("div",{className:"group relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.HiP,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("input",{type:"text",value:e.content?.url||"",onChange:e=>p("url",e.target.value),placeholder:"Video URL (YouTube, Vimeo, etc.)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("input",{type:"text",value:e.content?.caption||"",onChange:e=>p("caption",e.target.value),placeholder:"Caption (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"})]}),e.content?.url&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"aspect-video bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden",children:(0,a.jsx)("iframe",{src:(e=>{if(e.includes("youtube.com/watch?v=")){let t=e.split("v=")[1]?.split("&")[0];return`https://www.youtube.com/embed/${t}`}if(e.includes("youtu.be/")){let t=e.split("youtu.be/")[1]?.split("?")[0];return`https://www.youtube.com/embed/${t}`}if(e.includes("vimeo.com/")){let t=e.split("vimeo.com/")[1]?.split("?")[0];return`https://player.vimeo.com/video/${t}`}return e})(e.content.url),className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Video embed"})}),e.content.caption&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2 italic",children:e.content.caption})]})]}),(0,a.jsx)(m,{onAddBlock:n,onDelete:l})]});case"embed":return(0,a.jsxs)("div",{className:"group relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.AnD,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("input",{type:"text",value:e.content?.url||"",onChange:e=>p("url",e.target.value),placeholder:"URL to embed",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("input",{type:"text",value:e.content?.title||"",onChange:e=>p("title",e.target.value),placeholder:"Title (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("textarea",{value:e.content?.description||"",onChange:e=>p("description",e.target.value),placeholder:"Description (optional)",className:"w-full bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:2})]}),e.content?.url&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:(0,a.jsxs)("div",{className:"text-left",children:[e.content.title&&(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.content.title}),(0,a.jsx)("p",{className:"text-sm text-blue-500 break-all",children:e.content.url}),e.content.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.content.description})]})})]}),(0,a.jsx)(m,{onAddBlock:n,onDelete:l})]});case"table":return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 dark:border-gray-600",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(e.content?.headers||[]).map((t,r)=>(0,a.jsx)("th",{className:"border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 p-2",children:(0,a.jsx)("input",{type:"text",value:t,onChange:t=>{let a=[...e.content?.headers||[]];a[r]=t.target.value,p("headers",a)},className:"w-full bg-transparent border-none outline-none text-sm font-medium",placeholder:`Header ${r+1}`})},r)),(0,a.jsx)("th",{className:"border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 p-2 w-10",children:(0,a.jsx)("button",{onClick:()=>{let t=[...e.content?.headers||[],""],r=(e.content?.rows||[]).map(e=>[...e,""]);p("headers",t),p("rows",r)},className:"text-blue-500 hover:text-blue-700",children:(0,a.jsx)(o.OiG,{size:12})})})]})}),(0,a.jsxs)("tbody",{children:[(e.content?.rows||[]).map((t,r)=>(0,a.jsxs)("tr",{children:[t.map((t,s)=>(0,a.jsx)("td",{className:"border border-gray-300 dark:border-gray-600 p-2",children:(0,a.jsx)("input",{type:"text",value:t,onChange:t=>{let a=[...e.content?.rows||[]];a[r][s]=t.target.value,p("rows",a)},className:"w-full bg-transparent border-none outline-none text-sm",placeholder:`Cell ${r+1}-${s+1}`})},s)),(0,a.jsx)("td",{className:"border border-gray-300 dark:border-gray-600 p-2 w-10",children:(0,a.jsx)("button",{onClick:()=>{p("rows",(e.content?.rows||[]).filter((e,t)=>t!==r))},className:"text-red-500 hover:text-red-700",children:"\xd7"})})]},r)),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:(e.content?.headers?.length||0)+1,className:"border border-gray-300 dark:border-gray-600 p-2 text-center",children:(0,a.jsxs)("button",{onClick:()=>{let t=Array(e.content?.headers?.length||2).fill("");p("rows",[...e.content?.rows||[],t])},className:"text-blue-500 hover:text-blue-700 text-sm",children:[(0,a.jsx)(o.OiG,{className:"inline mr-1",size:12}),"Add Row"]})})})]})]})}),(0,a.jsx)(m,{onAddBlock:n,onDelete:l})]});case"divider":return(0,a.jsxs)("div",{className:"group relative py-4",children:[(0,a.jsx)("hr",{className:"border-gray-300 dark:border-gray-600"}),(0,a.jsx)(m,{onAddBlock:n,onDelete:l})]});case"callout":let x={info:(0,a.jsx)(o.__w,{className:"text-blue-500"}),warning:(0,a.jsx)(o.BS8,{className:"text-yellow-500"}),success:(0,a.jsx)(o.A7C,{className:"text-green-500"})};return(0,a.jsxs)("div",{className:"group relative bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[x[e.content.type],(0,a.jsxs)("select",{value:e.content.type||"info",onChange:e=>p("type",e.target.value),className:"text-sm bg-transparent border-none outline-none",children:[(0,a.jsx)("option",{value:"info",children:"Info"}),(0,a.jsx)("option",{value:"warning",children:"Warning"}),(0,a.jsx)("option",{value:"success",children:"Success"})]})]}),(0,a.jsx)("textarea",{id:`block-${e.id}`,value:e.content.text||"",onChange:e=>p("text",e.target.value),onKeyDown:r,placeholder:"Callout text...",className:"w-full bg-transparent border-none outline-none resize-none text-gray-800 dark:text-gray-200 placeholder-gray-400",rows:1}),(0,a.jsx)(m,{onAddBlock:n,onDelete:l})]});default:return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsxs)("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-500",children:["Unsupported block type: ",e.type]}),(0,a.jsx)(m,{onAddBlock:n,onDelete:l})]})}},m=({onAddBlock:e,onDelete:t})=>(0,a.jsxs)("div",{className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>e("text"),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Add block",children:(0,a.jsx)(o.OiG,{size:12})}),(0,a.jsx)("button",{onClick:t,className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete block",children:"\xd7"})]}),h=({x:e,y:t,onSelect:r,onClose:n})=>{(0,s.useEffect)(()=>{let e=e=>{e.target.closest(".block-menu")||n()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[n]);let l=[{type:"text",icon:(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCDD"}),label:"Text",description:"Simple text block"},{type:"heading",icon:(0,a.jsx)(o.UEl,{className:"text-gray-600"}),label:"Heading",description:"Section heading"},{type:"quote",icon:(0,a.jsx)(o.JwJ,{className:"text-gray-600"}),label:"Quote",description:"Quote with attribution"},{type:"list",icon:(0,a.jsx)(o.v5n,{className:"text-gray-600"}),label:"List",description:"Bulleted or numbered list"},{type:"code",icon:(0,a.jsx)(o.FSj,{className:"text-gray-600"}),label:"Code",description:"Code block with syntax highlighting"},{type:"image",icon:(0,a.jsx)(o.dkL,{className:"text-blue-500"}),label:"Image",description:"Upload or embed an image"},{type:"video",icon:(0,a.jsx)(o.HiP,{className:"text-purple-500"}),label:"Video",description:"Embed a video"},{type:"embed",icon:(0,a.jsx)(o.AnD,{className:"text-green-500"}),label:"Embed",description:"Embed external content"},{type:"table",icon:(0,a.jsx)(o.ist,{className:"text-orange-500"}),label:"Table",description:"Structured data table"},{type:"divider",icon:(0,a.jsx)(o.iu5,{className:"text-gray-400"}),label:"Divider",description:"Visual separator"},{type:"callout",icon:(0,a.jsx)(o.__w,{className:"text-blue-500"}),label:"Callout",description:"Important information box"}],i=(0,s.useRef)(null),[d,c]=(0,s.useState)({x:e,y:t});return(0,s.useEffect)(()=>{if(i.current){let r=i.current.getBoundingClientRect(),a=window.innerWidth,s=window.innerHeight,n=e,o=t;e+r.width>a-20&&(n=a-r.width-20),t+r.height>s-20&&(o=t-r.height-10),c({x:n,y:o})}},[e,t]),(0,a.jsx)("div",{ref:i,className:"block-menu fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg min-w-[250px] max-w-[280px]",style:{left:d.x,top:d.y},children:(0,a.jsx)("div",{className:"p-2 max-h-[400px] overflow-y-auto",children:l.map(e=>(0,a.jsxs)("button",{onClick:()=>r(e.type),className:"w-full flex items-center gap-3 p-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.label}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:e.description})]})]},e.type))})})},b=()=>{let e=(0,n.useRouter)(),[t,r]=(0,s.useState)({title:"",content:[p("text",0)],tags:[],visibility:"private"}),[m,b]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),[f,j]=(0,s.useState)(null),[N,w]=(0,s.useState)(""),[k,C]=(0,s.useState)(!1),[D,A]=(0,s.useState)(null);(0,s.useRef)();let S=(0,u.d)(t,2e3),T=(0,s.useCallback)(async(r=!1)=>{if(t.title||t.content.some(e=>g(e)))try{let a;b(!0);let s={title:t.title,content:t.content,tags:t.tags,visibility:t.visibility,accountId:t.accountId,tradeId:t.tradeId};D?a=await d.j.updateNote(D,s):(a=await d.j.createNote(s),A(a.id)),r||(c.Ay.success("Note saved successfully!"),e.push(`/notes/${a.id}`))}catch(e){console.error("Error saving note:",e),r||c.Ay.error("Failed to save note. Please try again.")}finally{b(!1)}},[t.title,t.content,t.tags,t.visibility,t.accountId,t.tradeId,e,D]);(0,s.useEffect)(()=>{(S.title||S.content.some(e=>g(e)))&&T(!0)},[S,T]);let B=(e,t)=>{r(r=>({...r,content:r.content.map(r=>r.id===e?{...r,content:{...r.content,...t}}:r)}))},$=(e,a)=>{let s=a?t.content.findIndex(e=>e.id===a):t.content.length-1,n=p(e,s+1);r(e=>({...e,content:[...e.content.slice(0,s+1),n,...e.content.slice(s+1).map(e=>({...e,position:e.position+1}))]})),j(null),setTimeout(()=>{let e=document.getElementById(`block-${n.id}`);e&&e.focus()},100)},P=e=>{1!==t.content.length&&r(t=>({...t,content:t.content.filter(t=>t.id!==e)}))},E=(e,r)=>{if("Enter"!==e.key||e.shiftKey){if("Backspace"===e.key){let a=t.content.find(e=>e.id===r);a&&!g(a)&&t.content.length>1&&(e.preventDefault(),P(r))}else if("/"===e.key&&e.target instanceof HTMLElement&&""===(e.target.textContent||"")){e.preventDefault();let t=e.target.getBoundingClientRect();j({blockId:r,x:t.left,y:t.bottom+window.scrollY})}}else e.preventDefault(),$("text",r)},q=()=>{N.trim()&&!t.tags.includes(N.trim())&&(r(e=>({...e,tags:[...e.tags,N.trim()]})),w(""))},Y=e=>{r(t=>({...t,tags:t.tags.filter(t=>t!==e)}))};return(0,a.jsx)("div",{className:"min-h-screen pb-20",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i.Qf,{onClick:()=>e.back(),variant:"ghost",icon:(0,a.jsx)(o.QVr,{}),iconPosition:"left",children:"Back"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("button",{onClick:()=>r(e=>({...e,visibility:"private"===e.visibility?"shared":"private"})),className:"flex items-center gap-2 px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600",children:["private"===t.visibility?(0,a.jsx)(o.mx3,{}):(0,a.jsx)(o.Ny1,{}),(0,a.jsx)("span",{className:"text-sm capitalize",children:t.visibility})]})}),(0,a.jsx)(i.Qf,{onClick:()=>T(!1),variant:"gradient",className:"bg-gradient-to-r from-blue-500 to-purple-500",icon:m?(0,a.jsx)(o.hW,{className:"animate-spin"}):(0,a.jsx)(o.dIn,{}),iconPosition:"left",disabled:m,children:m?"Saving...":"Save Note"})]})]}),(0,a.jsxs)(l.Ue,{variant:"glass",className:"p-8",children:[(0,a.jsx)("input",{type:"text",placeholder:"Untitled note",value:t.title,onChange:e=>r(t=>({...t,title:e.target.value})),className:"w-full text-4xl font-bold bg-transparent border-none outline-none placeholder-gray-400 dark:placeholder-gray-600 mb-8"}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[t.tags.map(e=>(0,a.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[e,(0,a.jsx)("button",{onClick:()=>Y(e),className:"text-blue-500 hover:text-blue-700",children:"\xd7"})]},e)),k?(0,a.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),q()):"Escape"===e.key&&(C(!1),w(""))},onBlur:()=>{N.trim()&&q(),C(!1)},placeholder:"Add tag...",className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-full text-sm outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):(0,a.jsxs)("button",{onClick:()=>C(!0),className:"flex items-center gap-1 px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-full text-sm text-gray-600 dark:text-gray-400 hover:text-blue-500",children:[(0,a.jsx)(o.BuZ,{}),"Add tag"]})]})}),(0,a.jsx)("div",{className:"space-y-4 min-h-[200px]",children:t.content.map((e,t)=>(0,a.jsx)(x,{block:e,onUpdate:t=>B(e.id,t),onKeyDown:t=>E(t,e.id),onAddBlock:t=>$(t,e.id),onDelete:()=>P(e.id)},e.id))}),(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,a.jsxs)("button",{onClick:()=>$("text"),className:"flex items-center gap-2 px-6 py-3 text-gray-600 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors border-2 border-dashed border-gray-300 dark:border-gray-600 hover:border-blue-300",children:[(0,a.jsx)(o.OiG,{}),(0,a.jsx)("span",{className:"font-medium",children:"Add a block"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>$("image"),className:"flex items-center gap-1 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-colors",title:"Add Image",children:[(0,a.jsx)(o.dkL,{}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Image"})]}),(0,a.jsxs)("button",{onClick:()=>$("video"),className:"flex items-center gap-1 px-3 py-2 text-sm text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-md transition-colors",title:"Add Video",children:[(0,a.jsx)(o.HiP,{}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Video"})]}),(0,a.jsxs)("button",{onClick:()=>$("table"),className:"flex items-center gap-1 px-3 py-2 text-sm text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-md transition-colors",title:"Add Table",children:[(0,a.jsx)(o.ist,{}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Table"})]}),(0,a.jsxs)("button",{onClick:()=>$("list"),className:"flex items-center gap-1 px-3 py-2 text-sm text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-md transition-colors",title:"Add List",children:[(0,a.jsx)(o.v5n,{}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"List"})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 text-center text-xs text-gray-500",children:["Current blocks: ",t.content.length," | Block types: ",t.content.map(e=>e.type).join(", ")]})]})]}),f&&(0,a.jsx)(h,{x:f.x,y:f.y,onSelect:e=>$(e,f.blockId),onClose:()=>j(null)})]})})}},90862:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var a=r(43210);function s(e,t){let[r,s]=(0,a.useState)(e);return r}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95072:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});var a=r(64298);class s{static async createNote(e){return(await a.Y0.post("/notes",e)).data}static async getNotes(e={}){let t=new URLSearchParams;Object.entries(e).forEach(([e,r])=>{null!=r&&(Array.isArray(r)?r.forEach(r=>t.append(e,r.toString())):t.append(e,r.toString()))});let r=`/notes?${t.toString()}`;console.log("\uD83D\uDD0D NotesService.getNotes Debug:",{params:e,searchParams:t.toString(),fullUrl:r,timestamp:new Date().toISOString()});let s=await a.Y0.get(r);return console.log("\uD83D\uDCE5 NotesService.getNotes Response:",{status:s.status,dataType:typeof s.data,notesCount:s.data?.notes?.length||0,total:s.data?.total||0,url:r}),s.data}static async getNote(e){return(await a.Y0.get(`/notes/${e}`)).data}static async updateNote(e,t){return(await a.Y0.patch(`/notes/${e}`,t)).data}static async deleteNote(e){await a.Y0.delete(`/notes/${e}`)}static async togglePin(e){return(await a.Y0.patch(`/notes/${e}/toggle-pin`)).data}static async getStats(){return(await a.Y0.get("/notes/stats")).data}static async getTags(){return(await a.Y0.get("/notes/tags")).data}static async getCalendarNotes(e,t){return(await a.Y0.get(`/notes/calendar/${e}/${t}`)).data}static async uploadMedia(e,t){let r=new FormData;return r.append("file",e),t&&r.append("noteId",t),(await a.Y0.post("/notes/media/upload",r,{headers:{"Content-Type":"multipart/form-data"}})).data}static async speechToText(e){let t=new FormData;return t.append("audio",e,"recording.webm"),(await a.Y0.post("/notes/speech-to-text",t,{headers:{"Content-Type":"multipart/form-data"}})).data}static async searchNotes(e,t={}){return this.getNotes({...t,search:e})}static async getRecentNotes(e=10){return(await this.getNotes({sortBy:"updatedAt",sortOrder:"DESC",limit:e})).notes}static async getPinnedNotes(){return(await this.getNotes({pinnedOnly:!0,sortBy:"updatedAt",sortOrder:"DESC"})).notes}static async getNotesWithMedia(e=20){return this.getNotes({hasMedia:!0,sortBy:"updatedAt",sortOrder:"DESC",limit:e})}static async getNotesByTag(e,t=20){return this.getNotes({tags:[e],sortBy:"updatedAt",sortOrder:"DESC",limit:t})}static async getNotesByAccount(e){return this.getNotes({accountId:e,sortBy:"updatedAt",sortOrder:"DESC"})}static async getNotesByTrade(e){return this.getNotes({tradeId:e,sortBy:"createdAt",sortOrder:"ASC"})}static async exportNotes(e,t={}){let r=new URLSearchParams;return Object.entries(t).forEach(([e,t])=>{null!=t&&(Array.isArray(t)?t.forEach(t=>r.append(e,t.toString())):r.append(e,t.toString()))}),r.append("format",e),(await a.Y0.get(`/notes/export?${r.toString()}`,{responseType:"blob"})).data}static async duplicateNote(e){return(await a.Y0.post(`/notes/${e}/duplicate`)).data}static async getTemplates(){return(await a.Y0.get("/notes/templates")).data}static async createFromTemplate(e,t){return(await a.Y0.post(`/notes/templates/${e}/create`,{title:t})).data}static async getNotesForDate(e){return(await a.Y0.get(`/notes/calendar/date/${e}`)).data}static async getCalendarStats(e,t){return(await a.Y0.get(`/notes/calendar/${e}/${t}/stats`)).data}static async getMediaUrl(e){return(await a.Y0.get(`/notes/media/${e}/url`)).data.url}static async deleteMedia(e){await a.Y0.delete(`/notes/media/${e}`)}static async generateEmbedData(e){return(await a.Y0.post("/notes/media/embed",{url:e})).data}static async enhanceText(e,t){return(await a.Y0.post("/notes/ai/enhance-text",{text:e,task:t})).data}static async generateNoteSuggestions(e){return(await a.Y0.post("/notes/ai/generate-suggestions",{content:e})).data}static async exportNote(e,t){return(await a.Y0.get(`/notes/${e}/export/${t}`,{responseType:"blob"})).data}static async bulkDelete(e){await a.Y0.post("/notes/bulk/delete",{noteIds:e})}static async bulkUpdateTags(e,t){await a.Y0.post("/notes/bulk/tags",{noteIds:e,tags:t})}static async bulkUpdateVisibility(e,t){await a.Y0.post("/notes/bulk/visibility",{noteIds:e,visibility:t})}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[4447,5440,1658,5814,8911,5145,4352,5665,6426,9067],()=>r(21693));module.exports=a})();