"use strict";exports.id=6461,exports.ids=[6461],exports.modules={2321:(e,r,a)=>{a.d(r,{PW:()=>t,d1:()=>l,w_:()=>s});var t=function(e){return e.STOCK="Stock",e.CRYPTO="Crypto",e.FOREX="Forex",e.COMMODITIES="Commodities",e.FUTURES="Futures",e.OPTIONS="Options",e}({}),s=function(e){return e.LONG="Long",e.SHORT="Short",e}({}),l=function(e){return e.OPEN="Open",e.CLOSED="Closed",e.PENDING="Pending",e.CANCELLED="Cancelled",e}({})},19694:(e,r,a)=>{a.d(r,{P:()=>l});let t="https://tradetaper-backend-481634875325.us-central1.run.app/api/v1";class s{async getAuthHeaders(){let e=localStorage.getItem("token");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}}async getStrategies(){let e=await fetch(`${t}/strategies`,{headers:await this.getAuthHeaders()});if(!e.ok)throw Error("Failed to fetch strategies");return e.json()}async getStrategiesWithStats(){let e=await fetch(`${t}/strategies/with-stats`,{headers:await this.getAuthHeaders()});if(!e.ok)throw Error("Failed to fetch strategies with stats");return e.json()}async getStrategy(e){let r=await fetch(`${t}/strategies/${e}`,{headers:await this.getAuthHeaders()});if(!r.ok)throw Error("Failed to fetch strategy");return r.json()}async getStrategyStats(e){let r=await fetch(`${t}/strategies/${e}/stats`,{headers:await this.getAuthHeaders()});if(!r.ok)throw Error("Failed to fetch strategy stats");return r.json()}async createStrategy(e){let r=await fetch(`${t}/strategies`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(e)});if(!r.ok)throw Error("Failed to create strategy");return r.json()}async updateStrategy(e,r){let a=await fetch(`${t}/strategies/${e}`,{method:"PATCH",headers:await this.getAuthHeaders(),body:JSON.stringify(r)});if(!a.ok)throw Error("Failed to update strategy");return a.json()}async toggleStrategyActive(e){let r=await fetch(`${t}/strategies/${e}/toggle-active`,{method:"PATCH",headers:await this.getAuthHeaders()});if(!r.ok)throw Error("Failed to toggle strategy active status");return r.json()}async deleteStrategy(e){if(!(await fetch(`${t}/strategies/${e}`,{method:"DELETE",headers:await this.getAuthHeaders()})).ok)throw Error("Failed to delete strategy")}}let l=new s},56461:(e,r,a)=>{a.d(r,{A:()=>b});var t=a(60687),s=a(43210),l=a(2321);a(19694);var i=function(e){return e.LONDON="London",e.NEW_YORK="New York",e.ASIA="Asia",e.LONDON_NY_OVERLAP="London-NY Overlap",e.OTHER="Other",e}({}),o=a(16189),d=a(54864),n=a(30088),c=a(20851),m=a(29255);let u=e=>{let r=[];if(e.symbol&&""!==e.symbol.trim()||r.push({field:"symbol",message:"Symbol is required"}),e.entryDate||r.push({field:"entryDate",message:"Entry date is required"}),(!e.entryPrice||e.entryPrice<=0)&&r.push({field:"entryPrice",message:"Entry price must be greater than 0"}),(!e.quantity||e.quantity<=0)&&r.push({field:"quantity",message:"Quantity must be greater than 0"}),e.exitDate&&e.entryDate){let a=new Date(e.entryDate);new Date(e.exitDate)<a&&r.push({field:"exitDate",message:"Exit date cannot be before entry date"})}return e.exitPrice&&e.entryPrice&&(e.direction===l.w_.LONG&&e.exitPrice<0&&r.push({field:"exitPrice",message:"Exit price must be positive"}),e.direction===l.w_.SHORT&&e.exitPrice<0&&r.push({field:"exitPrice",message:"Exit price must be positive"})),e.stopLoss&&e.entryPrice&&(e.direction===l.w_.LONG&&e.stopLoss>=e.entryPrice&&r.push({field:"stopLoss",message:"Stop loss should be below entry price for long positions"}),e.direction===l.w_.SHORT&&e.stopLoss<=e.entryPrice&&r.push({field:"stopLoss",message:"Stop loss should be above entry price for short positions"})),e.takeProfit&&e.entryPrice&&(e.direction===l.w_.LONG&&e.takeProfit<=e.entryPrice&&r.push({field:"takeProfit",message:"Take profit should be above entry price for long positions"}),e.direction===l.w_.SHORT&&e.takeProfit>=e.entryPrice&&r.push({field:"takeProfit",message:"Take profit should be below entry price for short positions"})),e.commission&&e.commission<0&&r.push({field:"commission",message:"Commission cannot be negative"}),{isValid:0===r.length,errors:r}},h=(e,r)=>{let a=e.find(e=>e.field===r);return a?.message};var x=a(84243),g=a(69587);let p=(e,r,a)=>r&&Object.values(e).includes(r)?r:a,y=e=>{if(!e)return"";try{let r=new Date(e),a=6e4*r.getTimezoneOffset();return new Date(r.getTime()-a).toISOString().slice(0,16)}catch(e){return""}};function b({initialData:e,isEditMode:r=!1,onFormSubmitSuccess:a,onCancel:b}){let v=(0,d.wA)(),j=(0,o.useRouter)(),{isLoading:f,error:k}=(0,d.d4)(e=>e.trades),N=(0,d.d4)(c.i7),w=(0,d.d4)(c.G6),{theme:S}=(0,m.D)(),[P,C]=(0,s.useState)([]),D="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",F="block w-full rounded-xl shadow-sm p-3 transition-all duration-200 border backdrop-blur-sm",L="bg-white/60 dark:bg-gray-800/40 border-gray-200/50 dark:border-gray-700/50 text-gray-900 dark:text-white",E="dark"===S?"#374151":"#e5e7eb",O="dark"===S?"rgba(31, 41, 55, 0.4)":"rgba(255, 255, 255, 0.6)",T="dark"===S?"#ffffff":"#111827",A="dark"===S?"rgba(209, 213, 219, 0.6)":"rgba(107, 114, 128, 0.7)",$="focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none hover:bg-white/80 dark:hover:bg-gray-800/60",I="placeholder:text-gray-500 dark:placeholder:text-gray-400",R=`${F} ${L} ${$} ${I}`,M=`${F} ${L} ${$} appearance-none`,q=`${F} ${L} ${$} ${I} min-h-[120px] resize-y`,U="bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl p-8 rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg hover:shadow-xl transition-all duration-200",H="text-2xl font-bold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200/30 dark:border-gray-700/30 flex items-center space-x-3",[G,_]=(0,s.useState)([]),[z,V]=(0,s.useState)({accountId:e?.accountId||N||void 0,assetType:e?.assetType||l.PW.STOCK,symbol:e?.symbol||"",direction:e?.direction||l.w_.LONG,status:e?.status||l.d1.OPEN,entryDate:y(e?.entryDate),entryPrice:e?.entryPrice||0,stopLoss:e?.stopLoss??void 0,takeProfit:e?.takeProfit??void 0,exitDate:y(e?.exitDate),exitPrice:e?.exitPrice??void 0,quantity:e?.quantity||0,commission:e?.commission||0,notes:e?.notes||"",session:p(i,e?.session,i.NEW_YORK),setupDetails:e?.setupDetails||"",mistakesMade:e?.mistakesMade||"",lessonsLearned:e?.lessonsLearned||"",imageUrl:e?.imageUrl||"",rMultiple:e?.rMultiple??void 0,isStarred:e?.isStarred||!1,strategyId:e?.strategyId||void 0}),[W,B]=(0,s.useState)(null),[Y,J]=(0,s.useState)(null),[K,Q]=(0,s.useState)(e?.imageUrl||null),[X,Z]=(0,s.useState)(!1),[ee,er]=(0,s.useState)(null),[ea,et]=(0,s.useState)([]),es=e=>{let{name:r,value:a,type:t}=e.target;if("isStarred"===r&&"checkbox"===t){let r=e.target.checked;V(e=>({...e,isStarred:r}))}else{let e=a;"number"===t&&(e=""===a?void 0:parseFloat(a)),V(a=>({...a,[r]:e}))}},el=async t=>{t.preventDefault(),er(null),setUploadError(null),C([]);let s=u({...z,assetType:z.assetType,symbol:z.symbol,direction:z.direction,entryDate:z.entryDate,entryPrice:z.entryPrice,quantity:z.quantity,tagNames:G.map(e=>e.value),isStarred:z.isStarred});if(!s.isValid){C(s.errors),er("Please fix the validation errors below.");return}let l=G.map(e=>e.value),i={...z,session:z.session,tagNames:l,imageUrl:finalImageUrl,assetType:z.assetType,symbol:z.symbol,direction:z.direction,entryDate:z.entryDate,entryPrice:z.entryPrice,quantity:z.quantity,isStarred:z.isStarred};delete i.rMultiple;try{let t;r&&e?.id?(t=await v((0,n.Gz)({id:e.id,payload:i})),n.Gz.fulfilled.match(t)&&(a?a(t.payload.id):j.push("/journal"))):(t=await v((0,n.$L)(i)),n.$L.fulfilled.match(t)&&(a?a(t.payload.id):j.push("/journal"))),"rejected"===t.meta.requestStatus&&er(t.payload||"Submission failed")}catch(e){er(e.message||"An unexpected error occurred.")}},ei=e=>{let r=h(P,e);return r?(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:r}):null},eo="flex items-center justify-center space-x-2 px-6 py-3 font-semibold rounded-xl transition-all duration-200 shadow-lg focus:outline-none focus:ring-2 focus:ring-opacity-70",ed="bg-white/90 dark:bg-gray-800/90 text-gray-900 dark:text-white";return(0,t.jsxs)("div",{className:"w-full space-y-8",children:[ee&&(0,t.jsx)("div",{className:"p-4 bg-red-50/90 dark:bg-red-900/20 border border-red-200/50 dark:border-red-800/50 text-red-700 dark:text-red-400 rounded-xl text-sm backdrop-blur-sm",children:ee}),k&&(0,t.jsxs)("div",{className:"p-4 bg-red-50/90 dark:bg-red-900/20 border border-red-200/50 dark:border-red-800/50 text-red-700 dark:text-red-400 rounded-xl text-sm backdrop-blur-sm",children:["Submission Error: ",k]}),uploadError&&(0,t.jsxs)("div",{className:"p-4 bg-red-50/90 dark:bg-red-900/20 border border-red-200/50 dark:border-red-800/50 text-red-700 dark:text-red-400 rounded-xl text-sm backdrop-blur-sm",children:["Upload Error: ",uploadError]}),(0,t.jsxs)("form",{onSubmit:el,className:"space-y-8",children:[(0,t.jsxs)("div",{className:U,children:[(0,t.jsxs)("h2",{className:H,children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500/20 to-green-500/20 rounded-xl",children:(0,t.jsx)(g.Ani,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,t.jsx)("span",{children:"Core Trade Information"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{htmlFor:"accountId",className:D,children:["Account ",(0,t.jsx)("span",{className:"text-accent-red",children:"*"})]}),w.length>0?(0,t.jsxs)("select",{id:"accountId",name:"accountId",value:z.accountId||"",onChange:es,required:!0,className:M,children:[(0,t.jsx)("option",{value:"",disabled:!0,className:ed,children:"Select an account"}),w.map(e=>(0,t.jsxs)("option",{value:e.id,className:ed,children:[e.name," (Balance: ",e.currency," ",Number(e.balance).toFixed(2),")"]},e.id))]}):(0,t.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl p-4",children:[(0,t.jsxs)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 mb-2",children:[(0,t.jsx)("strong",{children:"No accounts available."})," You need to create a trading account first."]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Go to ",(0,t.jsx)("strong",{children:"Settings â†’ Manage Accounts"})," to add your first trading account."]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"assetType",className:D,children:["Asset Type ",(0,t.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,t.jsx)("select",{id:"assetType",name:"assetType",value:z.assetType,onChange:es,required:!0,className:M,children:Object.values(l.PW).map(e=>(0,t.jsx)("option",{value:e,className:ed,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"symbol",className:D,children:["Symbol / Pair ",(0,t.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"symbol",name:"symbol",value:z.symbol,onChange:es,required:!0,placeholder:"e.g., AAPL, EURUSD, BTCUSDT",className:R}),ei("symbol")]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"direction",className:D,children:["Direction ",(0,t.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,t.jsx)("select",{id:"direction",name:"direction",value:z.direction,onChange:es,required:!0,className:M,children:Object.values(l.w_).map(e=>(0,t.jsx)("option",{value:e,className:ed,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"status",className:D,children:["Status ",(0,t.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,t.jsx)("select",{id:"status",name:"status",value:z.status,onChange:es,required:!0,className:M,children:Object.values(l.d1).map(e=>(0,t.jsx)("option",{value:e,className:ed,children:e},e))})]}),(0,t.jsxs)("div",{className:"md:col-span-2 flex items-center space-x-2 mt-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isStarred",name:"isStarred",checked:!!z.isStarred,onChange:es,className:"h-4 w-4 rounded border-gray-300 text-accent-yellow focus:ring-accent-yellow dark:bg-dark-tertiary dark:border-gray-600"}),(0,t.jsx)("label",{htmlFor:"isStarred",className:D+" mb-0",children:"Mark as Starred"})]})]})]}),(0,t.jsxs)("div",{className:U,children:[(0,t.jsxs)("h2",{className:H,children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-xl",children:(0,t.jsx)(g.Cer,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,t.jsx)("span",{children:"Entry & Exit Details"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"entryDate",className:D,children:["Entry Date & Time ",(0,t.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,t.jsx)("input",{type:"datetime-local",id:"entryDate",name:"entryDate",value:z.entryDate,onChange:es,required:!0,className:R}),ei("entryDate")]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"entryPrice",className:D,children:["Entry Price ",(0,t.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,t.jsx)("input",{type:"number",id:"entryPrice",name:"entryPrice",value:z.entryPrice||"",onChange:es,required:!0,placeholder:"0.00",step:"any",className:R}),ei("entryPrice")]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"exitDate",className:D,children:"Exit Date & Time"}),(0,t.jsx)("input",{type:"datetime-local",id:"exitDate",name:"exitDate",value:z.exitDate||"",onChange:es,className:R}),ei("exitDate")]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"exitPrice",className:D,children:"Exit Price"}),(0,t.jsx)("input",{type:"number",id:"exitPrice",name:"exitPrice",value:z.exitPrice||"",onChange:es,placeholder:"0.00",step:"any",className:R}),ei("exitPrice")]})]})]}),(0,t.jsxs)("div",{className:U,children:[(0,t.jsxs)("h2",{className:H,children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-red-500/20 to-orange-500/20 rounded-xl",children:(0,t.jsx)(g.Ani,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),(0,t.jsx)("span",{children:"Risk, Reward & Quantity"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"stopLoss",className:D,children:"Stop Loss"}),(0,t.jsx)("input",{type:"number",id:"stopLoss",name:"stopLoss",value:z.stopLoss||"",onChange:es,placeholder:"0.00",step:"any",className:R}),ei("stopLoss")]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"takeProfit",className:D,children:"Take Profit"}),(0,t.jsx)("input",{type:"number",id:"takeProfit",name:"takeProfit",value:z.takeProfit||"",onChange:es,placeholder:"0.00",step:"any",className:R}),ei("takeProfit")]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"quantity",className:D,children:["Quantity / Size ",(0,t.jsx)("span",{className:"text-accent-red",children:"*"})]}),(0,t.jsx)("input",{type:"number",id:"quantity",name:"quantity",value:z.quantity||"",onChange:es,required:!0,placeholder:"e.g., 100, 0.01",step:"any",className:R}),ei("quantity")]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"commission",className:D,children:"Commission"}),(0,t.jsx)("input",{type:"number",id:"commission",name:"commission",value:z.commission||"",onChange:es,placeholder:"0.00",step:"any",className:R}),ei("commission")]}),void 0!==z.rMultiple&&(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsxs)("p",{className:`text-sm font-medium ${void 0===z.rMultiple||null===z.rMultiple?"text-gray-600 dark:text-gray-400":z.rMultiple>=2?"text-green-600 dark:text-green-400":z.rMultiple>=1?"text-yellow-600 dark:text-yellow-400":z.rMultiple>0?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400"}`,children:["Calculated R:R: ",z.rMultiple.toFixed(2),"R"]})})]})]}),(0,t.jsxs)("div",{className:U,children:[(0,t.jsxs)("h2",{className:H,children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-500/20 to-indigo-500/20 rounded-xl",children:(0,t.jsx)(g.Ani,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,t.jsx)("span",{children:"Strategy & Analysis"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"strategyId",className:D,children:"Trading Strategy"}),(0,t.jsxs)("select",{id:"strategyId",name:"strategyId",value:z.strategyId||"",onChange:es,className:M,children:[(0,t.jsx)("option",{value:"",className:ed,children:"No strategy selected"}),ea.filter(e=>e.isActive).map(e=>(0,t.jsx)("option",{value:e.id,className:ed,children:e.name},e.id))]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Link this trade to a specific trading strategy for performance tracking"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"session",className:D,children:"Trading Session"}),(0,t.jsx)("select",{id:"session",name:"session",value:z.session,onChange:es,className:M,children:Object.values(i).map(e=>(0,t.jsx)("option",{value:e,className:ed,children:e},e))}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Market session when this trade was executed"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"tags",className:D,children:"Tags"}),(0,t.jsx)(x.A,{isMulti:!0,name:"tags",options:[],value:G,onChange:e=>{_(e)},placeholder:"Type to add tags (e.g., Scalp, Breakout, Reversal)",classNamePrefix:"react-select",styles:{control:(e,r)=>({...e,backgroundColor:O,borderColor:r.isFocused?"var(--color-accent-green)":E,boxShadow:r.isFocused?"0 0 0 2px var(--color-accent-green-transparent)":"none",borderRadius:"0.5rem",minHeight:"42px",transition:"border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out","&:hover":{borderColor:r.isFocused?"var(--color-accent-green)":E}}),valueContainer:e=>({...e,padding:"2px 8px"}),input:e=>({...e,color:T,margin:"0px",padding:"0px"}),placeholder:e=>({...e,color:A}),singleValue:e=>({...e,color:T}),multiValue:e=>({...e,backgroundColor:"dark"===S?"var(--color-dark-tertiary)":"var(--color-light-tertiary)",borderRadius:"0.25rem"}),multiValueLabel:e=>({...e,color:T,fontSize:"0.875rem"}),multiValueRemove:e=>({...e,color:"dark"===S?"var(--text-text-light-secondary)":"var(--color-text-dark-secondary)","&:hover":{backgroundColor:"dark"===S?"var(--color-accent-red-darker)":"var(--color-accent-red)",color:"white"}}),menu:e=>({...e,backgroundColor:O,borderColor:E,borderWidth:"1px",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06)",zIndex:9999}),menuPortal:e=>({...e,zIndex:9999}),option:(e,r)=>({...e,backgroundColor:r.isSelected?"var(--color-accent-blue)":r.isFocused?"dark"===S?"var(--color-dark-hover)":"var(--color-light-hover)":"transparent",color:r.isSelected?"white":T,fontSize:"0.875rem","&:active":{backgroundColor:"var(--color-accent-blue-darker)"}}),indicatorSeparator:()=>({display:"none"}),dropdownIndicator:e=>({...e,color:"dark"===S?"var(--text-text-light-secondary)":"var(--color-text-dark-secondary)","&:hover":{color:"dark"===S?"white":"black"}}),clearIndicator:e=>({...e,color:"dark"===S?"var(--text-text-light-secondary)":"var(--color-text-dark-secondary)","&:hover":{color:"dark"===S?"white":"black"}})},theme:e=>({...e,borderRadius:5,colors:{...e.colors,primary:"var(--color-accent-blue)",primary75:"var(--color-accent-blue-lighter)",primary50:"var(--color-accent-blue-lightest)",primary25:"var(--color-light-hover)",danger:"var(--color-accent-red)",dangerLight:"var(--color-accent-red-lighter)",neutral0:O,neutral5:"dark"===S?"var(--color-dark-tertiary)":"var(--color-light-tertiary)",neutral10:"dark"===S?"var(--color-dark-border)":"var(--color-light-border)",neutral20:E,neutral30:E,neutral40:"dark"===S?"var(--text-text-light-secondary)":"var(--color-text-dark-secondary)",neutral50:A,neutral60:"dark"===S?"var(--text-text-light-primary)":"var(--color-text-dark-primary)",neutral80:T,neutral90:T}})}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Add custom tags to categorize and filter your trades"})]})]})]}),(0,t.jsxs)("div",{className:U,children:[(0,t.jsxs)("h2",{className:H,children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-yellow-500/20 to-amber-500/20 rounded-xl",children:(0,t.jsx)(g.dIn,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),(0,t.jsx)("span",{children:"Reflection & Journaling"})]}),(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"setupDetails",className:D,children:"Setup Details"}),(0,t.jsx)("textarea",{id:"setupDetails",name:"setupDetails",value:z.setupDetails||"",onChange:es,placeholder:"Describe your trade setup, confluence factors, etc.",className:q})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"mistakesMade",className:D,children:"Mistakes Made"}),(0,t.jsx)("textarea",{id:"mistakesMade",name:"mistakesMade",value:z.mistakesMade||"",onChange:es,placeholder:"Any deviations from your plan or execution errors?",className:q})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"lessonsLearned",className:D,children:"Lessons Learned"}),(0,t.jsx)("textarea",{id:"lessonsLearned",name:"lessonsLearned",value:z.lessonsLearned||"",onChange:es,placeholder:"What can you take away from this trade?",className:q})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"notes",className:D,children:"General Notes"}),(0,t.jsx)("textarea",{id:"notes",name:"notes",value:z.notes||"",onChange:es,placeholder:"Any other observations or comments...",className:q})]})]})]}),(0,t.jsxs)("div",{className:U,children:[(0,t.jsxs)("h2",{className:H,children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-indigo-500/20 to-cyan-500/20 rounded-xl",children:(0,t.jsx)(g.HVe,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),(0,t.jsx)("span",{children:"Chart Snapshot"})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,t.jsxs)("label",{htmlFor:"file-upload",className:`w-full max-w-md flex flex-col items-center px-6 py-8 rounded-xl shadow-lg tracking-wide uppercase border-2 border-dashed cursor-pointer transition-all duration-200 backdrop-blur-sm
                                ${Y||K?"border-blue-500 bg-blue-50/80 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 bg-gray-50/80 dark:bg-gray-800/40"} 
                                text-gray-700 dark:text-gray-300 
                                hover:bg-gray-100/80 dark:hover:bg-gray-700/40 
                                hover:border-blue-400 dark:hover:border-blue-500`,children:[(0,t.jsx)(g.HVe,{className:`text-4xl mb-3 ${Y||K?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`}),(0,t.jsx)("span",{className:"text-sm font-medium leading-normal",children:Y?Y.name:K?"Change Chart":"Upload Chart"}),(0,t.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"PNG, JPG, GIF up to 10MB"}),(0,t.jsx)("input",{id:"file-upload",name:"imageUrl",type:"file",className:"hidden",onChange:r=>{if(setUploadError(null),r.target.files&&r.target.files[0]){let e=r.target.files[0];if(e.size>5242880)return void setUploadError("File is too large (max 5MB).");if(!["image/png","image/jpeg","image/jpg","image/gif","image/webp"].includes(e.type))return void setUploadError("Invalid file type. Please select an image (PNG, JPG, GIF, WEBP).");J(e),Q(URL.createObjectURL(e)),V(e=>({...e,imageUrl:""}))}else J(null),Q(e?.imageUrl||null)},accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp"})]}),K&&(0,t.jsxs)("div",{className:"relative group max-w-md w-full",children:[(0,t.jsx)("img",{src:K,alt:"Selected chart preview",className:"w-full h-auto rounded-2xl shadow-lg object-contain max-h-96 border border-gray-200/50 dark:border-gray-700/50"}),(0,t.jsx)("button",{type:"button",onClick:()=>{J(null),Q(e?.imageUrl||null),V(r=>({...r,imageUrl:e?.imageUrl||""}))},className:"absolute top-3 right-3 p-2 bg-black/50 backdrop-blur-sm rounded-full text-white hover:bg-red-500 hover:bg-opacity-90 transition-all duration-200 opacity-0 group-hover:opacity-100 shadow-lg","aria-label":"Remove image",children:(0,t.jsx)(g._Hm,{className:"h-5 w-5"})})]})]})]}),(0,t.jsx)("div",{className:U,children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end items-center gap-4 pt-6 border-t border-gray-200/30 dark:border-gray-700/30",children:[b&&(0,t.jsx)("button",{type:"button",onClick:b,className:`${eo} bg-gray-100/80 dark:bg-gray-800/80 hover:bg-gray-500 dark:hover:bg-gray-500 text-gray-600 dark:text-gray-400 hover:text-white focus:ring-gray-500 hover:scale-105 backdrop-blur-sm`,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:f||X,className:`${eo} bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white focus:ring-blue-500 hover:scale-105 hover:shadow-xl disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:scale-100`,children:f||X?"Saving...":r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.dIn,{className:"mr-2"})," Update Trade"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Cer,{className:"mr-2"})," Log Trade"]})})]})})]})]})}}};