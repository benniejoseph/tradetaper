@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@100;300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* 
  TradeTaper Centralized Theme System - 3D Emerald Edition
*/

@layer base {
  :root {
    /* light mode defaults */
    --background: 248 250 252; /* Slate 50 */
    --foreground: 2 6 23; /* Slate 950 */

    --card: 255 255 255;
    --card-foreground: 2 6 23;
    
    --popover: 255 255 255;
    --popover-foreground: 2 6 23;
    
    --primary: 16 185 129; /* Emerald 500 */
    --primary-foreground: 255 255 255;
    
    --secondary: 241 245 249; /* Slate 100 */
    --secondary-foreground: 15 23 42; /* Slate 900 */
    
    --muted: 241 245 249; /* Slate 100 */
    --muted-foreground: 100 116 139; /* Slate 500 */
    
    --accent: 241 245 249; /* Slate 100 */
    --accent-foreground: 15 23 42; /* Slate 900 */
    
    --destructive: 239 68 68;
    --destructive-foreground: 248 250 252;

    --border: 226 232 240; /* Slate 200 */
    --input: 226 232 240;
    --ring: 16 185 129;
    
    --radius-xl: 1.5rem;
    --radius-2xl: 2rem;
  }

  .dark {
    --background: 0 0 0; /* Black */
    --foreground: 255 255 255; /* White */

    --card: 10 10 10; /* Neutral 950/900 hybrid */
    --card-foreground: 255 255 255;
    
    --popover: 0 0 0; /* Black */
    --popover-foreground: 255 255 255;
    
    --primary: 16 185 129;
    --primary-foreground: 255 255 255;
    
    --secondary: 23 23 23; /* Neutral 900/800 hybrid */
    --secondary-foreground: 255 255 255;
    
    --muted: 23 23 23;
    --muted-foreground: 163 163 163; /* Neutral 500 */
    
    --accent: 23 23 23;
    --accent-foreground: 255 255 255;
    
    --destructive: 127 29 29;
    --destructive-foreground: 255 255 255;

    --border: 23 23 23;
    --input: 23 23 23;
    --ring: 16 185 129;
  }

  html {
    @apply bg-background text-foreground;
    font-family: 'Poppins', sans-serif;
    scroll-behavior: smooth;
  }
}

@layer components {
  /* 3D Glass Card */
  .glass-card {
    @apply bg-card/40 backdrop-blur-xl border border-border shadow-xl transition-all duration-500;
  }

  .glass-card:hover {
    @apply border-emerald-500/30 shadow-[0_0_30px_rgba(16,185,129,0.2)];
    transform: translateY(-5px) scale(1.01);
  }

  /* Neon Text Gradient */
  .text-gradient-emerald {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 via-teal-400 to-lime-400;
  }

  /* 3D Button */
  .btn-3d {
    @apply relative px-8 py-4 rounded-xl font-bold transition-all duration-300 transform hover:-translate-y-1 active:translate-y-0 shadow-lg;
  }

  .btn-primary-3d {
    @apply bg-gradient-to-r from-emerald-600 to-teal-600 text-white shadow-emerald-900/20 hover:shadow-emerald-500/40;
  }

  .btn-secondary-3d {
    @apply bg-white/5 border border-white/10 text-white hover:bg-white/10 hover:border-emerald-500/30;
  }
}

@layer utilities {
  .perspective-1000 {
    perspective: 1000px;
  }
  
  .transform-style-3d {
    transform-style: preserve-3d;
  }
  
  .backface-hidden {
    backface-visibility: hidden;
  }

  /* Custom Animations */
  @keyframes float {
    0% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(1deg); }
    100% { transform: translateY(0px) rotate(0deg); }
  }

  @keyframes pulse-glow {
    0% { box-shadow: 0 0 5px var(--glow-emerald); }
    50% { box-shadow: 0 0 20px var(--glow-emerald), 0 0 10px var(--accent-emerald); }
    100% { box-shadow: 0 0 5px var(--glow-emerald); }
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }
  
  .animate-pulse-glow {
    animation: pulse-glow 3s infinite;
  }
  
  .delay-100 { animation-delay: 100ms; }
  .delay-200 { animation-delay: 200ms; }
  .delay-300 { animation-delay: 300ms; }

  @keyframes globe-spin {
    0% { background-position: 0 0; }
    100% { background-position: 600px 0; }
  }

  @keyframes globe-float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-12px); }
    100% { transform: translateY(0px); }
  }

  @keyframes star-twinkle {
    0% { opacity: 0.55; }
    50% { opacity: 0.85; }
    100% { opacity: 0.55; }
  }

  @keyframes orbit-spin {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
  }

  @keyframes comet-fly {
    0% { transform: translate(-20%, -20%) rotate(-20deg); opacity: 0; }
    10% { opacity: 0.7; }
    70% { opacity: 0.7; }
    100% { transform: translate(120%, 120%) rotate(-20deg); opacity: 0; }
  }

  .hero-globe-scene {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
    z-index: 0;
  }

  .hero-globe-canvas {
    position: absolute;
    inset: 0;
    z-index: 1;
  }

  .hero-globe-canvas canvas {
    width: 100% !important;
    height: 100% !important;
  }

  .hero-starfield {
    position: absolute;
    inset: -10%;
    background-image:
      radial-gradient(1px 1px at 15% 20%, rgba(255,255,255,0.7), transparent 60%),
      radial-gradient(1.5px 1.5px at 75% 15%, rgba(255,255,255,0.6), transparent 60%),
      radial-gradient(1px 1px at 85% 45%, rgba(255,255,255,0.5), transparent 60%),
      radial-gradient(2px 2px at 20% 70%, rgba(255,255,255,0.6), transparent 60%),
      radial-gradient(1px 1px at 55% 65%, rgba(255,255,255,0.4), transparent 60%),
      radial-gradient(1px 1px at 35% 85%, rgba(255,255,255,0.5), transparent 60%),
      radial-gradient(1.5px 1.5px at 45% 30%, rgba(96,165,250,0.7), transparent 70%),
      radial-gradient(1.5px 1.5px at 65% 78%, rgba(167,139,250,0.6), transparent 70%);
    opacity: 0.85;
    animation: star-twinkle 10s ease-in-out infinite;
  }

  .hero-starfield-dense {
    position: absolute;
    inset: -15%;
    background-image:
      radial-gradient(1px 1px at 10% 30%, rgba(255,255,255,0.45), transparent 60%),
      radial-gradient(1px 1px at 30% 12%, rgba(255,255,255,0.5), transparent 60%),
      radial-gradient(1px 1px at 60% 22%, rgba(255,255,255,0.35), transparent 60%),
      radial-gradient(1px 1px at 80% 35%, rgba(255,255,255,0.4), transparent 60%),
      radial-gradient(1px 1px at 25% 55%, rgba(255,255,255,0.4), transparent 60%),
      radial-gradient(1px 1px at 55% 70%, rgba(255,255,255,0.3), transparent 60%),
      radial-gradient(1px 1px at 70% 85%, rgba(255,255,255,0.45), transparent 60%),
      radial-gradient(1px 1px at 85% 75%, rgba(255,255,255,0.35), transparent 60%),
      radial-gradient(1px 1px at 45% 40%, rgba(255,255,255,0.4), transparent 60%);
    opacity: 0.6;
    animation: star-twinkle 14s ease-in-out infinite;
  }

  .hero-starfield-nebula {
    position: absolute;
    inset: -20%;
    background:
      radial-gradient(40% 40% at 20% 20%, rgba(99,102,241,0.25), transparent 60%),
      radial-gradient(35% 35% at 70% 25%, rgba(16,185,129,0.2), transparent 60%),
      radial-gradient(45% 45% at 65% 70%, rgba(168,85,247,0.25), transparent 60%),
      radial-gradient(30% 30% at 35% 80%, rgba(56,189,248,0.2), transparent 60%);
    filter: blur(10px);
    opacity: 0.85;
    mix-blend-mode: screen;
  }

  .hero-comets {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }

  .hero-comet {
    position: absolute;
    width: 260px;
    height: 3px;
    background: linear-gradient(90deg, rgba(255,255,255,0), rgba(147,197,253,0.9), rgba(167,139,250,0.9), rgba(255,255,255,0));
    filter: drop-shadow(0 0 8px rgba(99,102,241,0.8));
    opacity: 0;
    animation: comet-fly 16s linear infinite;
  }

  .hero-comet::after {
    content: "";
    position: absolute;
    right: 12px;
    top: 50%;
    width: 6px;
    height: 6px;
    background: #ffffff;
    border-radius: 9999px;
    transform: translateY(-50%);
    box-shadow: 0 0 14px rgba(99,102,241,0.95);
  }

  .hero-comet-a { top: 12%; left: -25%; animation-delay: 0s; }
  .hero-comet-b { top: 32%; left: -35%; animation-delay: 5s; }
  .hero-comet-c { top: 52%; left: -30%; animation-delay: 10s; }

  .hero-globe-overlay {
    position: absolute;
    left: 50%;
    top: 101.5%;
    transform: translate(-50%, -50%);
    width: clamp(900px, 120vw, 1870px);
    aspect-ratio: 1 / 1;
    z-index: 2;
  }

  .hero-globe-halo {
    position: absolute;
    inset: -12%;
    border-radius: 9999px;
    background: radial-gradient(circle at 50% 50%, rgba(16,185,129,0.6), rgba(20,184,166,0.35) 38%, rgba(14,116,144,0.2) 58%, transparent 80%);
    filter: blur(36px);
    opacity: 1;
  }

  .hero-globe-sphere {
    position: absolute;
    inset: 0;
    border-radius: 9999px;
    background:
      radial-gradient(120% 120% at 30% 20%, rgba(255,255,255,0.32), transparent 42%),
      radial-gradient(90% 90% at 85% 30%, rgba(99,102,241,0.55), transparent 55%),
      radial-gradient(90% 90% at 75% 70%, rgba(0,0,0,0.65), transparent 60%),
      radial-gradient(120% 120% at 50% 0%, rgba(16,185,129,0.6), rgba(6,12,20,0.86) 52%, rgba(2,2,6,0.98) 100%);
    box-shadow:
      0 0 200px rgba(16,185,129,0.6),
      0 0 260px rgba(99,102,241,0.45),
      inset 0 0 140px rgba(0,0,0,0.7);
    animation: globe-float 14s ease-in-out infinite;
  }

  .hero-globe-dots {
    position: absolute;
    inset: 10%;
    border-radius: 9999px;
    background-image: radial-gradient(rgba(148,163,184,0.55) 0.9px, transparent 2px);
    background-size: 7px 7px;
    opacity: 0.55;
    animation: globe-spin 48s linear infinite;
    mask-image: radial-gradient(circle at 50% 50%, #000 62%, transparent 72%);
    -webkit-mask-image: radial-gradient(circle at 50% 50%, #000 62%, transparent 72%);
  }

  .hero-globe-continents {
    position: absolute;
    inset: 12%;
    border-radius: 9999px;
    background-image:
      radial-gradient(closest-side at 22% 48%, rgba(16,185,129,0.55), transparent 60%),
      radial-gradient(closest-side at 35% 56%, rgba(16,185,129,0.5), transparent 62%),
      radial-gradient(closest-side at 42% 42%, rgba(16,185,129,0.45), transparent 60%),
      radial-gradient(closest-side at 60% 45%, rgba(16,185,129,0.5), transparent 60%),
      radial-gradient(closest-side at 70% 60%, rgba(16,185,129,0.4), transparent 62%),
      radial-gradient(closest-side at 76% 38%, rgba(16,185,129,0.35), transparent 62%);
    opacity: 0.95;
    filter: blur(0.3px);
    animation: globe-spin 62s linear infinite reverse;
    mask-image: radial-gradient(circle at 50% 50%, #000 62%, transparent 72%);
    -webkit-mask-image: radial-gradient(circle at 50% 50%, #000 62%, transparent 72%);
  }

  .hero-globe-map {
    position: absolute;
    inset: 12%;
    border-radius: 9999px;
    background-image: radial-gradient(rgba(255,255,255,0.98) 1.8px, transparent 2.6px);
    background-size: 8px 8px;
    opacity: 1;
    filter: drop-shadow(0 0 10px rgba(99,102,241,0.5));
    mix-blend-mode: screen;
    animation: globe-spin 52s linear infinite;
    mask-image:
      url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 500'><rect width='1000' height='500' fill='black'/><g fill='white'><ellipse cx='210' cy='190' rx='150' ry='95'/><ellipse cx='270' cy='320' rx='90' ry='130' transform='rotate(18 270 320)'/><ellipse cx='365' cy='140' rx='45' ry='25'/><ellipse cx='520' cy='180' rx='95' ry='60'/><ellipse cx='560' cy='290' rx='125' ry='145'/><ellipse cx='700' cy='200' rx='190' ry='90'/><ellipse cx='820' cy='330' rx='85' ry='55'/></g></svg>");
    mask-size: cover;
    mask-position: center;
    mask-repeat: no-repeat;
    -webkit-mask-image:
      url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 500'><rect width='1000' height='500' fill='black'/><g fill='white'><ellipse cx='210' cy='190' rx='150' ry='95'/><ellipse cx='270' cy='320' rx='90' ry='130' transform='rotate(18 270 320)'/><ellipse cx='365' cy='140' rx='45' ry='25'/><ellipse cx='520' cy='180' rx='95' ry='60'/><ellipse cx='560' cy='290' rx='125' ry='145'/><ellipse cx='700' cy='200' rx='190' ry='90'/><ellipse cx='820' cy='330' rx='85' ry='55'/></g></svg>");
    -webkit-mask-size: cover;
    -webkit-mask-position: center;
    -webkit-mask-repeat: no-repeat;
  }

  .hero-globe-rim {
    position: absolute;
    inset: -2%;
    border-radius: 9999px;
    border: 2px solid rgba(52,211,153,0.7);
    box-shadow:
      0 0 30px rgba(16,185,129,0.55),
      0 0 80px rgba(20,184,166,0.3);
    opacity: 0.9;
  }

  .hero-globe-terminator {
    position: absolute;
    inset: 0;
    border-radius: 9999px;
    background: radial-gradient(70% 70% at 80% 65%, rgba(0,0,0,0), rgba(0,0,0,0.6) 60%, rgba(0,0,0,0.9) 100%);
    mix-blend-mode: multiply;
  }

  .hero-globe-sheen {
    position: absolute;
    inset: -5%;
    border-radius: 9999px;
    background: radial-gradient(40% 40% at 25% 20%, rgba(255,255,255,0.2), transparent 60%);
    opacity: 0.6;
  }


  .hero-globe-card {
    position: absolute;
    left: 58%;
    top: 58%;
    display: flex;
    gap: 12px;
    align-items: center;
    padding: 12px 16px;
    border-radius: 16px;
    background: linear-gradient(135deg, rgba(12,10,26,0.95), rgba(24,18,48,0.75));
    border: 1px solid rgba(148,163,184,0.3);
    box-shadow: 0 18px 60px rgba(0,0,0,0.55), inset 0 0 24px rgba(168,85,247,0.18);
    backdrop-filter: blur(12px);
    animation: globe-float 10s ease-in-out infinite;
  }

  .hero-globe-card-dot {
    width: 12px;
    height: 12px;
    border-radius: 9999px;
    background: #c084fc;
    box-shadow: 0 0 12px rgba(192,132,252,0.9), 0 0 24px rgba(99,102,241,0.55);
  }

  .hero-globe-card-title {
    font-size: 12px;
    font-weight: 600;
    color: #f8fafc;
  }

  .hero-globe-card-subtitle {
    font-size: 11px;
    color: rgba(148,163,184,0.9);
  }

  @media (max-width: 1024px) {
    .hero-globe-overlay { top: 89%; width: clamp(900px, 250vw, 1900px); }
  }

  @media (max-width: 768px) {
    .hero-globe-overlay { top: 89%; width: clamp(900px, 250vw, 1900px); }
  }

  @media (prefers-reduced-motion: reduce) {
    .hero-globe-dots,
    .hero-globe-continents,
    .hero-globe-map,
    .hero-globe-sphere,
    .hero-starfield,
    .hero-starfield-dense,
    .hero-starfield-nebula,
    .hero-comet,
    .hero-globe-card {
      animation: none;
    }
  }
}

/* React Calendar Heatmap Theme Overrides for Emerald */
.react-calendar-heatmap text {
  font-size: 0.6rem;
  fill: var(--text-secondary);
}

.react-calendar-heatmap .color-empty {
  fill: #1e293b; /* Slate 800 */
}

/* Green scale for positive P&L - Emeralds */
.react-calendar-heatmap .color-scale-green-1 { fill: #064e3b; }
.react-calendar-heatmap .color-scale-green-2 { fill: #047857; }
.react-calendar-heatmap .color-scale-green-3 { fill: #10b981; }
.react-calendar-heatmap .color-scale-green-4 { fill: #34d399; }

/* Red scale for negative P&L - Rose/Red muted */
.react-calendar-heatmap .color-scale-red-1 { fill: #881337; }
.react-calendar-heatmap .color-scale-red-2 { fill: #be123c; }
.react-calendar-heatmap .color-scale-red-3 { fill: #f43f5e; }
.react-calendar-heatmap .color-scale-red-4 { fill: #fb7185; }
